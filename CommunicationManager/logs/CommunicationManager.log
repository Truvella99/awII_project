2024-05-18 16:06:05,593 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 16420 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 16:06:05,596 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 16:06:06,541 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8080 (http)
2024-05-18 16:06:06,556 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 16:06:06,560 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 16:06:06,630 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 16:06:06,631 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 994 ms
2024-05-18 16:06:07,532 WARN [main] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext [AbstractApplicationContext.java:632] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Failed to start bean 'webServerStartStop'
2024-05-18 16:06:07,542 INFO [main] o.s.b.a.l.ConditionEvaluationReportLogger [ConditionEvaluationReportLogger.java:82] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-05-18 16:06:07,555 ERROR [main] o.s.b.d.LoggingFailureAnalysisReporter [LoggingFailureAnalysisReporter.java:40] 

***************************
APPLICATION FAILED TO START
***************************

Description:

Web server failed to start. Port 8080 was already in use.

Action:

Identify and stop the process that's listening on port 8080 or configure this application to listen on another port.

2024-05-18 16:07:34,916 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 7924 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 16:07:34,918 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 16:07:35,688 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 16:07:35,695 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 16:07:35,696 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 16:07:35,739 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 16:07:35,739 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 790 ms
2024-05-18 16:07:36,545 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 16:07:36,664 WARN [main] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext [AbstractApplicationContext.java:632] Exception encountered during context initialization - cancelling refresh attempt: org.apache.camel.FailedToCreateRouteException: Failed to create route route1 at: >>> Marshal[org.apache.camel.model.dataformat.JsonDataFormat@504c415c] <<< in route: Route(route1)[From[google-mail-stream:0?markAsRead=true&scop... because of Data format 'jackson' could not be created. Ensure that the data format is valid and the associated Camel component is present on the classpath
2024-05-18 16:07:36,670 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Stopping service [Tomcat]
2024-05-18 16:07:36,675 INFO [main] o.s.b.a.l.ConditionEvaluationReportLogger [ConditionEvaluationReportLogger.java:82] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-05-18 16:07:36,686 ERROR [main] o.s.b.SpringApplication [SpringApplication.java:851] Application run failed
org.apache.camel.FailedToCreateRouteException: Failed to create route route1 at: >>> Marshal[org.apache.camel.model.dataformat.JsonDataFormat@504c415c] <<< in route: Route(route1)[From[google-mail-stream:0?markAsRead=true&scop... because of Data format 'jackson' could not be created. Ensure that the data format is valid and the associated Camel component is present on the classpath
	at org.apache.camel.reifier.RouteReifier.doCreateRoute(RouteReifier.java:228)
	at org.apache.camel.reifier.RouteReifier.createRoute(RouteReifier.java:79)
	at org.apache.camel.impl.DefaultModelReifierFactory.createRoute(DefaultModelReifierFactory.java:49)
	at org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:728)
	at org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:594)
	at org.apache.camel.impl.engine.AbstractCamelContext.doInit(AbstractCamelContext.java:2391)
	at org.apache.camel.support.service.BaseService.init(BaseService.java:78)
	at org.apache.camel.impl.engine.AbstractCamelContext.init(AbstractCamelContext.java:2027)
	at org.apache.camel.support.service.BaseService.start(BaseService.java:105)
	at org.apache.camel.impl.engine.AbstractCamelContext.start(AbstractCamelContext.java:2046)
	at org.apache.camel.impl.DefaultCamelContext.start(DefaultCamelContext.java:212)
	at org.apache.camel.spring.SpringCamelContext.start(SpringCamelContext.java:119)
	at org.apache.camel.spring.SpringCamelContext.onApplicationEvent(SpringCamelContext.java:151)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:451)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:384)
	at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:984)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at it.polito.communicationmanager.CommunicationManagerApplicationKt.main(CommunicationManagerApplication.kt:13)
Caused by: java.lang.IllegalArgumentException: Data format 'jackson' could not be created. Ensure that the data format is valid and the associated Camel component is present on the classpath
	at org.apache.camel.reifier.dataformat.DataFormatReifier.createDataFormat(DataFormatReifier.java:282)
	at org.apache.camel.reifier.dataformat.DataFormatReifier.getDataFormat(DataFormatReifier.java:153)
	at org.apache.camel.reifier.dataformat.DataFormatReifier.getDataFormat(DataFormatReifier.java:113)
	at org.apache.camel.reifier.MarshalReifier.createProcessor(MarshalReifier.java:35)
	at org.apache.camel.reifier.ProcessorReifier.makeProcessor(ProcessorReifier.java:879)
	at org.apache.camel.reifier.ProcessorReifier.addRoutes(ProcessorReifier.java:619)
	at org.apache.camel.reifier.RouteReifier.doCreateRoute(RouteReifier.java:224)
	... 26 common frames omitted
2024-05-18 16:09:47,330 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 3292 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 16:09:47,332 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 16:09:48,107 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 16:09:48,116 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 16:09:48,117 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 16:09:48,166 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 16:09:48,166 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 803 ms
2024-05-18 16:09:48,981 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 16:09:49,101 WARN [main] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext [AbstractApplicationContext.java:632] Exception encountered during context initialization - cancelling refresh attempt: org.apache.camel.FailedToCreateRouteException: Failed to create route route1 at: >>> To[http4://localhost:8080/API/messages/] <<< in route: Route(route1)[From[google-mail-stream:0?markAsRead=true&scop... because of No endpoint could be found for: http4://localhost:8080/API/messages/, please check your classpath contains the needed Camel component jar.
2024-05-18 16:09:49,106 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Stopping service [Tomcat]
2024-05-18 16:09:49,111 INFO [main] o.s.b.a.l.ConditionEvaluationReportLogger [ConditionEvaluationReportLogger.java:82] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-05-18 16:09:49,122 ERROR [main] o.s.b.SpringApplication [SpringApplication.java:851] Application run failed
org.apache.camel.FailedToCreateRouteException: Failed to create route route1 at: >>> To[http4://localhost:8080/API/messages/] <<< in route: Route(route1)[From[google-mail-stream:0?markAsRead=true&scop... because of No endpoint could be found for: http4://localhost:8080/API/messages/, please check your classpath contains the needed Camel component jar.
	at org.apache.camel.reifier.RouteReifier.doCreateRoute(RouteReifier.java:228)
	at org.apache.camel.reifier.RouteReifier.createRoute(RouteReifier.java:79)
	at org.apache.camel.impl.DefaultModelReifierFactory.createRoute(DefaultModelReifierFactory.java:49)
	at org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:728)
	at org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:594)
	at org.apache.camel.impl.engine.AbstractCamelContext.doInit(AbstractCamelContext.java:2391)
	at org.apache.camel.support.service.BaseService.init(BaseService.java:78)
	at org.apache.camel.impl.engine.AbstractCamelContext.init(AbstractCamelContext.java:2027)
	at org.apache.camel.support.service.BaseService.start(BaseService.java:105)
	at org.apache.camel.impl.engine.AbstractCamelContext.start(AbstractCamelContext.java:2046)
	at org.apache.camel.impl.DefaultCamelContext.start(DefaultCamelContext.java:212)
	at org.apache.camel.spring.SpringCamelContext.start(SpringCamelContext.java:119)
	at org.apache.camel.spring.SpringCamelContext.onApplicationEvent(SpringCamelContext.java:151)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:451)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:384)
	at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:984)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at it.polito.communicationmanager.CommunicationManagerApplicationKt.main(CommunicationManagerApplication.kt:13)
Caused by: org.apache.camel.NoSuchEndpointException: No endpoint could be found for: http4://localhost:8080/API/messages/, please check your classpath contains the needed Camel component jar.
	at org.apache.camel.impl.engine.AbstractCamelContext.doGetEndpoint(AbstractCamelContext.java:837)
	at org.apache.camel.impl.engine.AbstractCamelContext.getEndpoint(AbstractCamelContext.java:731)
	at org.apache.camel.support.CamelContextHelper.resolveEndpoint(CamelContextHelper.java:128)
	at org.apache.camel.reifier.SendReifier.resolveEndpoint(SendReifier.java:47)
	at org.apache.camel.reifier.SendReifier.createProcessor(SendReifier.java:37)
	at org.apache.camel.reifier.ProcessorReifier.makeProcessor(ProcessorReifier.java:879)
	at org.apache.camel.reifier.ProcessorReifier.addRoutes(ProcessorReifier.java:619)
	at org.apache.camel.reifier.RouteReifier.doCreateRoute(RouteReifier.java:224)
	... 26 common frames omitted
2024-05-18 16:10:23,753 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 2020 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 16:10:23,755 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 16:10:24,569 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 16:10:24,577 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 16:10:24,577 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 16:10:24,617 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 16:10:24,618 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 830 ms
2024-05-18 16:10:25,431 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 16:10:25,543 WARN [main] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext [AbstractApplicationContext.java:632] Exception encountered during context initialization - cancelling refresh attempt: org.apache.camel.FailedToCreateRouteException: Failed to create route route1 at: >>> To[http://localhost:8080/API/messages/] <<< in route: Route(route1)[From[google-mail-stream:0?markAsRead=true&scop... because of No endpoint could be found for: http://localhost:8080/API/messages/, please check your classpath contains the needed Camel component jar.
2024-05-18 16:10:25,550 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Stopping service [Tomcat]
2024-05-18 16:10:25,554 INFO [main] o.s.b.a.l.ConditionEvaluationReportLogger [ConditionEvaluationReportLogger.java:82] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-05-18 16:10:25,563 ERROR [main] o.s.b.SpringApplication [SpringApplication.java:851] Application run failed
org.apache.camel.FailedToCreateRouteException: Failed to create route route1 at: >>> To[http://localhost:8080/API/messages/] <<< in route: Route(route1)[From[google-mail-stream:0?markAsRead=true&scop... because of No endpoint could be found for: http://localhost:8080/API/messages/, please check your classpath contains the needed Camel component jar.
	at org.apache.camel.reifier.RouteReifier.doCreateRoute(RouteReifier.java:228)
	at org.apache.camel.reifier.RouteReifier.createRoute(RouteReifier.java:79)
	at org.apache.camel.impl.DefaultModelReifierFactory.createRoute(DefaultModelReifierFactory.java:49)
	at org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:728)
	at org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:594)
	at org.apache.camel.impl.engine.AbstractCamelContext.doInit(AbstractCamelContext.java:2391)
	at org.apache.camel.support.service.BaseService.init(BaseService.java:78)
	at org.apache.camel.impl.engine.AbstractCamelContext.init(AbstractCamelContext.java:2027)
	at org.apache.camel.support.service.BaseService.start(BaseService.java:105)
	at org.apache.camel.impl.engine.AbstractCamelContext.start(AbstractCamelContext.java:2046)
	at org.apache.camel.impl.DefaultCamelContext.start(DefaultCamelContext.java:212)
	at org.apache.camel.spring.SpringCamelContext.start(SpringCamelContext.java:119)
	at org.apache.camel.spring.SpringCamelContext.onApplicationEvent(SpringCamelContext.java:151)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:451)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:384)
	at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:984)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at it.polito.communicationmanager.CommunicationManagerApplicationKt.main(CommunicationManagerApplication.kt:13)
Caused by: org.apache.camel.NoSuchEndpointException: No endpoint could be found for: http://localhost:8080/API/messages/, please check your classpath contains the needed Camel component jar.
	at org.apache.camel.impl.engine.AbstractCamelContext.doGetEndpoint(AbstractCamelContext.java:837)
	at org.apache.camel.impl.engine.AbstractCamelContext.getEndpoint(AbstractCamelContext.java:731)
	at org.apache.camel.support.CamelContextHelper.resolveEndpoint(CamelContextHelper.java:128)
	at org.apache.camel.reifier.SendReifier.resolveEndpoint(SendReifier.java:47)
	at org.apache.camel.reifier.SendReifier.createProcessor(SendReifier.java:37)
	at org.apache.camel.reifier.ProcessorReifier.makeProcessor(ProcessorReifier.java:879)
	at org.apache.camel.reifier.ProcessorReifier.addRoutes(ProcessorReifier.java:619)
	at org.apache.camel.reifier.RouteReifier.doCreateRoute(RouteReifier.java:224)
	... 26 common frames omitted
2024-05-18 16:10:55,807 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 23568 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 16:10:55,809 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 16:10:56,575 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 16:10:56,584 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 16:10:56,584 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 16:10:56,627 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 16:10:56,628 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 782 ms
2024-05-18 16:10:57,395 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 16:10:57,497 WARN [main] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext [AbstractApplicationContext.java:632] Exception encountered during context initialization - cancelling refresh attempt: org.apache.camel.FailedToCreateRouteException: Failed to create route route1 at: >>> To[http://localhost:8080/API/messages/] <<< in route: Route(route1)[From[google-mail-stream:0?markAsRead=true&scop... because of No endpoint could be found for: http://localhost:8080/API/messages/, please check your classpath contains the needed Camel component jar.
2024-05-18 16:10:57,503 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Stopping service [Tomcat]
2024-05-18 16:10:57,507 INFO [main] o.s.b.a.l.ConditionEvaluationReportLogger [ConditionEvaluationReportLogger.java:82] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-05-18 16:10:57,518 ERROR [main] o.s.b.SpringApplication [SpringApplication.java:851] Application run failed
org.apache.camel.FailedToCreateRouteException: Failed to create route route1 at: >>> To[http://localhost:8080/API/messages/] <<< in route: Route(route1)[From[google-mail-stream:0?markAsRead=true&scop... because of No endpoint could be found for: http://localhost:8080/API/messages/, please check your classpath contains the needed Camel component jar.
	at org.apache.camel.reifier.RouteReifier.doCreateRoute(RouteReifier.java:228)
	at org.apache.camel.reifier.RouteReifier.createRoute(RouteReifier.java:79)
	at org.apache.camel.impl.DefaultModelReifierFactory.createRoute(DefaultModelReifierFactory.java:49)
	at org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:728)
	at org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:594)
	at org.apache.camel.impl.engine.AbstractCamelContext.doInit(AbstractCamelContext.java:2391)
	at org.apache.camel.support.service.BaseService.init(BaseService.java:78)
	at org.apache.camel.impl.engine.AbstractCamelContext.init(AbstractCamelContext.java:2027)
	at org.apache.camel.support.service.BaseService.start(BaseService.java:105)
	at org.apache.camel.impl.engine.AbstractCamelContext.start(AbstractCamelContext.java:2046)
	at org.apache.camel.impl.DefaultCamelContext.start(DefaultCamelContext.java:212)
	at org.apache.camel.spring.SpringCamelContext.start(SpringCamelContext.java:119)
	at org.apache.camel.spring.SpringCamelContext.onApplicationEvent(SpringCamelContext.java:151)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:451)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:384)
	at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:984)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at it.polito.communicationmanager.CommunicationManagerApplicationKt.main(CommunicationManagerApplication.kt:13)
Caused by: org.apache.camel.NoSuchEndpointException: No endpoint could be found for: http://localhost:8080/API/messages/, please check your classpath contains the needed Camel component jar.
	at org.apache.camel.impl.engine.AbstractCamelContext.doGetEndpoint(AbstractCamelContext.java:837)
	at org.apache.camel.impl.engine.AbstractCamelContext.getEndpoint(AbstractCamelContext.java:731)
	at org.apache.camel.support.CamelContextHelper.resolveEndpoint(CamelContextHelper.java:128)
	at org.apache.camel.reifier.SendReifier.resolveEndpoint(SendReifier.java:47)
	at org.apache.camel.reifier.SendReifier.createProcessor(SendReifier.java:37)
	at org.apache.camel.reifier.ProcessorReifier.makeProcessor(ProcessorReifier.java:879)
	at org.apache.camel.reifier.ProcessorReifier.addRoutes(ProcessorReifier.java:619)
	at org.apache.camel.reifier.RouteReifier.doCreateRoute(RouteReifier.java:224)
	... 26 common frames omitted
2024-05-18 16:12:24,088 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 4756 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 16:12:24,090 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 16:12:24,902 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 16:12:24,910 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 16:12:24,910 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 16:12:24,958 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 16:12:24,958 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 829 ms
2024-05-18 16:12:25,766 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 16:12:26,364 WARN [main] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext [AbstractApplicationContext.java:632] Exception encountered during context initialization - cancelling refresh attempt: org.apache.camel.FailedToStartRouteException: Failed to start route route1 because of 400 Bad Request
POST https://oauth2.googleapis.com/token
{
  "error" : "invalid_grant",
  "error_description" : "Token has been expired or revoked."
}
2024-05-18 16:12:26,369 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Stopping service [Tomcat]
2024-05-18 16:12:26,374 INFO [main] o.s.b.a.l.ConditionEvaluationReportLogger [ConditionEvaluationReportLogger.java:82] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-05-18 16:12:26,386 ERROR [main] o.s.b.SpringApplication [SpringApplication.java:851] Application run failed
org.apache.camel.FailedToStartRouteException: Failed to start route route1 because of 400 Bad Request
POST https://oauth2.googleapis.com/token
{
  "error" : "invalid_grant",
  "error_description" : "Token has been expired or revoked."
}
	at org.apache.camel.impl.engine.RouteService.setUp(RouteService.java:131)
	at org.apache.camel.impl.engine.InternalRouteStartupManager.doInitRoutes(InternalRouteStartupManager.java:89)
	at org.apache.camel.impl.engine.AbstractCamelContext.doInit(AbstractCamelContext.java:2393)
	at org.apache.camel.support.service.BaseService.init(BaseService.java:78)
	at org.apache.camel.impl.engine.AbstractCamelContext.init(AbstractCamelContext.java:2027)
	at org.apache.camel.support.service.BaseService.start(BaseService.java:105)
	at org.apache.camel.impl.engine.AbstractCamelContext.start(AbstractCamelContext.java:2046)
	at org.apache.camel.impl.DefaultCamelContext.start(DefaultCamelContext.java:212)
	at org.apache.camel.spring.SpringCamelContext.start(SpringCamelContext.java:119)
	at org.apache.camel.spring.SpringCamelContext.onApplicationEvent(SpringCamelContext.java:151)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:451)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:384)
	at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:984)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at it.polito.communicationmanager.CommunicationManagerApplicationKt.main(CommunicationManagerApplication.kt:13)
Caused by: com.google.api.client.auth.oauth2.TokenResponseException: 400 Bad Request
POST https://oauth2.googleapis.com/token
{
  "error" : "invalid_grant",
  "error_description" : "Token has been expired or revoked."
}
	at com.google.api.client.auth.oauth2.TokenResponseException.from(TokenResponseException.java:103)
	at com.google.api.client.auth.oauth2.TokenRequest.executeUnparsed(TokenRequest.java:308)
	at com.google.api.client.auth.oauth2.TokenRequest.execute(TokenRequest.java:324)
	at com.google.api.client.auth.oauth2.Credential.executeRefreshToken(Credential.java:547)
	at com.google.api.client.googleapis.auth.oauth2.GoogleCredential.executeRefreshToken(GoogleCredential.java:352)
	at com.google.api.client.auth.oauth2.Credential.refreshToken(Credential.java:470)
	at com.google.api.client.auth.oauth2.Credential.intercept(Credential.java:201)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:880)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamEndpoint.createConsumer(GoogleMailStreamEndpoint.java:65)
	at org.apache.camel.impl.engine.DefaultRoute.gatherRootServices(DefaultRoute.java:655)
	at org.apache.camel.impl.engine.DefaultRoute.gatherServices(DefaultRoute.java:639)
	at org.apache.camel.impl.engine.DefaultRoute.initializeServices(DefaultRoute.java:224)
	at org.apache.camel.impl.engine.RouteService.doSetup(RouteService.java:150)
	at org.apache.camel.impl.engine.RouteService.setUp(RouteService.java:129)
	... 23 common frames omitted
2024-05-18 16:16:56,978 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 11856 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 16:16:56,980 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 16:16:57,737 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 16:16:57,746 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 16:16:57,746 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 16:16:57,790 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 16:16:57,791 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 779 ms
2024-05-18 16:16:58,600 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 16:17:00,673 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 16:17:00,722 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 16:17:00,722 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail-stream://0)
2024-05-18 16:17:00,722 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 45ms (build:0ms init:0ms start:45ms)
2024-05-18 16:17:00,724 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 3.957 seconds (process running for 4.442)
2024-05-18 16:17:01,809 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:02,715 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:03,296 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:03,918 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:04,622 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:05,514 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:06,158 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:06,953 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:07,544 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:08,183 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:08,897 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:09,478 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:10,056 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:10,637 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:11,403 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:11,975 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:12,621 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:13,303 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:13,987 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:14,678 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:15,363 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:16,040 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:16,795 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:17,399 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:17,985 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:18,551 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:19,277 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:19,850 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:20,425 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:21,065 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:21,718 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:22,398 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:23,086 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:23,748 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:24,443 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:25,131 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:26,012 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:26,601 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:27,194 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:27,857 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:28,541 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:29,211 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:29,887 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:30,557 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:31,249 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:31,919 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:32,588 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:33,311 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:33,941 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:34,599 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:35,511 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:36,093 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:36,725 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:37,382 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:38,066 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:38,723 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:39,387 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:40,051 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:40,716 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:41,400 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:42,243 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:42,900 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:43,568 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:44,255 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:44,910 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:45,668 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:46,461 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:47,146 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:47,754 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:48,432 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:49,090 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:49,836 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:50,589 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:51,166 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:51,747 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:52,419 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:53,238 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:53,924 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:54,592 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:55,231 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:55,920 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:56,648 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:57,220 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:57,797 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:58,380 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:58,949 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:17:59,521 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:18:00,108 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:18:00,633 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 16:18:00,639 INFO [Camel (camel-1) thread #2 - ShutdownTask] o.a.c.i.e.DefaultShutdownStrategy [DefaultShutdownStrategy.java:689] Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 45 seconds. Inflights per route: [route1 = 1]
2024-05-18 16:18:00,908 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:18:01,652 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 16:18:01,652 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail-stream://0)
2024-05-18 16:18:01,658 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 1s25ms (uptime:1m0s)
2024-05-18 16:18:05,583 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 1744 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 16:18:05,585 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 16:18:06,416 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 16:18:06,424 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 16:18:06,424 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 16:18:06,470 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 16:18:06,470 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 853 ms
2024-05-18 16:18:07,335 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 16:18:09,172 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 16:18:09,217 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 16:18:09,217 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail-stream://0)
2024-05-18 16:18:09,217 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 42ms (build:0ms init:0ms start:42ms)
2024-05-18 16:18:09,220 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 3.841 seconds (process running for 4.349)
2024-05-18 16:18:10,307 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:18:10,895 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:18:11,495 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:18:12,243 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:18:12,911 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:18:13,610 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:18:14,293 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:18:14,934 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:18:15,595 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:18:16,263 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:18:16,945 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:18:17,608 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:18:18,493 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:18:19,062 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:18:19,686 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:18:20,468 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:18:21,143 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:18:21,816 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:18:22,494 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:18:23,154 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:18:23,826 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:18:24,510 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:18:25,154 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:18:25,832 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:18:25,935 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 16:18:25,940 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 16:18:25,940 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail-stream://0)
2024-05-18 16:18:25,943 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 6ms (uptime:16s)
2024-05-18 16:29:44,804 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 14980 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 16:29:44,807 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 16:29:45,557 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 16:29:45,566 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 16:29:45,566 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 16:29:45,610 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 16:29:45,611 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 772 ms
2024-05-18 16:29:46,415 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 16:29:48,821 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 16:29:48,856 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 16:29:48,857 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail-stream://0)
2024-05-18 16:29:48,857 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 34ms (build:0ms init:0ms start:34ms)
2024-05-18 16:29:48,859 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 4.258 seconds (process running for 4.743)
2024-05-18 16:29:49,952 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:29:50,550 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:29:51,127 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:29:51,712 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:29:52,285 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:29:52,862 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:29:53,281 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 16:29:53,289 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 16:29:53,289 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail-stream://0)
2024-05-18 16:29:53,291 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 9ms (uptime:4s)
2024-05-18 16:30:19,891 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 12136 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 16:30:19,894 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 16:30:20,685 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 16:30:20,693 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 16:30:20,694 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 16:30:20,736 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 16:30:20,737 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 805 ms
2024-05-18 16:30:21,564 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 16:30:23,717 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 16:30:23,751 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 16:30:23,751 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail-stream://0)
2024-05-18 16:30:23,751 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 32ms (build:0ms init:0ms start:32ms)
2024-05-18 16:30:23,754 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 4.092 seconds (process running for 4.579)
2024-05-18 16:30:24,846 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:30:25,424 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:30:26,151 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:30:26,741 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:30:27,311 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:30:27,824 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 16:30:27,828 INFO [Camel (camel-1) thread #2 - ShutdownTask] o.a.c.i.e.DefaultShutdownStrategy [DefaultShutdownStrategy.java:689] Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 45 seconds. Inflights per route: [route1 = 1]
2024-05-18 16:30:27,879 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:30:28,831 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 16:30:28,831 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail-stream://0)
2024-05-18 16:30:28,833 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 1s9ms (uptime:5s)
2024-05-18 16:31:04,568 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 5588 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 16:31:04,570 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 16:31:05,391 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 16:31:05,401 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 16:31:05,402 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 16:31:05,459 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 16:31:05,459 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 854 ms
2024-05-18 16:31:06,331 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 16:31:08,621 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 16:31:08,655 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 16:31:08,655 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail-stream://0)
2024-05-18 16:31:08,656 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 32ms (build:0ms init:0ms start:32ms)
2024-05-18 16:31:08,658 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 4.302 seconds (process running for 4.818)
2024-05-18 16:31:09,769 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:31:10,392 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:31:11,073 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:31:11,327 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 16:31:11,333 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 16:31:11,333 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail-stream://0)
2024-05-18 16:31:11,344 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 16ms (uptime:2s)
2024-05-18 16:32:15,564 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 13920 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 16:32:15,567 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 16:32:16,386 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 16:32:16,396 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 16:32:16,397 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 16:32:16,449 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 16:32:16,450 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 849 ms
2024-05-18 16:32:17,339 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 16:32:19,193 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 16:32:19,225 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 16:32:19,225 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail-stream://0)
2024-05-18 16:32:19,225 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 31ms (build:0ms init:0ms start:31ms)
2024-05-18 16:32:19,228 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 3.888 seconds (process running for 4.361)
2024-05-18 16:32:20,320 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:32:21,045 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:32:21,648 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:32:22,087 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 16:32:22,092 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 16:32:22,093 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail-stream://0)
2024-05-18 16:32:22,095 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 8ms (uptime:2s)
2024-05-18 16:40:02,375 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 6652 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 16:40:02,378 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 16:40:03,192 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 16:40:03,201 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 16:40:03,201 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 16:40:03,247 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 16:40:03,248 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 825 ms
2024-05-18 16:40:04,013 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 16:40:06,154 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 16:40:06,188 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 16:40:06,188 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail-stream://0)
2024-05-18 16:40:06,188 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 32ms (build:0ms init:0ms start:32ms)
2024-05-18 16:40:06,190 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 4.057 seconds (process running for 4.569)
2024-05-18 16:40:07,423 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:40:08,001 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:40:08,580 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:40:09,155 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:40:09,718 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:40:10,226 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 16:40:10,231 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 16:40:10,231 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail-stream://0)
2024-05-18 16:40:10,233 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 5ms (uptime:4s)
2024-05-18 16:41:56,766 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 26060 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 16:41:56,769 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 16:41:57,558 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 16:41:57,566 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 16:41:57,567 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 16:41:57,613 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 16:41:57,613 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 805 ms
2024-05-18 16:41:58,421 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 16:42:00,321 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 16:42:00,360 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 16:42:00,360 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail-stream://me)
2024-05-18 16:42:00,360 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 38ms (build:0ms init:0ms start:38ms)
2024-05-18 16:42:00,362 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 3.822 seconds (process running for 4.311)
2024-05-18 16:42:01,445 WARN [Camel (camel-1) thread #1 - google-mail-stream://me] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://me?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:42:02,011 WARN [Camel (camel-1) thread #1 - google-mail-stream://me] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://me?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:42:02,590 WARN [Camel (camel-1) thread #1 - google-mail-stream://me] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://me?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:42:03,160 WARN [Camel (camel-1) thread #1 - google-mail-stream://me] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://me?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:42:03,736 WARN [Camel (camel-1) thread #1 - google-mail-stream://me] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://me?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:42:03,917 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 16:42:03,922 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 16:42:03,922 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail-stream://me)
2024-05-18 16:42:03,924 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 6ms (uptime:3s)
2024-05-18 16:42:25,391 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 3212 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 16:42:25,393 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 16:42:26,179 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 16:42:26,193 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 16:42:26,193 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 16:42:26,236 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 16:42:26,236 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 806 ms
2024-05-18 16:42:27,023 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 16:42:29,059 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 16:42:29,095 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 16:42:29,095 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail-stream://me)
2024-05-18 16:42:29,095 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 35ms (build:0ms init:0ms start:35ms)
2024-05-18 16:42:29,097 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 3.924 seconds (process running for 4.403)
2024-05-18 16:42:30,195 WARN [Camel (camel-1) thread #1 - google-mail-stream://me] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://me?markAsRead=true&scopes=https://www.googleapis.com/auth/gmail.readonly. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:42:30,786 WARN [Camel (camel-1) thread #1 - google-mail-stream://me] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://me?markAsRead=true&scopes=https://www.googleapis.com/auth/gmail.readonly. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:42:31,374 WARN [Camel (camel-1) thread #1 - google-mail-stream://me] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://me?markAsRead=true&scopes=https://www.googleapis.com/auth/gmail.readonly. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:42:31,950 WARN [Camel (camel-1) thread #1 - google-mail-stream://me] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://me?markAsRead=true&scopes=https://www.googleapis.com/auth/gmail.readonly. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:42:32,527 WARN [Camel (camel-1) thread #1 - google-mail-stream://me] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://me?markAsRead=true&scopes=https://www.googleapis.com/auth/gmail.readonly. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:42:32,579 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 16:42:32,586 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 16:42:32,586 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail-stream://me)
2024-05-18 16:42:32,588 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 8ms (uptime:3s)
2024-05-18 16:47:01,274 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 12740 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 16:47:01,276 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 16:47:02,149 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 16:47:02,157 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 16:47:02,158 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 16:47:02,207 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 16:47:02,208 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 894 ms
2024-05-18 16:47:03,087 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 16:47:05,090 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 16:47:05,123 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 16:47:05,124 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail-stream://0)
2024-05-18 16:47:05,124 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 32ms (build:0ms init:0ms start:32ms)
2024-05-18 16:47:05,126 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 4.086 seconds (process running for 4.587)
2024-05-18 16:47:06,364 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:47:06,958 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:47:07,530 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:47:08,107 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:47:08,674 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:47:09,256 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:47:09,544 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 16:47:09,549 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 16:47:09,549 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail-stream://0)
2024-05-18 16:47:09,551 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 7ms (uptime:4s)
2024-05-18 16:57:59,632 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 13516 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 16:57:59,634 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 16:58:00,502 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 16:58:00,514 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 16:58:00,514 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 16:58:00,576 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 16:58:00,576 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 907 ms
2024-05-18 16:58:01,471 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 16:58:03,495 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 16:58:03,532 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 16:58:03,532 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail-stream://0)
2024-05-18 16:58:03,532 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 34ms (build:0ms init:0ms start:34ms)
2024-05-18 16:58:03,534 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 4.133 seconds (process running for 4.62)
2024-05-18 16:58:04,624 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:58:05,196 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:58:05,937 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 16:58:06,180 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 16:58:06,186 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 16:58:06,187 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail-stream://0)
2024-05-18 16:58:06,194 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 14ms (uptime:2s)
2024-05-18 17:00:20,449 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 4692 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 17:00:20,452 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 17:00:21,254 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 17:00:21,264 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 17:00:21,264 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 17:00:21,310 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 17:00:21,311 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 826 ms
2024-05-18 17:00:22,133 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 17:00:24,071 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 17:00:24,107 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 17:00:24,107 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail-stream://0)
2024-05-18 17:00:24,107 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 35ms (build:0ms init:0ms start:35ms)
2024-05-18 17:00:24,110 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 3.889 seconds (process running for 4.387)
2024-05-18 17:00:25,318 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://www.googleapis.com/auth/gmail.readonly. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 17:00:25,886 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://www.googleapis.com/auth/gmail.readonly. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 17:00:26,463 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://www.googleapis.com/auth/gmail.readonly. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 17:00:27,105 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://www.googleapis.com/auth/gmail.readonly. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 17:00:27,681 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://www.googleapis.com/auth/gmail.readonly. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 17:00:28,262 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://www.googleapis.com/auth/gmail.readonly. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 17:00:28,370 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 17:00:28,376 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 17:00:28,377 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail-stream://0)
2024-05-18 17:00:28,380 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 10ms (uptime:4s)
2024-05-18 17:10:07,158 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 19444 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 17:10:07,160 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 17:10:08,027 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 17:10:08,037 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 17:10:08,037 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 17:10:08,081 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 17:10:08,081 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 886 ms
2024-05-18 17:10:08,904 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 17:10:10,724 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 17:10:10,757 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 17:10:10,757 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail-stream://aw2g52024@gmail.com)
2024-05-18 17:10:10,757 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 32ms (build:0ms init:0ms start:32ms)
2024-05-18 17:10:10,759 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 3.832 seconds (process running for 4.337)
2024-05-18 17:10:11,855 WARN [Camel (camel-1) thread #1 - google-mail-stream://aw2g52024@gmail.com] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://aw2g52024@gmail.com?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 17:10:12,615 WARN [Camel (camel-1) thread #1 - google-mail-stream://aw2g52024@gmail.com] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://aw2g52024@gmail.com?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 17:10:13,187 WARN [Camel (camel-1) thread #1 - google-mail-stream://aw2g52024@gmail.com] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://aw2g52024@gmail.com?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 17:10:13,758 WARN [Camel (camel-1) thread #1 - google-mail-stream://aw2g52024@gmail.com] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://aw2g52024@gmail.com?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 17:10:14,014 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 17:10:14,021 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 17:10:14,021 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail-stream://aw2g52024@gmail.com)
2024-05-18 17:10:14,027 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 12ms (uptime:3s)
2024-05-18 17:14:02,995 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 24056 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 17:14:02,997 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 17:14:03,781 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 17:14:03,789 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 17:14:03,790 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 17:14:03,830 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 17:14:03,831 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 801 ms
2024-05-18 17:14:04,650 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 17:14:06,648 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 17:14:06,680 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 17:14:06,680 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail-stream://0)
2024-05-18 17:14:06,681 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 31ms (build:0ms init:0ms start:31ms)
2024-05-18 17:14:06,683 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 3.897 seconds (process running for 4.369)
2024-05-18 17:14:07,757 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 17:14:08,447 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 17:14:09,172 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 17:14:09,768 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 17:14:10,071 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 17:14:10,079 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 17:14:10,080 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail-stream://0)
2024-05-18 17:14:10,088 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 17ms (uptime:3s)
2024-05-18 18:19:43,616 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 17476 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 18:19:43,619 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 18:19:44,700 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 18:19:44,708 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 18:19:44,709 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 18:19:44,756 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 18:19:44,757 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 1106 ms
2024-05-18 18:19:45,649 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 18:19:47,495 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 18:19:47,534 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 18:19:47,535 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail-stream://0)
2024-05-18 18:19:47,535 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 39ms (build:0ms init:0ms start:39ms)
2024-05-18 18:19:47,537 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 4.198 seconds (process running for 4.691)
2024-05-18 18:19:48,626 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?query=is:read&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:read
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:read
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 18:19:49,395 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?query=is:read&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:read
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:read
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 18:19:49,962 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?query=is:read&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:read
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:read
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 18:19:50,527 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?query=is:read&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:read
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:read
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 18:19:50,845 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 18:19:50,849 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 18:19:50,851 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail-stream://0)
2024-05-18 18:19:50,854 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 9ms (uptime:3s)
2024-05-18 18:20:39,872 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 21112 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 18:20:39,876 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 18:20:40,681 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 18:20:40,689 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 18:20:40,689 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 18:20:40,739 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 18:20:40,739 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 828 ms
2024-05-18 18:20:41,579 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 18:20:41,655 WARN [main] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext [AbstractApplicationContext.java:632] Exception encountered during context initialization - cancelling refresh attempt: org.apache.camel.FailedToCreateRouteException: Failed to create route route1: Route(route1)[From[google-mail-stream://query?is:read&scopes... because of Failed to resolve endpoint: google-mail-stream://query?is:read&scopes=https://mail.google.com due to: Failed to resolve endpoint: google-mail-stream://query?is:read&scopes=https://mail.google.com due to: There are 1 parameters that couldn't be set on the endpoint. Check the uri if the parameters are spelt correctly and that they are properties of the endpoint. Unknown parameters=[{is:read=}]
2024-05-18 18:20:41,660 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Stopping service [Tomcat]
2024-05-18 18:20:41,666 INFO [main] o.s.b.a.l.ConditionEvaluationReportLogger [ConditionEvaluationReportLogger.java:82] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-05-18 18:20:41,677 ERROR [main] o.s.b.SpringApplication [SpringApplication.java:851] Application run failed
org.apache.camel.FailedToCreateRouteException: Failed to create route route1: Route(route1)[From[google-mail-stream://query?is:read&scopes... because of Failed to resolve endpoint: google-mail-stream://query?is:read&scopes=https://mail.google.com due to: Failed to resolve endpoint: google-mail-stream://query?is:read&scopes=https://mail.google.com due to: There are 1 parameters that couldn't be set on the endpoint. Check the uri if the parameters are spelt correctly and that they are properties of the endpoint. Unknown parameters=[{is:read=}]
	at org.apache.camel.reifier.RouteReifier.createRoute(RouteReifier.java:85)
	at org.apache.camel.impl.DefaultModelReifierFactory.createRoute(DefaultModelReifierFactory.java:49)
	at org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:728)
	at org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:594)
	at org.apache.camel.impl.engine.AbstractCamelContext.doInit(AbstractCamelContext.java:2391)
	at org.apache.camel.support.service.BaseService.init(BaseService.java:78)
	at org.apache.camel.impl.engine.AbstractCamelContext.init(AbstractCamelContext.java:2027)
	at org.apache.camel.support.service.BaseService.start(BaseService.java:105)
	at org.apache.camel.impl.engine.AbstractCamelContext.start(AbstractCamelContext.java:2046)
	at org.apache.camel.impl.DefaultCamelContext.start(DefaultCamelContext.java:212)
	at org.apache.camel.spring.SpringCamelContext.start(SpringCamelContext.java:119)
	at org.apache.camel.spring.SpringCamelContext.onApplicationEvent(SpringCamelContext.java:151)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:451)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:384)
	at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:984)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at it.polito.communicationmanager.CommunicationManagerApplicationKt.main(CommunicationManagerApplication.kt:13)
Caused by: org.apache.camel.ResolveEndpointFailedException: Failed to resolve endpoint: google-mail-stream://query?is:read&scopes=https://mail.google.com due to: Failed to resolve endpoint: google-mail-stream://query?is:read&scopes=https://mail.google.com due to: There are 1 parameters that couldn't be set on the endpoint. Check the uri if the parameters are spelt correctly and that they are properties of the endpoint. Unknown parameters=[{is:read=}]
	at org.apache.camel.impl.engine.AbstractCamelContext.doGetEndpoint(AbstractCamelContext.java:831)
	at org.apache.camel.impl.engine.AbstractCamelContext.getEndpoint(AbstractCamelContext.java:731)
	at org.apache.camel.support.CamelContextHelper.getMandatoryEndpoint(CamelContextHelper.java:66)
	at org.apache.camel.reifier.AbstractReifier.resolveEndpoint(AbstractReifier.java:195)
	at org.apache.camel.reifier.RouteReifier.doCreateRoute(RouteReifier.java:99)
	at org.apache.camel.reifier.RouteReifier.createRoute(RouteReifier.java:79)
	... 25 common frames omitted
Caused by: org.apache.camel.ResolveEndpointFailedException: Failed to resolve endpoint: google-mail-stream://query?is:read&scopes=https://mail.google.com due to: There are 1 parameters that couldn't be set on the endpoint. Check the uri if the parameters are spelt correctly and that they are properties of the endpoint. Unknown parameters=[{is:read=}]
	at org.apache.camel.support.DefaultComponent.validateParameters(DefaultComponent.java:302)
	at org.apache.camel.support.DefaultComponent.createEndpoint(DefaultComponent.java:191)
	at org.apache.camel.impl.engine.AbstractCamelContext.doGetEndpoint(AbstractCamelContext.java:797)
	... 30 common frames omitted
2024-05-18 18:44:48,122 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 1352 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 18:44:48,125 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 18:44:48,981 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 18:44:48,992 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 18:44:48,992 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 18:44:49,082 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 18:44:49,082 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 921 ms
2024-05-18 18:44:49,999 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 18:44:51,954 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 18:44:51,995 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 18:44:51,995 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail-stream://0)
2024-05-18 18:44:51,995 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 40ms (build:0ms init:0ms start:40ms)
2024-05-18 18:44:51,997 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 4.094 seconds (process running for 4.581)
2024-05-18 18:44:53,140 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 18:44:53,798 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 18:44:54,471 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 18:44:55,152 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 18:44:55,476 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 18:44:55,480 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 18:44:55,481 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail-stream://0)
2024-05-18 18:44:55,489 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 13ms (uptime:3s)
2024-05-18 18:46:17,136 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 25724 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 18:46:17,138 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 18:46:17,927 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 18:46:17,936 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 18:46:17,936 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 18:46:17,982 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 18:46:17,983 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 813 ms
2024-05-18 18:46:18,883 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 18:46:19,077 WARN [main] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext [AbstractApplicationContext.java:632] Exception encountered during context initialization - cancelling refresh attempt: org.apache.camel.FailedToStartRouteException: Failed to start route route1 because of Missing properties for messages/get, need one or more from [id]
2024-05-18 18:46:19,083 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Stopping service [Tomcat]
2024-05-18 18:46:19,088 INFO [main] o.s.b.a.l.ConditionEvaluationReportLogger [ConditionEvaluationReportLogger.java:82] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-05-18 18:46:19,102 ERROR [main] o.s.b.SpringApplication [SpringApplication.java:851] Application run failed
org.apache.camel.FailedToStartRouteException: Failed to start route route1 because of Missing properties for messages/get, need one or more from [id]
	at org.apache.camel.impl.engine.RouteService.setUp(RouteService.java:131)
	at org.apache.camel.impl.engine.InternalRouteStartupManager.doInitRoutes(InternalRouteStartupManager.java:89)
	at org.apache.camel.impl.engine.AbstractCamelContext.doInit(AbstractCamelContext.java:2393)
	at org.apache.camel.support.service.BaseService.init(BaseService.java:78)
	at org.apache.camel.impl.engine.AbstractCamelContext.init(AbstractCamelContext.java:2027)
	at org.apache.camel.support.service.BaseService.start(BaseService.java:105)
	at org.apache.camel.impl.engine.AbstractCamelContext.start(AbstractCamelContext.java:2046)
	at org.apache.camel.impl.DefaultCamelContext.start(DefaultCamelContext.java:212)
	at org.apache.camel.spring.SpringCamelContext.start(SpringCamelContext.java:119)
	at org.apache.camel.spring.SpringCamelContext.onApplicationEvent(SpringCamelContext.java:151)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:451)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:384)
	at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:984)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at it.polito.communicationmanager.CommunicationManagerApplicationKt.main(CommunicationManagerApplication.kt:13)
Caused by: java.lang.IllegalArgumentException: Missing properties for messages/get, need one or more from [id]
	at org.apache.camel.support.component.ApiConsumerHelper.findMethod(ApiConsumerHelper.java:64)
	at org.apache.camel.support.component.AbstractApiConsumer.<init>(AbstractApiConsumer.java:48)
	at org.apache.camel.component.google.mail.GoogleMailConsumer.<init>(GoogleMailConsumer.java:36)
	at org.apache.camel.component.google.mail.GoogleMailEndpoint.createConsumer(GoogleMailEndpoint.java:71)
	at org.apache.camel.impl.engine.DefaultRoute.gatherRootServices(DefaultRoute.java:655)
	at org.apache.camel.impl.engine.DefaultRoute.gatherServices(DefaultRoute.java:639)
	at org.apache.camel.impl.engine.DefaultRoute.initializeServices(DefaultRoute.java:224)
	at org.apache.camel.impl.engine.RouteService.doSetup(RouteService.java:150)
	at org.apache.camel.impl.engine.RouteService.setUp(RouteService.java:129)
	... 23 common frames omitted
2024-05-18 18:56:28,402 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 1740 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 18:56:28,404 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 18:56:29,248 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 18:56:29,259 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 18:56:29,260 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 18:56:29,307 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 18:56:29,307 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 866 ms
2024-05-18 18:56:30,172 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 18:56:32,722 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 18:56:32,773 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 18:56:32,773 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail-stream://0)
2024-05-18 18:56:32,773 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 49ms (build:0ms init:0ms start:49ms)
2024-05-18 18:56:32,778 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 4.611 seconds (process running for 5.135)
2024-05-18 18:56:33,968 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 18:56:34,568 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 18:56:35,268 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 18:56:35,823 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 18:56:35,835 INFO [Camel (camel-1) thread #2 - ShutdownTask] o.a.c.i.e.DefaultShutdownStrategy [DefaultShutdownStrategy.java:689] Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 45 seconds. Inflights per route: [route1 = 1]
2024-05-18 18:56:36,031 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 18:56:36,843 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 18:56:36,844 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail-stream://0)
2024-05-18 18:56:36,846 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 1s23ms (uptime:4s)
2024-05-18 18:57:40,597 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 11560 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 18:57:40,601 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 18:57:41,448 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 18:57:41,456 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 18:57:41,459 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 18:57:41,503 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 18:57:41,504 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 868 ms
2024-05-18 18:57:42,338 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 18:57:44,524 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 18:57:44,566 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 18:57:44,566 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail-stream://0)
2024-05-18 18:57:44,566 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 40ms (build:0ms init:0ms start:40ms)
2024-05-18 18:57:44,569 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 4.201 seconds (process running for 4.721)
2024-05-18 18:57:45,707 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 18:57:46,501 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 18:57:47,187 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 18:57:47,748 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 18:57:47,757 INFO [Camel (camel-1) thread #2 - ShutdownTask] o.a.c.i.e.DefaultShutdownStrategy [DefaultShutdownStrategy.java:689] Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 45 seconds. Inflights per route: [route1 = 1]
2024-05-18 18:57:47,850 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 18:57:48,763 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 18:57:48,763 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail-stream://0)
2024-05-18 18:57:48,766 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 1s17ms (uptime:4s)
2024-05-18 19:00:01,702 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 7636 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 19:00:01,705 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 19:00:02,593 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 19:00:02,602 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 19:00:02,603 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 19:00:02,658 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 19:00:02,659 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 914 ms
2024-05-18 19:00:03,486 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 19:00:03,571 WARN [main] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext [AbstractApplicationContext.java:632] Exception encountered during context initialization - cancelling refresh attempt: org.apache.camel.FailedToCreateRouteException: Failed to create route route1: Route(route1)[From[google-mail-stream:0?markAsRead=true&q=is... because of Failed to resolve endpoint: google-mail-stream://0?markAsRead=true&q=is:read&scopes=https://mail.google.com due to: Failed to resolve endpoint: google-mail-stream://0?markAsRead=true&q=is:read&scopes=https://mail.google.com due to: There are 1 parameters that couldn't be set on the endpoint. Check the uri if the parameters are spelt correctly and that they are properties of the endpoint. Unknown parameters=[{q=is:read}]
2024-05-18 19:00:03,579 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Stopping service [Tomcat]
2024-05-18 19:00:03,584 INFO [main] o.s.b.a.l.ConditionEvaluationReportLogger [ConditionEvaluationReportLogger.java:82] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-05-18 19:00:03,597 ERROR [main] o.s.b.SpringApplication [SpringApplication.java:851] Application run failed
org.apache.camel.FailedToCreateRouteException: Failed to create route route1: Route(route1)[From[google-mail-stream:0?markAsRead=true&q=is... because of Failed to resolve endpoint: google-mail-stream://0?markAsRead=true&q=is:read&scopes=https://mail.google.com due to: Failed to resolve endpoint: google-mail-stream://0?markAsRead=true&q=is:read&scopes=https://mail.google.com due to: There are 1 parameters that couldn't be set on the endpoint. Check the uri if the parameters are spelt correctly and that they are properties of the endpoint. Unknown parameters=[{q=is:read}]
	at org.apache.camel.reifier.RouteReifier.createRoute(RouteReifier.java:85)
	at org.apache.camel.impl.DefaultModelReifierFactory.createRoute(DefaultModelReifierFactory.java:49)
	at org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:728)
	at org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:594)
	at org.apache.camel.impl.engine.AbstractCamelContext.doInit(AbstractCamelContext.java:2391)
	at org.apache.camel.support.service.BaseService.init(BaseService.java:78)
	at org.apache.camel.impl.engine.AbstractCamelContext.init(AbstractCamelContext.java:2027)
	at org.apache.camel.support.service.BaseService.start(BaseService.java:105)
	at org.apache.camel.impl.engine.AbstractCamelContext.start(AbstractCamelContext.java:2046)
	at org.apache.camel.impl.DefaultCamelContext.start(DefaultCamelContext.java:212)
	at org.apache.camel.spring.SpringCamelContext.start(SpringCamelContext.java:119)
	at org.apache.camel.spring.SpringCamelContext.onApplicationEvent(SpringCamelContext.java:151)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:451)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:384)
	at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:984)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at it.polito.communicationmanager.CommunicationManagerApplicationKt.main(CommunicationManagerApplication.kt:13)
Caused by: org.apache.camel.ResolveEndpointFailedException: Failed to resolve endpoint: google-mail-stream://0?markAsRead=true&q=is:read&scopes=https://mail.google.com due to: Failed to resolve endpoint: google-mail-stream://0?markAsRead=true&q=is:read&scopes=https://mail.google.com due to: There are 1 parameters that couldn't be set on the endpoint. Check the uri if the parameters are spelt correctly and that they are properties of the endpoint. Unknown parameters=[{q=is:read}]
	at org.apache.camel.impl.engine.AbstractCamelContext.doGetEndpoint(AbstractCamelContext.java:831)
	at org.apache.camel.impl.engine.AbstractCamelContext.getEndpoint(AbstractCamelContext.java:731)
	at org.apache.camel.support.CamelContextHelper.getMandatoryEndpoint(CamelContextHelper.java:66)
	at org.apache.camel.reifier.AbstractReifier.resolveEndpoint(AbstractReifier.java:195)
	at org.apache.camel.reifier.RouteReifier.doCreateRoute(RouteReifier.java:99)
	at org.apache.camel.reifier.RouteReifier.createRoute(RouteReifier.java:79)
	... 25 common frames omitted
Caused by: org.apache.camel.ResolveEndpointFailedException: Failed to resolve endpoint: google-mail-stream://0?markAsRead=true&q=is:read&scopes=https://mail.google.com due to: There are 1 parameters that couldn't be set on the endpoint. Check the uri if the parameters are spelt correctly and that they are properties of the endpoint. Unknown parameters=[{q=is:read}]
	at org.apache.camel.support.DefaultComponent.validateParameters(DefaultComponent.java:302)
	at org.apache.camel.support.DefaultComponent.createEndpoint(DefaultComponent.java:191)
	at org.apache.camel.impl.engine.AbstractCamelContext.doGetEndpoint(AbstractCamelContext.java:797)
	... 30 common frames omitted
2024-05-18 19:00:25,436 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 14308 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 19:00:25,439 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 19:00:26,221 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 19:00:26,230 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 19:00:26,230 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 19:00:26,273 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 19:00:26,274 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 798 ms
2024-05-18 19:00:27,070 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 19:00:29,400 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 19:00:29,438 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 19:00:29,438 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail-stream://0)
2024-05-18 19:00:29,439 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 36ms (build:0ms init:0ms start:36ms)
2024-05-18 19:00:29,440 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 4.233 seconds (process running for 4.725)
2024-05-18 19:00:30,548 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:00:31,123 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:00:31,691 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 19:00:31,696 INFO [Camel (camel-1) thread #2 - ShutdownTask] o.a.c.i.e.DefaultShutdownStrategy [DefaultShutdownStrategy.java:689] Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 45 seconds. Inflights per route: [route1 = 1]
2024-05-18 19:00:31,702 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope does not support 'q' parameter",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope does not support 'q' parameter",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:00:32,698 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 19:00:32,699 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail-stream://0)
2024-05-18 19:00:32,701 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 1s10ms (uptime:3s)
2024-05-18 19:01:19,228 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 13848 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 19:01:19,231 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 19:01:20,559 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 19:01:20,574 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 19:01:20,575 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 19:01:20,658 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 19:01:20,659 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 1392 ms
2024-05-18 19:01:21,756 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 19:01:21,834 WARN [main] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext [AbstractApplicationContext.java:632] Exception encountered during context initialization - cancelling refresh attempt: org.apache.camel.FailedToCreateRouteException: Failed to create route route1: Route(route1)[From[google-mail:messages/list?markAsRead=true... because of Failed to resolve endpoint: google-mail://messages/list?markAsRead=true&scopes=https://mail.google.com due to: Failed to resolve endpoint: google-mail://messages/list?markAsRead=true&scopes=https://mail.google.com due to: There are 1 parameters that couldn't be set on the endpoint. Check the uri if the parameters are spelt correctly and that they are properties of the endpoint. Unknown parameters=[{markAsRead=true}]
2024-05-18 19:01:21,840 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Stopping service [Tomcat]
2024-05-18 19:01:21,846 INFO [main] o.s.b.a.l.ConditionEvaluationReportLogger [ConditionEvaluationReportLogger.java:82] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-05-18 19:01:21,859 ERROR [main] o.s.b.SpringApplication [SpringApplication.java:851] Application run failed
org.apache.camel.FailedToCreateRouteException: Failed to create route route1: Route(route1)[From[google-mail:messages/list?markAsRead=true... because of Failed to resolve endpoint: google-mail://messages/list?markAsRead=true&scopes=https://mail.google.com due to: Failed to resolve endpoint: google-mail://messages/list?markAsRead=true&scopes=https://mail.google.com due to: There are 1 parameters that couldn't be set on the endpoint. Check the uri if the parameters are spelt correctly and that they are properties of the endpoint. Unknown parameters=[{markAsRead=true}]
	at org.apache.camel.reifier.RouteReifier.createRoute(RouteReifier.java:85)
	at org.apache.camel.impl.DefaultModelReifierFactory.createRoute(DefaultModelReifierFactory.java:49)
	at org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:728)
	at org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:594)
	at org.apache.camel.impl.engine.AbstractCamelContext.doInit(AbstractCamelContext.java:2391)
	at org.apache.camel.support.service.BaseService.init(BaseService.java:78)
	at org.apache.camel.impl.engine.AbstractCamelContext.init(AbstractCamelContext.java:2027)
	at org.apache.camel.support.service.BaseService.start(BaseService.java:105)
	at org.apache.camel.impl.engine.AbstractCamelContext.start(AbstractCamelContext.java:2046)
	at org.apache.camel.impl.DefaultCamelContext.start(DefaultCamelContext.java:212)
	at org.apache.camel.spring.SpringCamelContext.start(SpringCamelContext.java:119)
	at org.apache.camel.spring.SpringCamelContext.onApplicationEvent(SpringCamelContext.java:151)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:451)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:384)
	at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:984)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at it.polito.communicationmanager.CommunicationManagerApplicationKt.main(CommunicationManagerApplication.kt:13)
Caused by: org.apache.camel.ResolveEndpointFailedException: Failed to resolve endpoint: google-mail://messages/list?markAsRead=true&scopes=https://mail.google.com due to: Failed to resolve endpoint: google-mail://messages/list?markAsRead=true&scopes=https://mail.google.com due to: There are 1 parameters that couldn't be set on the endpoint. Check the uri if the parameters are spelt correctly and that they are properties of the endpoint. Unknown parameters=[{markAsRead=true}]
	at org.apache.camel.impl.engine.AbstractCamelContext.doGetEndpoint(AbstractCamelContext.java:831)
	at org.apache.camel.impl.engine.AbstractCamelContext.getEndpoint(AbstractCamelContext.java:731)
	at org.apache.camel.support.CamelContextHelper.getMandatoryEndpoint(CamelContextHelper.java:66)
	at org.apache.camel.reifier.AbstractReifier.resolveEndpoint(AbstractReifier.java:195)
	at org.apache.camel.reifier.RouteReifier.doCreateRoute(RouteReifier.java:99)
	at org.apache.camel.reifier.RouteReifier.createRoute(RouteReifier.java:79)
	... 25 common frames omitted
Caused by: org.apache.camel.ResolveEndpointFailedException: Failed to resolve endpoint: google-mail://messages/list?markAsRead=true&scopes=https://mail.google.com due to: There are 1 parameters that couldn't be set on the endpoint. Check the uri if the parameters are spelt correctly and that they are properties of the endpoint. Unknown parameters=[{markAsRead=true}]
	at org.apache.camel.support.DefaultComponent.validateParameters(DefaultComponent.java:302)
	at org.apache.camel.support.DefaultComponent.createEndpoint(DefaultComponent.java:191)
	at org.apache.camel.impl.engine.AbstractCamelContext.doGetEndpoint(AbstractCamelContext.java:797)
	... 30 common frames omitted
2024-05-18 19:01:36,897 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 17780 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 19:01:36,900 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 19:01:37,678 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 19:01:37,687 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 19:01:37,687 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 19:01:37,732 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 19:01:37,733 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 799 ms
2024-05-18 19:01:38,527 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 19:01:38,594 WARN [main] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext [AbstractApplicationContext.java:632] Exception encountered during context initialization - cancelling refresh attempt: org.apache.camel.FailedToCreateRouteException: Failed to create route route1: Route(route1)[From[google-mail:messages/list?userId=xxxxxx because of Failed to resolve endpoint: google-mail://messages/list?markAsRead=true&scopes=https%3A%2F%2Fmail.google.com&userId=xxxxxx due to: Failed to resolve endpoint: google-mail://messages/list?markAsRead=true&scopes=https%3A%2F%2Fmail.google.com&userId=xxxxxx due to: There are 1 parameters that couldn't be set on the endpoint. Check the uri if the parameters are spelt correctly and that they are properties of the endpoint. Unknown parameters=[{markAsRead=true}]
2024-05-18 19:01:38,600 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Stopping service [Tomcat]
2024-05-18 19:01:38,605 INFO [main] o.s.b.a.l.ConditionEvaluationReportLogger [ConditionEvaluationReportLogger.java:82] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-05-18 19:01:38,616 ERROR [main] o.s.b.SpringApplication [SpringApplication.java:851] Application run failed
org.apache.camel.FailedToCreateRouteException: Failed to create route route1: Route(route1)[From[google-mail:messages/list?userId=xxxxxx because of Failed to resolve endpoint: google-mail://messages/list?markAsRead=true&scopes=https%3A%2F%2Fmail.google.com&userId=xxxxxx due to: Failed to resolve endpoint: google-mail://messages/list?markAsRead=true&scopes=https%3A%2F%2Fmail.google.com&userId=xxxxxx due to: There are 1 parameters that couldn't be set on the endpoint. Check the uri if the parameters are spelt correctly and that they are properties of the endpoint. Unknown parameters=[{markAsRead=true}]
	at org.apache.camel.reifier.RouteReifier.createRoute(RouteReifier.java:85)
	at org.apache.camel.impl.DefaultModelReifierFactory.createRoute(DefaultModelReifierFactory.java:49)
	at org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:728)
	at org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:594)
	at org.apache.camel.impl.engine.AbstractCamelContext.doInit(AbstractCamelContext.java:2391)
	at org.apache.camel.support.service.BaseService.init(BaseService.java:78)
	at org.apache.camel.impl.engine.AbstractCamelContext.init(AbstractCamelContext.java:2027)
	at org.apache.camel.support.service.BaseService.start(BaseService.java:105)
	at org.apache.camel.impl.engine.AbstractCamelContext.start(AbstractCamelContext.java:2046)
	at org.apache.camel.impl.DefaultCamelContext.start(DefaultCamelContext.java:212)
	at org.apache.camel.spring.SpringCamelContext.start(SpringCamelContext.java:119)
	at org.apache.camel.spring.SpringCamelContext.onApplicationEvent(SpringCamelContext.java:151)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:451)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:384)
	at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:984)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at it.polito.communicationmanager.CommunicationManagerApplicationKt.main(CommunicationManagerApplication.kt:13)
Caused by: org.apache.camel.ResolveEndpointFailedException: Failed to resolve endpoint: google-mail://messages/list?markAsRead=true&scopes=https%3A%2F%2Fmail.google.com&userId=xxxxxx due to: Failed to resolve endpoint: google-mail://messages/list?markAsRead=true&scopes=https%3A%2F%2Fmail.google.com&userId=xxxxxx due to: There are 1 parameters that couldn't be set on the endpoint. Check the uri if the parameters are spelt correctly and that they are properties of the endpoint. Unknown parameters=[{markAsRead=true}]
	at org.apache.camel.impl.engine.AbstractCamelContext.doGetEndpoint(AbstractCamelContext.java:831)
	at org.apache.camel.impl.engine.AbstractCamelContext.getEndpoint(AbstractCamelContext.java:731)
	at org.apache.camel.support.CamelContextHelper.getMandatoryEndpoint(CamelContextHelper.java:66)
	at org.apache.camel.reifier.AbstractReifier.resolveEndpoint(AbstractReifier.java:195)
	at org.apache.camel.reifier.RouteReifier.doCreateRoute(RouteReifier.java:99)
	at org.apache.camel.reifier.RouteReifier.createRoute(RouteReifier.java:79)
	... 25 common frames omitted
Caused by: org.apache.camel.ResolveEndpointFailedException: Failed to resolve endpoint: google-mail://messages/list?markAsRead=true&scopes=https%3A%2F%2Fmail.google.com&userId=xxxxxx due to: There are 1 parameters that couldn't be set on the endpoint. Check the uri if the parameters are spelt correctly and that they are properties of the endpoint. Unknown parameters=[{markAsRead=true}]
	at org.apache.camel.support.DefaultComponent.validateParameters(DefaultComponent.java:302)
	at org.apache.camel.support.DefaultComponent.createEndpoint(DefaultComponent.java:191)
	at org.apache.camel.impl.engine.AbstractCamelContext.doGetEndpoint(AbstractCamelContext.java:797)
	... 30 common frames omitted
2024-05-18 19:01:55,028 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 11992 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 19:01:55,029 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 19:01:56,094 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 19:01:56,101 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 19:01:56,102 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 19:01:56,153 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 19:01:56,153 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 1087 ms
2024-05-18 19:01:57,155 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 19:01:57,258 WARN [main] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext [AbstractApplicationContext.java:632] Exception encountered during context initialization - cancelling refresh attempt: org.apache.camel.FailedToCreateRouteException: Failed to create route route1: Route(route1)[From[google-mail://messages/list?userId=xxxxxx because of Failed to resolve endpoint: google-mail://messages/list?markAsRead=true&scopes=https%3A%2F%2Fmail.google.com&userId=xxxxxx due to: Failed to resolve endpoint: google-mail://messages/list?markAsRead=true&scopes=https%3A%2F%2Fmail.google.com&userId=xxxxxx due to: There are 1 parameters that couldn't be set on the endpoint. Check the uri if the parameters are spelt correctly and that they are properties of the endpoint. Unknown parameters=[{markAsRead=true}]
2024-05-18 19:01:57,265 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Stopping service [Tomcat]
2024-05-18 19:01:57,270 INFO [main] o.s.b.a.l.ConditionEvaluationReportLogger [ConditionEvaluationReportLogger.java:82] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-05-18 19:01:57,286 ERROR [main] o.s.b.SpringApplication [SpringApplication.java:851] Application run failed
org.apache.camel.FailedToCreateRouteException: Failed to create route route1: Route(route1)[From[google-mail://messages/list?userId=xxxxxx because of Failed to resolve endpoint: google-mail://messages/list?markAsRead=true&scopes=https%3A%2F%2Fmail.google.com&userId=xxxxxx due to: Failed to resolve endpoint: google-mail://messages/list?markAsRead=true&scopes=https%3A%2F%2Fmail.google.com&userId=xxxxxx due to: There are 1 parameters that couldn't be set on the endpoint. Check the uri if the parameters are spelt correctly and that they are properties of the endpoint. Unknown parameters=[{markAsRead=true}]
	at org.apache.camel.reifier.RouteReifier.createRoute(RouteReifier.java:85)
	at org.apache.camel.impl.DefaultModelReifierFactory.createRoute(DefaultModelReifierFactory.java:49)
	at org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:728)
	at org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:594)
	at org.apache.camel.impl.engine.AbstractCamelContext.doInit(AbstractCamelContext.java:2391)
	at org.apache.camel.support.service.BaseService.init(BaseService.java:78)
	at org.apache.camel.impl.engine.AbstractCamelContext.init(AbstractCamelContext.java:2027)
	at org.apache.camel.support.service.BaseService.start(BaseService.java:105)
	at org.apache.camel.impl.engine.AbstractCamelContext.start(AbstractCamelContext.java:2046)
	at org.apache.camel.impl.DefaultCamelContext.start(DefaultCamelContext.java:212)
	at org.apache.camel.spring.SpringCamelContext.start(SpringCamelContext.java:119)
	at org.apache.camel.spring.SpringCamelContext.onApplicationEvent(SpringCamelContext.java:151)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:451)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:384)
	at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:984)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at it.polito.communicationmanager.CommunicationManagerApplicationKt.main(CommunicationManagerApplication.kt:13)
Caused by: org.apache.camel.ResolveEndpointFailedException: Failed to resolve endpoint: google-mail://messages/list?markAsRead=true&scopes=https%3A%2F%2Fmail.google.com&userId=xxxxxx due to: Failed to resolve endpoint: google-mail://messages/list?markAsRead=true&scopes=https%3A%2F%2Fmail.google.com&userId=xxxxxx due to: There are 1 parameters that couldn't be set on the endpoint. Check the uri if the parameters are spelt correctly and that they are properties of the endpoint. Unknown parameters=[{markAsRead=true}]
	at org.apache.camel.impl.engine.AbstractCamelContext.doGetEndpoint(AbstractCamelContext.java:831)
	at org.apache.camel.impl.engine.AbstractCamelContext.getEndpoint(AbstractCamelContext.java:731)
	at org.apache.camel.support.CamelContextHelper.getMandatoryEndpoint(CamelContextHelper.java:66)
	at org.apache.camel.reifier.AbstractReifier.resolveEndpoint(AbstractReifier.java:195)
	at org.apache.camel.reifier.RouteReifier.doCreateRoute(RouteReifier.java:99)
	at org.apache.camel.reifier.RouteReifier.createRoute(RouteReifier.java:79)
	... 25 common frames omitted
Caused by: org.apache.camel.ResolveEndpointFailedException: Failed to resolve endpoint: google-mail://messages/list?markAsRead=true&scopes=https%3A%2F%2Fmail.google.com&userId=xxxxxx due to: There are 1 parameters that couldn't be set on the endpoint. Check the uri if the parameters are spelt correctly and that they are properties of the endpoint. Unknown parameters=[{markAsRead=true}]
	at org.apache.camel.support.DefaultComponent.validateParameters(DefaultComponent.java:302)
	at org.apache.camel.support.DefaultComponent.createEndpoint(DefaultComponent.java:191)
	at org.apache.camel.impl.engine.AbstractCamelContext.doGetEndpoint(AbstractCamelContext.java:797)
	... 30 common frames omitted
2024-05-18 19:02:13,057 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 22500 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 19:02:13,059 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 19:02:13,844 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 19:02:13,853 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 19:02:13,853 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 19:02:13,906 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 19:02:13,907 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 814 ms
2024-05-18 19:02:14,829 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 19:02:14,911 WARN [main] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext [AbstractApplicationContext.java:632] Exception encountered during context initialization - cancelling refresh attempt: org.apache.camel.FailedToCreateRouteException: Failed to create route route1: Route(route1)[From[google-mail://messages/list?userId=xxxxxx because of Failed to resolve endpoint: google-mail://messages/list?markAsRead=true&scopes=https%3A%2F%2Fmail.google.com&userId=xxxxxx due to: Failed to resolve endpoint: google-mail://messages/list?markAsRead=true&scopes=https%3A%2F%2Fmail.google.com&userId=xxxxxx due to: There are 1 parameters that couldn't be set on the endpoint. Check the uri if the parameters are spelt correctly and that they are properties of the endpoint. Unknown parameters=[{markAsRead=true}]
2024-05-18 19:02:14,916 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Stopping service [Tomcat]
2024-05-18 19:02:14,920 INFO [main] o.s.b.a.l.ConditionEvaluationReportLogger [ConditionEvaluationReportLogger.java:82] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-05-18 19:02:14,930 ERROR [main] o.s.b.SpringApplication [SpringApplication.java:851] Application run failed
org.apache.camel.FailedToCreateRouteException: Failed to create route route1: Route(route1)[From[google-mail://messages/list?userId=xxxxxx because of Failed to resolve endpoint: google-mail://messages/list?markAsRead=true&scopes=https%3A%2F%2Fmail.google.com&userId=xxxxxx due to: Failed to resolve endpoint: google-mail://messages/list?markAsRead=true&scopes=https%3A%2F%2Fmail.google.com&userId=xxxxxx due to: There are 1 parameters that couldn't be set on the endpoint. Check the uri if the parameters are spelt correctly and that they are properties of the endpoint. Unknown parameters=[{markAsRead=true}]
	at org.apache.camel.reifier.RouteReifier.createRoute(RouteReifier.java:85)
	at org.apache.camel.impl.DefaultModelReifierFactory.createRoute(DefaultModelReifierFactory.java:49)
	at org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:728)
	at org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:594)
	at org.apache.camel.impl.engine.AbstractCamelContext.doInit(AbstractCamelContext.java:2391)
	at org.apache.camel.support.service.BaseService.init(BaseService.java:78)
	at org.apache.camel.impl.engine.AbstractCamelContext.init(AbstractCamelContext.java:2027)
	at org.apache.camel.support.service.BaseService.start(BaseService.java:105)
	at org.apache.camel.impl.engine.AbstractCamelContext.start(AbstractCamelContext.java:2046)
	at org.apache.camel.impl.DefaultCamelContext.start(DefaultCamelContext.java:212)
	at org.apache.camel.spring.SpringCamelContext.start(SpringCamelContext.java:119)
	at org.apache.camel.spring.SpringCamelContext.onApplicationEvent(SpringCamelContext.java:151)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:451)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:384)
	at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:984)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at it.polito.communicationmanager.CommunicationManagerApplicationKt.main(CommunicationManagerApplication.kt:13)
Caused by: org.apache.camel.ResolveEndpointFailedException: Failed to resolve endpoint: google-mail://messages/list?markAsRead=true&scopes=https%3A%2F%2Fmail.google.com&userId=xxxxxx due to: Failed to resolve endpoint: google-mail://messages/list?markAsRead=true&scopes=https%3A%2F%2Fmail.google.com&userId=xxxxxx due to: There are 1 parameters that couldn't be set on the endpoint. Check the uri if the parameters are spelt correctly and that they are properties of the endpoint. Unknown parameters=[{markAsRead=true}]
	at org.apache.camel.impl.engine.AbstractCamelContext.doGetEndpoint(AbstractCamelContext.java:831)
	at org.apache.camel.impl.engine.AbstractCamelContext.getEndpoint(AbstractCamelContext.java:731)
	at org.apache.camel.support.CamelContextHelper.getMandatoryEndpoint(CamelContextHelper.java:66)
	at org.apache.camel.reifier.AbstractReifier.resolveEndpoint(AbstractReifier.java:195)
	at org.apache.camel.reifier.RouteReifier.doCreateRoute(RouteReifier.java:99)
	at org.apache.camel.reifier.RouteReifier.createRoute(RouteReifier.java:79)
	... 25 common frames omitted
Caused by: org.apache.camel.ResolveEndpointFailedException: Failed to resolve endpoint: google-mail://messages/list?markAsRead=true&scopes=https%3A%2F%2Fmail.google.com&userId=xxxxxx due to: There are 1 parameters that couldn't be set on the endpoint. Check the uri if the parameters are spelt correctly and that they are properties of the endpoint. Unknown parameters=[{markAsRead=true}]
	at org.apache.camel.support.DefaultComponent.validateParameters(DefaultComponent.java:302)
	at org.apache.camel.support.DefaultComponent.createEndpoint(DefaultComponent.java:191)
	at org.apache.camel.impl.engine.AbstractCamelContext.doGetEndpoint(AbstractCamelContext.java:797)
	... 30 common frames omitted
2024-05-18 19:02:34,590 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 21088 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 19:02:34,593 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 19:02:35,354 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 19:02:35,362 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 19:02:35,363 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 19:02:35,411 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 19:02:35,412 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 780 ms
2024-05-18 19:02:36,200 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 19:02:36,390 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 19:02:36,428 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 19:02:36,428 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail://messages/list)
2024-05-18 19:02:36,428 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 36ms (build:0ms init:0ms start:36ms)
2024-05-18 19:02:36,430 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 2.061 seconds (process running for 2.525)
2024-05-18 19:02:37,885 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 4AE94D4A40B69D1-0000000000000000 on ExchangeId: 4AE94D4A40B69D1-0000000000000000). Exhausted after delivery attempt: 1 caught: java.lang.NullPointerException: Cannot invoke "Object.toString()" because the return value of "org.apache.camel.Message.getHeader(String)" is null

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2           19
	...
                                         route1/process1                Processor@0x2a0c244e                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
java.lang.NullPointerException: Cannot invoke "Object.toString()" because the return value of "org.apache.camel.Message.getHeader(String)" is null
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:35)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:02:37,889 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[4AE94D4A40B69D1-0000000000000000]. Caused by: [java.lang.NullPointerException - Cannot invoke "Object.toString()" because the return value of "org.apache.camel.Message.getHeader(String)" is null]
java.lang.NullPointerException: Cannot invoke "Object.toString()" because the return value of "org.apache.camel.Message.getHeader(String)" is null
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:35)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:02:38,490 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 4AE94D4A40B69D1-0000000000000001 on ExchangeId: 4AE94D4A40B69D1-0000000000000001). Exhausted after delivery attempt: 1 caught: java.lang.NullPointerException: Cannot invoke "Object.toString()" because the return value of "org.apache.camel.Message.getHeader(String)" is null

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2            0
	...
                                         route1/process1                Processor@0x2a0c244e                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
java.lang.NullPointerException: Cannot invoke "Object.toString()" because the return value of "org.apache.camel.Message.getHeader(String)" is null
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:35)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:02:38,491 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[4AE94D4A40B69D1-0000000000000001]. Caused by: [java.lang.NullPointerException - Cannot invoke "Object.toString()" because the return value of "org.apache.camel.Message.getHeader(String)" is null]
java.lang.NullPointerException: Cannot invoke "Object.toString()" because the return value of "org.apache.camel.Message.getHeader(String)" is null
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:35)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:02:39,239 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 4AE94D4A40B69D1-0000000000000002 on ExchangeId: 4AE94D4A40B69D1-0000000000000002). Exhausted after delivery attempt: 1 caught: java.lang.NullPointerException: Cannot invoke "Object.toString()" because the return value of "org.apache.camel.Message.getHeader(String)" is null

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2            0
	...
                                         route1/process1                Processor@0x2a0c244e                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
java.lang.NullPointerException: Cannot invoke "Object.toString()" because the return value of "org.apache.camel.Message.getHeader(String)" is null
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:35)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:02:39,242 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[4AE94D4A40B69D1-0000000000000002]. Caused by: [java.lang.NullPointerException - Cannot invoke "Object.toString()" because the return value of "org.apache.camel.Message.getHeader(String)" is null]
java.lang.NullPointerException: Cannot invoke "Object.toString()" because the return value of "org.apache.camel.Message.getHeader(String)" is null
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:35)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:02:39,972 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 4AE94D4A40B69D1-0000000000000003 on ExchangeId: 4AE94D4A40B69D1-0000000000000003). Exhausted after delivery attempt: 1 caught: java.lang.NullPointerException: Cannot invoke "Object.toString()" because the return value of "org.apache.camel.Message.getHeader(String)" is null

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2            0
	...
                                         route1/process1                Processor@0x2a0c244e                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
java.lang.NullPointerException: Cannot invoke "Object.toString()" because the return value of "org.apache.camel.Message.getHeader(String)" is null
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:35)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:02:39,973 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[4AE94D4A40B69D1-0000000000000003]. Caused by: [java.lang.NullPointerException - Cannot invoke "Object.toString()" because the return value of "org.apache.camel.Message.getHeader(String)" is null]
java.lang.NullPointerException: Cannot invoke "Object.toString()" because the return value of "org.apache.camel.Message.getHeader(String)" is null
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:35)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:02:40,568 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 4AE94D4A40B69D1-0000000000000004 on ExchangeId: 4AE94D4A40B69D1-0000000000000004). Exhausted after delivery attempt: 1 caught: java.lang.NullPointerException: Cannot invoke "Object.toString()" because the return value of "org.apache.camel.Message.getHeader(String)" is null

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2            0
	...
                                         route1/process1                Processor@0x2a0c244e                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
java.lang.NullPointerException: Cannot invoke "Object.toString()" because the return value of "org.apache.camel.Message.getHeader(String)" is null
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:35)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:02:40,569 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[4AE94D4A40B69D1-0000000000000004]. Caused by: [java.lang.NullPointerException - Cannot invoke "Object.toString()" because the return value of "org.apache.camel.Message.getHeader(String)" is null]
java.lang.NullPointerException: Cannot invoke "Object.toString()" because the return value of "org.apache.camel.Message.getHeader(String)" is null
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:35)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:02:41,161 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 4AE94D4A40B69D1-0000000000000005 on ExchangeId: 4AE94D4A40B69D1-0000000000000005). Exhausted after delivery attempt: 1 caught: java.lang.NullPointerException: Cannot invoke "Object.toString()" because the return value of "org.apache.camel.Message.getHeader(String)" is null

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2            0
	...
                                         route1/process1                Processor@0x2a0c244e                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
java.lang.NullPointerException: Cannot invoke "Object.toString()" because the return value of "org.apache.camel.Message.getHeader(String)" is null
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:35)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:02:41,161 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[4AE94D4A40B69D1-0000000000000005]. Caused by: [java.lang.NullPointerException - Cannot invoke "Object.toString()" because the return value of "org.apache.camel.Message.getHeader(String)" is null]
java.lang.NullPointerException: Cannot invoke "Object.toString()" because the return value of "org.apache.camel.Message.getHeader(String)" is null
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:35)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:02:41,740 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 4AE94D4A40B69D1-0000000000000006 on ExchangeId: 4AE94D4A40B69D1-0000000000000006). Exhausted after delivery attempt: 1 caught: java.lang.NullPointerException: Cannot invoke "Object.toString()" because the return value of "org.apache.camel.Message.getHeader(String)" is null

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2            0
	...
                                         route1/process1                Processor@0x2a0c244e                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
java.lang.NullPointerException: Cannot invoke "Object.toString()" because the return value of "org.apache.camel.Message.getHeader(String)" is null
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:35)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:02:41,741 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[4AE94D4A40B69D1-0000000000000006]. Caused by: [java.lang.NullPointerException - Cannot invoke "Object.toString()" because the return value of "org.apache.camel.Message.getHeader(String)" is null]
java.lang.NullPointerException: Cannot invoke "Object.toString()" because the return value of "org.apache.camel.Message.getHeader(String)" is null
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:35)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:02:41,842 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 19:02:41,858 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 19:02:41,859 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail://messages/list)
2024-05-18 19:02:41,864 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 21ms (uptime:5s)
2024-05-18 19:03:16,536 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 14832 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 19:03:16,538 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 19:03:17,327 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 19:03:17,336 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 19:03:17,336 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 19:03:17,379 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 19:03:17,380 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 804 ms
2024-05-18 19:03:18,173 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 19:03:18,363 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 19:03:18,398 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 19:03:18,399 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail://messages/list)
2024-05-18 19:03:18,399 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 34ms (build:0ms init:0ms start:34ms)
2024-05-18 19:03:18,401 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 2.096 seconds (process running for 2.587)
2024-05-18 19:03:19,964 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 6EF0877A8F9ABCF-0000000000000000 on ExchangeId: 6EF0877A8F9ABCF-0000000000000000). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/6EF0877A8F9ABCF-0000000000000000?format=METADATA
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Invalid id value",
    "reason" : "invalidArgument"
  } ],
  "message" : "Invalid id value",
  "status" : "INVALID_ARGUMENT"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2           90
	...
                                         route1/process1                Processor@0x6f22c1f1                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/6EF0877A8F9ABCF-0000000000000000?format=METADATA
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Invalid id value",
    "reason" : "invalidArgument"
  } ],
  "message" : "Invalid id value",
  "status" : "INVALID_ARGUMENT"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:36)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:03:19,967 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[6EF0877A8F9ABCF-0000000000000000]. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 400 Bad Request
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/6EF0877A8F9ABCF-0000000000000000?format=METADATA
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Invalid id value",
    "reason" : "invalidArgument"
  } ],
  "message" : "Invalid id value",
  "status" : "INVALID_ARGUMENT"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/6EF0877A8F9ABCF-0000000000000000?format=METADATA
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Invalid id value",
    "reason" : "invalidArgument"
  } ],
  "message" : "Invalid id value",
  "status" : "INVALID_ARGUMENT"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:36)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:03:20,627 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 6EF0877A8F9ABCF-0000000000000001 on ExchangeId: 6EF0877A8F9ABCF-0000000000000001). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/6EF0877A8F9ABCF-0000000000000001?format=METADATA
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Invalid id value",
    "reason" : "invalidArgument"
  } ],
  "message" : "Invalid id value",
  "status" : "INVALID_ARGUMENT"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2           70
	...
                                         route1/process1                Processor@0x6f22c1f1                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/6EF0877A8F9ABCF-0000000000000001?format=METADATA
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Invalid id value",
    "reason" : "invalidArgument"
  } ],
  "message" : "Invalid id value",
  "status" : "INVALID_ARGUMENT"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:36)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:03:20,627 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[6EF0877A8F9ABCF-0000000000000001]. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 400 Bad Request
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/6EF0877A8F9ABCF-0000000000000001?format=METADATA
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Invalid id value",
    "reason" : "invalidArgument"
  } ],
  "message" : "Invalid id value",
  "status" : "INVALID_ARGUMENT"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/6EF0877A8F9ABCF-0000000000000001?format=METADATA
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Invalid id value",
    "reason" : "invalidArgument"
  } ],
  "message" : "Invalid id value",
  "status" : "INVALID_ARGUMENT"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:36)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:03:21,280 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 6EF0877A8F9ABCF-0000000000000002 on ExchangeId: 6EF0877A8F9ABCF-0000000000000002). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/6EF0877A8F9ABCF-0000000000000002?format=METADATA
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Invalid id value",
    "reason" : "invalidArgument"
  } ],
  "message" : "Invalid id value",
  "status" : "INVALID_ARGUMENT"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2           72
	...
                                         route1/process1                Processor@0x6f22c1f1                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/6EF0877A8F9ABCF-0000000000000002?format=METADATA
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Invalid id value",
    "reason" : "invalidArgument"
  } ],
  "message" : "Invalid id value",
  "status" : "INVALID_ARGUMENT"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:36)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:03:21,280 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[6EF0877A8F9ABCF-0000000000000002]. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 400 Bad Request
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/6EF0877A8F9ABCF-0000000000000002?format=METADATA
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Invalid id value",
    "reason" : "invalidArgument"
  } ],
  "message" : "Invalid id value",
  "status" : "INVALID_ARGUMENT"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/6EF0877A8F9ABCF-0000000000000002?format=METADATA
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Invalid id value",
    "reason" : "invalidArgument"
  } ],
  "message" : "Invalid id value",
  "status" : "INVALID_ARGUMENT"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:36)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:03:21,940 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 6EF0877A8F9ABCF-0000000000000003 on ExchangeId: 6EF0877A8F9ABCF-0000000000000003). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/6EF0877A8F9ABCF-0000000000000003?format=METADATA
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Invalid id value",
    "reason" : "invalidArgument"
  } ],
  "message" : "Invalid id value",
  "status" : "INVALID_ARGUMENT"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2           75
	...
                                         route1/process1                Processor@0x6f22c1f1                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/6EF0877A8F9ABCF-0000000000000003?format=METADATA
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Invalid id value",
    "reason" : "invalidArgument"
  } ],
  "message" : "Invalid id value",
  "status" : "INVALID_ARGUMENT"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:36)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:03:21,941 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[6EF0877A8F9ABCF-0000000000000003]. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 400 Bad Request
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/6EF0877A8F9ABCF-0000000000000003?format=METADATA
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Invalid id value",
    "reason" : "invalidArgument"
  } ],
  "message" : "Invalid id value",
  "status" : "INVALID_ARGUMENT"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/6EF0877A8F9ABCF-0000000000000003?format=METADATA
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Invalid id value",
    "reason" : "invalidArgument"
  } ],
  "message" : "Invalid id value",
  "status" : "INVALID_ARGUMENT"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:36)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:03:22,001 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 19:03:22,008 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 19:03:22,009 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail://messages/list)
2024-05-18 19:03:22,011 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 10ms (uptime:3s)
2024-05-18 19:03:49,803 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 25752 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 19:03:49,805 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 19:03:50,622 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 19:03:50,630 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 19:03:50,631 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 19:03:50,676 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 19:03:50,676 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 838 ms
2024-05-18 19:03:51,553 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 19:03:51,749 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 19:03:51,788 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 19:03:51,788 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail://messages/list)
2024-05-18 19:03:51,789 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 38ms (build:0ms init:0ms start:38ms)
2024-05-18 19:03:51,791 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 2.202 seconds (process running for 2.666)
2024-05-18 19:03:53,336 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: C929E4F918E4735-0000000000000000 on ExchangeId: C929E4F918E4735-0000000000000000). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/C929E4F918E4735-0000000000000000?format=METADATA
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Invalid id value",
    "reason" : "invalidArgument"
  } ],
  "message" : "Invalid id value",
  "status" : "INVALID_ARGUMENT"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2           85
	...
                                         route1/process1                Processor@0x6abb44cb                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/C929E4F918E4735-0000000000000000?format=METADATA
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Invalid id value",
    "reason" : "invalidArgument"
  } ],
  "message" : "Invalid id value",
  "status" : "INVALID_ARGUMENT"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:36)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:03:53,339 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[C929E4F918E4735-0000000000000000]. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 400 Bad Request
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/C929E4F918E4735-0000000000000000?format=METADATA
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Invalid id value",
    "reason" : "invalidArgument"
  } ],
  "message" : "Invalid id value",
  "status" : "INVALID_ARGUMENT"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/C929E4F918E4735-0000000000000000?format=METADATA
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Invalid id value",
    "reason" : "invalidArgument"
  } ],
  "message" : "Invalid id value",
  "status" : "INVALID_ARGUMENT"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:36)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:03:54,090 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: C929E4F918E4735-0000000000000001 on ExchangeId: C929E4F918E4735-0000000000000001). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/C929E4F918E4735-0000000000000001?format=METADATA
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Invalid id value",
    "reason" : "invalidArgument"
  } ],
  "message" : "Invalid id value",
  "status" : "INVALID_ARGUMENT"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          163
	...
                                         route1/process1                Processor@0x6abb44cb                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/C929E4F918E4735-0000000000000001?format=METADATA
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Invalid id value",
    "reason" : "invalidArgument"
  } ],
  "message" : "Invalid id value",
  "status" : "INVALID_ARGUMENT"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:36)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:03:54,091 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[C929E4F918E4735-0000000000000001]. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 400 Bad Request
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/C929E4F918E4735-0000000000000001?format=METADATA
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Invalid id value",
    "reason" : "invalidArgument"
  } ],
  "message" : "Invalid id value",
  "status" : "INVALID_ARGUMENT"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/C929E4F918E4735-0000000000000001?format=METADATA
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Invalid id value",
    "reason" : "invalidArgument"
  } ],
  "message" : "Invalid id value",
  "status" : "INVALID_ARGUMENT"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:36)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:03:54,797 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: C929E4F918E4735-0000000000000002 on ExchangeId: C929E4F918E4735-0000000000000002). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/C929E4F918E4735-0000000000000002?format=METADATA
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Invalid id value",
    "reason" : "invalidArgument"
  } ],
  "message" : "Invalid id value",
  "status" : "INVALID_ARGUMENT"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2           93
	...
                                         route1/process1                Processor@0x6abb44cb                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/C929E4F918E4735-0000000000000002?format=METADATA
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Invalid id value",
    "reason" : "invalidArgument"
  } ],
  "message" : "Invalid id value",
  "status" : "INVALID_ARGUMENT"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:36)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:03:54,800 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[C929E4F918E4735-0000000000000002]. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 400 Bad Request
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/C929E4F918E4735-0000000000000002?format=METADATA
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Invalid id value",
    "reason" : "invalidArgument"
  } ],
  "message" : "Invalid id value",
  "status" : "INVALID_ARGUMENT"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/C929E4F918E4735-0000000000000002?format=METADATA
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Invalid id value",
    "reason" : "invalidArgument"
  } ],
  "message" : "Invalid id value",
  "status" : "INVALID_ARGUMENT"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:36)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:03:54,819 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 19:03:54,838 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 19:03:54,838 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail://messages/list)
2024-05-18 19:03:54,840 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 21ms (uptime:3s)
2024-05-18 19:04:36,194 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 18664 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 19:04:36,197 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 19:04:37,016 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 19:04:37,026 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 19:04:37,026 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 19:04:37,071 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 19:04:37,072 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 844 ms
2024-05-18 19:04:37,954 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 19:04:38,173 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 19:04:38,213 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 19:04:38,213 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail://messages/list)
2024-05-18 19:04:38,213 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 38ms (build:0ms init:0ms start:38ms)
2024-05-18 19:04:38,215 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 2.225 seconds (process running for 2.734)
2024-05-18 19:04:39,685 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 9FF58D947F53776-0000000000000000 on ExchangeId: 9FF58D947F53776-0000000000000000). Exhausted after delivery attempt: 1 caught: java.lang.NullPointerException: Cannot invoke "Object.toString()" because the return value of "org.apache.camel.Message.getHeader(String)" is null

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2            7
	...
                                         route1/process1                Processor@0x4ea43d4d                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
java.lang.NullPointerException: Cannot invoke "Object.toString()" because the return value of "org.apache.camel.Message.getHeader(String)" is null
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:35)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:04:39,690 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[9FF58D947F53776-0000000000000000]. Caused by: [java.lang.NullPointerException - Cannot invoke "Object.toString()" because the return value of "org.apache.camel.Message.getHeader(String)" is null]
java.lang.NullPointerException: Cannot invoke "Object.toString()" because the return value of "org.apache.camel.Message.getHeader(String)" is null
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:35)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:04:40,273 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 9FF58D947F53776-0000000000000001 on ExchangeId: 9FF58D947F53776-0000000000000001). Exhausted after delivery attempt: 1 caught: java.lang.NullPointerException: Cannot invoke "Object.toString()" because the return value of "org.apache.camel.Message.getHeader(String)" is null

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2            0
	...
                                         route1/process1                Processor@0x4ea43d4d                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
java.lang.NullPointerException: Cannot invoke "Object.toString()" because the return value of "org.apache.camel.Message.getHeader(String)" is null
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:35)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:04:40,274 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[9FF58D947F53776-0000000000000001]. Caused by: [java.lang.NullPointerException - Cannot invoke "Object.toString()" because the return value of "org.apache.camel.Message.getHeader(String)" is null]
java.lang.NullPointerException: Cannot invoke "Object.toString()" because the return value of "org.apache.camel.Message.getHeader(String)" is null
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:35)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:04:41,001 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 9FF58D947F53776-0000000000000002 on ExchangeId: 9FF58D947F53776-0000000000000002). Exhausted after delivery attempt: 1 caught: java.lang.NullPointerException: Cannot invoke "Object.toString()" because the return value of "org.apache.camel.Message.getHeader(String)" is null

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2            0
	...
                                         route1/process1                Processor@0x4ea43d4d                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
java.lang.NullPointerException: Cannot invoke "Object.toString()" because the return value of "org.apache.camel.Message.getHeader(String)" is null
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:35)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:04:41,001 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[9FF58D947F53776-0000000000000002]. Caused by: [java.lang.NullPointerException - Cannot invoke "Object.toString()" because the return value of "org.apache.camel.Message.getHeader(String)" is null]
java.lang.NullPointerException: Cannot invoke "Object.toString()" because the return value of "org.apache.camel.Message.getHeader(String)" is null
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:35)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:04:41,364 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 19:04:41,369 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 19:04:41,369 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail://messages/list)
2024-05-18 19:04:41,372 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 7ms (uptime:3s)
2024-05-18 19:07:00,476 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 2256 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 19:07:00,479 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 19:07:01,298 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 19:07:01,319 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 19:07:01,320 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 19:07:01,362 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 19:07:01,362 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 848 ms
2024-05-18 19:07:02,184 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 19:07:02,383 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 19:07:02,427 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 19:07:02,427 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail://messages/list)
2024-05-18 19:07:02,427 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 42ms (build:0ms init:0ms start:42ms)
2024-05-18 19:07:02,429 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 2.179 seconds (process running for 2.652)
2024-05-18 19:07:04,294 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: CE63D39C8EF3364-0000000000000000 on ExchangeId: CE63D39C8EF3364-0000000000000000). Exhausted after delivery attempt: 1 caught: java.lang.RuntimeException: Message ID not found in headers

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2            6
	...
                                         route1/process1                Processor@0xe2f6a45                                           0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
java.lang.RuntimeException: Message ID not found in headers
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:36)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:07:04,298 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[CE63D39C8EF3364-0000000000000000]. Caused by: [java.lang.RuntimeException - Message ID not found in headers]
java.lang.RuntimeException: Message ID not found in headers
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:36)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:07:04,898 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: CE63D39C8EF3364-0000000000000001 on ExchangeId: CE63D39C8EF3364-0000000000000001). Exhausted after delivery attempt: 1 caught: java.lang.RuntimeException: Message ID not found in headers

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2            0
	...
                                         route1/process1                Processor@0xe2f6a45                                           0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
java.lang.RuntimeException: Message ID not found in headers
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:36)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:07:04,898 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[CE63D39C8EF3364-0000000000000001]. Caused by: [java.lang.RuntimeException - Message ID not found in headers]
java.lang.RuntimeException: Message ID not found in headers
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:36)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:07:05,480 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: CE63D39C8EF3364-0000000000000002 on ExchangeId: CE63D39C8EF3364-0000000000000002). Exhausted after delivery attempt: 1 caught: java.lang.RuntimeException: Message ID not found in headers

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2            0
	...
                                         route1/process1                Processor@0xe2f6a45                                           0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
java.lang.RuntimeException: Message ID not found in headers
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:36)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:07:05,481 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[CE63D39C8EF3364-0000000000000002]. Caused by: [java.lang.RuntimeException - Message ID not found in headers]
java.lang.RuntimeException: Message ID not found in headers
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:36)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:07:06,037 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 19:07:06,045 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 19:07:06,045 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail://messages/list)
2024-05-18 19:07:06,048 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 10ms (uptime:3s)
2024-05-18 19:08:20,489 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 13644 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 19:08:20,491 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 19:08:21,374 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 19:08:21,385 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 19:08:21,386 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 19:08:21,436 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 19:08:21,436 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 901 ms
2024-05-18 19:08:22,327 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 19:08:22,553 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 19:08:22,600 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 19:08:22,600 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail://messages/list)
2024-05-18 19:08:22,601 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 45ms (build:0ms init:0ms start:45ms)
2024-05-18 19:08:22,604 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 2.345 seconds (process running for 2.824)
2024-05-18 19:08:24,323 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 49E73C642A30040-0000000000000000 on ExchangeId: 49E73C642A30040-0000000000000000). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/49E73C642A30040-0000000000000000
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2           87
	...
                                         route1/process1                Processor@0x6a07e6ca                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/49E73C642A30040-0000000000000000
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:36)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:08:24,326 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[49E73C642A30040-0000000000000000]. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/49E73C642A30040-0000000000000000
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/49E73C642A30040-0000000000000000
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:36)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:08:24,981 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 49E73C642A30040-0000000000000001 on ExchangeId: 49E73C642A30040-0000000000000001). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/49E73C642A30040-0000000000000001
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2           71
	...
                                         route1/process1                Processor@0x6a07e6ca                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/49E73C642A30040-0000000000000001
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:36)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:08:24,982 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[49E73C642A30040-0000000000000001]. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/49E73C642A30040-0000000000000001
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/49E73C642A30040-0000000000000001
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:36)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:08:25,626 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 49E73C642A30040-0000000000000002 on ExchangeId: 49E73C642A30040-0000000000000002). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/49E73C642A30040-0000000000000002
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2           70
	...
                                         route1/process1                Processor@0x6a07e6ca                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/49E73C642A30040-0000000000000002
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:36)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:08:25,627 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[49E73C642A30040-0000000000000002]. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/49E73C642A30040-0000000000000002
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/49E73C642A30040-0000000000000002
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:36)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:08:26,277 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 49E73C642A30040-0000000000000003 on ExchangeId: 49E73C642A30040-0000000000000003). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/49E73C642A30040-0000000000000003
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2           73
	...
                                         route1/process1                Processor@0x6a07e6ca                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/49E73C642A30040-0000000000000003
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:36)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:08:26,278 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[49E73C642A30040-0000000000000003]. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/49E73C642A30040-0000000000000003
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/49E73C642A30040-0000000000000003
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:36)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:08:26,318 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 19:08:26,326 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 19:08:26,326 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail://messages/list)
2024-05-18 19:08:26,329 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 10ms (uptime:3s)
2024-05-18 19:08:59,673 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 17448 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 19:08:59,676 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 19:09:00,569 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 19:09:00,581 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 19:09:00,582 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 19:09:00,641 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 19:09:00,642 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 928 ms
2024-05-18 19:09:01,532 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 19:09:01,743 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 19:09:01,778 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 19:09:01,778 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail://messages/list)
2024-05-18 19:09:01,779 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 34ms (build:0ms init:0ms start:34ms)
2024-05-18 19:09:01,781 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 2.374 seconds (process running for 2.874)
2024-05-18 19:09:03,318 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 7AC41FAACB21608-0000000000000000 on ExchangeId: 7AC41FAACB21608-0000000000000000). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/7AC41FAACB21608-0000000000000000?format=METADATA
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Invalid id value",
    "reason" : "invalidArgument"
  } ],
  "message" : "Invalid id value",
  "status" : "INVALID_ARGUMENT"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          102
	...
                                         route1/process1                Processor@0x6abb44cb                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/7AC41FAACB21608-0000000000000000?format=METADATA
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Invalid id value",
    "reason" : "invalidArgument"
  } ],
  "message" : "Invalid id value",
  "status" : "INVALID_ARGUMENT"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:36)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:09:03,321 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[7AC41FAACB21608-0000000000000000]. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 400 Bad Request
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/7AC41FAACB21608-0000000000000000?format=METADATA
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Invalid id value",
    "reason" : "invalidArgument"
  } ],
  "message" : "Invalid id value",
  "status" : "INVALID_ARGUMENT"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/7AC41FAACB21608-0000000000000000?format=METADATA
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Invalid id value",
    "reason" : "invalidArgument"
  } ],
  "message" : "Invalid id value",
  "status" : "INVALID_ARGUMENT"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:36)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:09:03,986 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 7AC41FAACB21608-0000000000000001 on ExchangeId: 7AC41FAACB21608-0000000000000001). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/7AC41FAACB21608-0000000000000001?format=METADATA
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Invalid id value",
    "reason" : "invalidArgument"
  } ],
  "message" : "Invalid id value",
  "status" : "INVALID_ARGUMENT"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2           80
	...
                                         route1/process1                Processor@0x6abb44cb                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/7AC41FAACB21608-0000000000000001?format=METADATA
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Invalid id value",
    "reason" : "invalidArgument"
  } ],
  "message" : "Invalid id value",
  "status" : "INVALID_ARGUMENT"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:36)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:09:03,987 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[7AC41FAACB21608-0000000000000001]. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 400 Bad Request
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/7AC41FAACB21608-0000000000000001?format=METADATA
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Invalid id value",
    "reason" : "invalidArgument"
  } ],
  "message" : "Invalid id value",
  "status" : "INVALID_ARGUMENT"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/7AC41FAACB21608-0000000000000001?format=METADATA
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Invalid id value",
    "reason" : "invalidArgument"
  } ],
  "message" : "Invalid id value",
  "status" : "INVALID_ARGUMENT"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:36)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:09:04,827 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 7AC41FAACB21608-0000000000000002 on ExchangeId: 7AC41FAACB21608-0000000000000002). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/7AC41FAACB21608-0000000000000002?format=METADATA
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Invalid id value",
    "reason" : "invalidArgument"
  } ],
  "message" : "Invalid id value",
  "status" : "INVALID_ARGUMENT"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2           76
	...
                                         route1/process1                Processor@0x6abb44cb                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/7AC41FAACB21608-0000000000000002?format=METADATA
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Invalid id value",
    "reason" : "invalidArgument"
  } ],
  "message" : "Invalid id value",
  "status" : "INVALID_ARGUMENT"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:36)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:09:04,827 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[7AC41FAACB21608-0000000000000002]. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 400 Bad Request
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/7AC41FAACB21608-0000000000000002?format=METADATA
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Invalid id value",
    "reason" : "invalidArgument"
  } ],
  "message" : "Invalid id value",
  "status" : "INVALID_ARGUMENT"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/7AC41FAACB21608-0000000000000002?format=METADATA
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Invalid id value",
    "reason" : "invalidArgument"
  } ],
  "message" : "Invalid id value",
  "status" : "INVALID_ARGUMENT"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:36)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:09:05,081 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 19:09:05,089 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 19:09:05,089 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail://messages/list)
2024-05-18 19:09:05,100 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 19ms (uptime:3s)
2024-05-18 19:11:20,284 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 2140 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 19:11:20,286 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 19:11:21,066 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 19:11:21,074 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 19:11:21,074 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 19:11:21,115 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 19:11:21,116 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 797 ms
2024-05-18 19:11:21,902 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 19:11:22,094 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 19:11:22,133 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 19:11:22,133 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail://messages/list)
2024-05-18 19:11:22,133 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 37ms (build:0ms init:0ms start:37ms)
2024-05-18 19:11:22,135 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 2.089 seconds (process running for 2.567)
2024-05-18 19:11:23,680 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 21D1C56E7A4521C-0000000000000000 on ExchangeId: 21D1C56E7A4521C-0000000000000000). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/21D1C56E7A4521C-0000000000000000
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2           89
	...
                                         route1/process1                Processor@0x4db16677                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/21D1C56E7A4521C-0000000000000000
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:36)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:11:23,683 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[21D1C56E7A4521C-0000000000000000]. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/21D1C56E7A4521C-0000000000000000
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/21D1C56E7A4521C-0000000000000000
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:36)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:11:24,357 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 21D1C56E7A4521C-0000000000000001 on ExchangeId: 21D1C56E7A4521C-0000000000000001). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/21D1C56E7A4521C-0000000000000001
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2           73
	...
                                         route1/process1                Processor@0x4db16677                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/21D1C56E7A4521C-0000000000000001
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:36)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:11:24,358 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[21D1C56E7A4521C-0000000000000001]. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/21D1C56E7A4521C-0000000000000001
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/21D1C56E7A4521C-0000000000000001
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:36)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:11:25,049 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 21D1C56E7A4521C-0000000000000002 on ExchangeId: 21D1C56E7A4521C-0000000000000002). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/21D1C56E7A4521C-0000000000000002
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          104
	...
                                         route1/process1                Processor@0x4db16677                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/21D1C56E7A4521C-0000000000000002
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:36)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:11:25,049 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[21D1C56E7A4521C-0000000000000002]. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/21D1C56E7A4521C-0000000000000002
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/21D1C56E7A4521C-0000000000000002
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:36)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:11:25,445 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 19:11:25,451 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 19:11:25,451 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail://messages/list)
2024-05-18 19:11:25,454 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 8ms (uptime:3s)
2024-05-18 19:11:41,370 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 2884 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 19:11:41,372 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 19:11:42,163 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 19:11:42,171 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 19:11:42,171 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 19:11:42,214 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 19:11:42,215 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 808 ms
2024-05-18 19:11:42,994 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 19:11:43,189 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 19:11:43,226 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 19:11:43,226 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail://messages/list)
2024-05-18 19:11:43,227 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 36ms (build:0ms init:0ms start:36ms)
2024-05-18 19:11:43,230 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 2.069 seconds (process running for 2.532)
2024-05-18 19:11:44,860 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: B6F8FFC4F256D2D-0000000000000000 on ExchangeId: B6F8FFC4F256D2D-0000000000000000). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/B6F8FFC4F256D2D-0000000000000000?format=METADATA
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Invalid id value",
    "reason" : "invalidArgument"
  } ],
  "message" : "Invalid id value",
  "status" : "INVALID_ARGUMENT"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          143
	...
                                         route1/process1                Processor@0x41ddec69                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/B6F8FFC4F256D2D-0000000000000000?format=METADATA
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Invalid id value",
    "reason" : "invalidArgument"
  } ],
  "message" : "Invalid id value",
  "status" : "INVALID_ARGUMENT"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:36)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:11:44,864 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[B6F8FFC4F256D2D-0000000000000000]. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 400 Bad Request
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/B6F8FFC4F256D2D-0000000000000000?format=METADATA
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Invalid id value",
    "reason" : "invalidArgument"
  } ],
  "message" : "Invalid id value",
  "status" : "INVALID_ARGUMENT"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/B6F8FFC4F256D2D-0000000000000000?format=METADATA
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Invalid id value",
    "reason" : "invalidArgument"
  } ],
  "message" : "Invalid id value",
  "status" : "INVALID_ARGUMENT"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:36)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:11:45,526 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: B6F8FFC4F256D2D-0000000000000001 on ExchangeId: B6F8FFC4F256D2D-0000000000000001). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/B6F8FFC4F256D2D-0000000000000001?format=METADATA
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Invalid id value",
    "reason" : "invalidArgument"
  } ],
  "message" : "Invalid id value",
  "status" : "INVALID_ARGUMENT"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2           75
	...
                                         route1/process1                Processor@0x41ddec69                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/B6F8FFC4F256D2D-0000000000000001?format=METADATA
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Invalid id value",
    "reason" : "invalidArgument"
  } ],
  "message" : "Invalid id value",
  "status" : "INVALID_ARGUMENT"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:36)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:11:45,527 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[B6F8FFC4F256D2D-0000000000000001]. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 400 Bad Request
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/B6F8FFC4F256D2D-0000000000000001?format=METADATA
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Invalid id value",
    "reason" : "invalidArgument"
  } ],
  "message" : "Invalid id value",
  "status" : "INVALID_ARGUMENT"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/B6F8FFC4F256D2D-0000000000000001?format=METADATA
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Invalid id value",
    "reason" : "invalidArgument"
  } ],
  "message" : "Invalid id value",
  "status" : "INVALID_ARGUMENT"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:36)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:11:46,198 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: B6F8FFC4F256D2D-0000000000000002 on ExchangeId: B6F8FFC4F256D2D-0000000000000002). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/B6F8FFC4F256D2D-0000000000000002?format=METADATA
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Invalid id value",
    "reason" : "invalidArgument"
  } ],
  "message" : "Invalid id value",
  "status" : "INVALID_ARGUMENT"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2           67
	...
                                         route1/process1                Processor@0x41ddec69                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/B6F8FFC4F256D2D-0000000000000002?format=METADATA
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Invalid id value",
    "reason" : "invalidArgument"
  } ],
  "message" : "Invalid id value",
  "status" : "INVALID_ARGUMENT"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:36)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:11:46,198 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[B6F8FFC4F256D2D-0000000000000002]. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 400 Bad Request
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/B6F8FFC4F256D2D-0000000000000002?format=METADATA
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Invalid id value",
    "reason" : "invalidArgument"
  } ],
  "message" : "Invalid id value",
  "status" : "INVALID_ARGUMENT"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/B6F8FFC4F256D2D-0000000000000002?format=METADATA
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Invalid id value",
    "reason" : "invalidArgument"
  } ],
  "message" : "Invalid id value",
  "status" : "INVALID_ARGUMENT"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:36)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:11:46,621 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 19:11:46,627 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 19:11:46,627 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail://messages/list)
2024-05-18 19:11:46,629 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 8ms (uptime:3s)
2024-05-18 19:12:37,822 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 19420 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 19:12:37,824 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 19:12:38,659 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 19:12:38,671 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 19:12:38,671 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 19:12:38,723 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 19:12:38,723 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 860 ms
2024-05-18 19:12:39,519 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 19:12:39,714 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 19:12:39,750 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 19:12:39,750 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail://messages/list)
2024-05-18 19:12:39,750 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 34ms (build:0ms init:0ms start:34ms)
2024-05-18 19:12:39,752 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 2.18 seconds (process running for 2.682)
2024-05-18 19:12:41,733 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: A82995B557F3F6E-0000000000000000 on ExchangeId: A82995B557F3F6E-0000000000000000). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f8c195b21ad06c?format=RAW
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format RAW",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format RAW",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          227
	...
                                         route1/process1                Processor@0x6f22c1f1                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f8c195b21ad06c?format=RAW
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format RAW",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format RAW",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:38)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:12:41,738 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[A82995B557F3F6E-0000000000000000]. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f8c195b21ad06c?format=RAW
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format RAW",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format RAW",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f8c195b21ad06c?format=RAW
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format RAW",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format RAW",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:38)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:12:42,678 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: A82995B557F3F6E-0000000000000001 on ExchangeId: A82995B557F3F6E-0000000000000001). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f8c195b21ad06c?format=RAW
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format RAW",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format RAW",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          335
	...
                                         route1/process1                Processor@0x6f22c1f1                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f8c195b21ad06c?format=RAW
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format RAW",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format RAW",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:38)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:12:42,679 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[A82995B557F3F6E-0000000000000001]. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f8c195b21ad06c?format=RAW
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format RAW",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format RAW",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f8c195b21ad06c?format=RAW
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format RAW",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format RAW",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:38)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:12:43,779 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: A82995B557F3F6E-0000000000000002 on ExchangeId: A82995B557F3F6E-0000000000000002). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f8c195b21ad06c?format=RAW
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format RAW",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format RAW",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          242
	...
                                         route1/process1                Processor@0x6f22c1f1                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f8c195b21ad06c?format=RAW
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format RAW",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format RAW",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:38)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:12:43,780 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[A82995B557F3F6E-0000000000000002]. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f8c195b21ad06c?format=RAW
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format RAW",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format RAW",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f8c195b21ad06c?format=RAW
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format RAW",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format RAW",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:38)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:12:43,889 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 19:12:43,893 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 19:12:43,893 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail://messages/list)
2024-05-18 19:12:43,896 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 7ms (uptime:4s)
2024-05-18 19:12:57,259 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 13060 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 19:12:57,261 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 19:12:58,220 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 19:12:58,236 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 19:12:58,237 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 19:12:58,328 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 19:12:58,329 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 1029 ms
2024-05-18 19:12:59,291 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 19:12:59,494 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 19:12:59,527 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 19:12:59,527 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail://messages/list)
2024-05-18 19:12:59,527 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 32ms (build:0ms init:0ms start:32ms)
2024-05-18 19:12:59,530 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 2.547 seconds (process running for 3.074)
2024-05-18 19:13:02,136 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 3DA3B0257F072F9-0000000000000000 on ExchangeId: 3DA3B0257F072F9-0000000000000000). Exhausted after delivery attempt: 1 caught: org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2         1140
	...
                                         route1/to1                     http://localhost:8080/API/messages/                           0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:210)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:13:02,139 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[3DA3B0257F072F9-0000000000000000]. Caused by: [org.apache.camel.http.base.HttpOperationFailedException - HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400]
org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:210)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:13:03,548 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 3DA3B0257F072F9-0000000000000001 on ExchangeId: 3DA3B0257F072F9-0000000000000001). Exhausted after delivery attempt: 1 caught: org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          819
	...
                                         route1/to1                     http://localhost:8080/API/messages/                           0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:210)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:13:03,549 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[3DA3B0257F072F9-0000000000000001]. Caused by: [org.apache.camel.http.base.HttpOperationFailedException - HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400]
org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:210)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:13:04,866 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 3DA3B0257F072F9-0000000000000002 on ExchangeId: 3DA3B0257F072F9-0000000000000002). Exhausted after delivery attempt: 1 caught: org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          731
	...
                                         route1/to1                     http://localhost:8080/API/messages/                           0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:210)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:13:04,867 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[3DA3B0257F072F9-0000000000000002]. Caused by: [org.apache.camel.http.base.HttpOperationFailedException - HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400]
org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:210)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:13:04,929 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 19:13:04,940 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 19:13:04,940 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail://messages/list)
2024-05-18 19:13:04,945 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 15ms (uptime:5s)
2024-05-18 19:15:06,072 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 9832 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 19:15:06,075 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 19:15:07,062 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 19:15:07,074 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 19:15:07,074 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 19:15:07,127 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 19:15:07,127 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 1012 ms
2024-05-18 19:15:08,038 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 19:15:08,251 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 19:15:08,286 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 19:15:08,286 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail://messages/list)
2024-05-18 19:15:08,287 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 34ms (build:0ms init:0ms start:34ms)
2024-05-18 19:15:08,290 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 2.486 seconds (process running for 2.997)
2024-05-18 19:15:11,468 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 90DBF918A07AB50-0000000000000000 on ExchangeId: 90DBF918A07AB50-0000000000000000). Exhausted after delivery attempt: 1 caught: org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2         1747
	...
                                         route1/to1                     http://localhost:8080/API/messages/                           0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:210)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:15:11,471 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[90DBF918A07AB50-0000000000000000]. Caused by: [org.apache.camel.http.base.HttpOperationFailedException - HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400]
org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:210)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:15:13,198 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 90DBF918A07AB50-0000000000000001 on ExchangeId: 90DBF918A07AB50-0000000000000001). Exhausted after delivery attempt: 1 caught: org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2         1142
	...
                                         route1/to1                     http://localhost:8080/API/messages/                           0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:210)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:15:13,199 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[90DBF918A07AB50-0000000000000001]. Caused by: [org.apache.camel.http.base.HttpOperationFailedException - HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400]
org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:210)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:15:14,574 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 90DBF918A07AB50-0000000000000002 on ExchangeId: 90DBF918A07AB50-0000000000000002). Exhausted after delivery attempt: 1 caught: org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          780
	...
                                         route1/to1                     http://localhost:8080/API/messages/                           0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:210)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:15:14,575 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[90DBF918A07AB50-0000000000000002]. Caused by: [org.apache.camel.http.base.HttpOperationFailedException - HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400]
org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:210)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:15:16,012 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 90DBF918A07AB50-0000000000000003 on ExchangeId: 90DBF918A07AB50-0000000000000003). Exhausted after delivery attempt: 1 caught: org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          852
	...
                                         route1/to1                     http://localhost:8080/API/messages/                           0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:210)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:15:16,013 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[90DBF918A07AB50-0000000000000003]. Caused by: [org.apache.camel.http.base.HttpOperationFailedException - HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400]
org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:210)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:15:17,551 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 90DBF918A07AB50-0000000000000004 on ExchangeId: 90DBF918A07AB50-0000000000000004). Exhausted after delivery attempt: 1 caught: org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          964
	...
                                         route1/to1                     http://localhost:8080/API/messages/                           0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:210)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:15:17,551 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[90DBF918A07AB50-0000000000000004]. Caused by: [org.apache.camel.http.base.HttpOperationFailedException - HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400]
org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:210)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:15:18,911 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 90DBF918A07AB50-0000000000000005 on ExchangeId: 90DBF918A07AB50-0000000000000005). Exhausted after delivery attempt: 1 caught: org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          786
	...
                                         route1/to1                     http://localhost:8080/API/messages/                           0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:210)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:15:18,912 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[90DBF918A07AB50-0000000000000005]. Caused by: [org.apache.camel.http.base.HttpOperationFailedException - HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400]
org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:210)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:15:20,616 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 90DBF918A07AB50-0000000000000006 on ExchangeId: 90DBF918A07AB50-0000000000000006). Exhausted after delivery attempt: 1 caught: org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          798
	...
                                         route1/to1                     http://localhost:8080/API/messages/                           0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:210)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:15:20,616 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[90DBF918A07AB50-0000000000000006]. Caused by: [org.apache.camel.http.base.HttpOperationFailedException - HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400]
org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:210)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:15:20,673 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 19:15:20,681 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 19:15:20,681 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail://messages/list)
2024-05-18 19:15:20,684 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 10ms (uptime:12s)
2024-05-18 19:19:10,660 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 3832 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 19:19:10,664 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 19:19:11,469 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 19:19:11,477 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 19:19:11,478 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 19:19:11,522 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 19:19:11,522 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 821 ms
2024-05-18 19:19:12,326 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 19:19:12,546 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 19:19:12,587 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 19:19:12,588 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail://messages/list)
2024-05-18 19:19:12,588 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 39ms (build:0ms init:0ms start:39ms)
2024-05-18 19:19:12,591 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 2.187 seconds (process running for 2.67)
2024-05-18 19:19:15,321 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: D1D99DA45BEE6E3-0000000000000000 on ExchangeId: D1D99DA45BEE6E3-0000000000000000). Exhausted after delivery attempt: 1 caught: org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2         1226
	...
                                         route1/to1                     http://localhost:8080/API/messages/                           0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:210)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:19:15,323 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[D1D99DA45BEE6E3-0000000000000000]. Caused by: [org.apache.camel.http.base.HttpOperationFailedException - HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400]
org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:210)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:19:16,700 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: D1D99DA45BEE6E3-0000000000000001 on ExchangeId: D1D99DA45BEE6E3-0000000000000001). Exhausted after delivery attempt: 1 caught: org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          792
	...
                                         route1/to1                     http://localhost:8080/API/messages/                           0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:210)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:19:16,700 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[D1D99DA45BEE6E3-0000000000000001]. Caused by: [org.apache.camel.http.base.HttpOperationFailedException - HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400]
org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:210)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:19:17,366 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 19:19:17,376 INFO [Camel (camel-1) thread #2 - ShutdownTask] o.a.c.i.e.DefaultShutdownStrategy [DefaultShutdownStrategy.java:689] Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 45 seconds. Inflights per route: [route1 = 1]
2024-05-18 19:19:18,071 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: D1D99DA45BEE6E3-0000000000000002 on ExchangeId: D1D99DA45BEE6E3-0000000000000002). Exhausted after delivery attempt: 1 caught: org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          763
	...
                                         route1/to1                     http://localhost:8080/API/messages/                           0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:210)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:19:18,071 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[D1D99DA45BEE6E3-0000000000000002]. Caused by: [org.apache.camel.http.base.HttpOperationFailedException - HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400]
org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:210)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:19:18,385 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 19:19:18,386 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail://messages/list)
2024-05-18 19:19:18,391 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 1s25ms (uptime:5s)
2024-05-18 19:20:58,320 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 9532 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 19:20:58,323 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 19:20:59,198 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 19:20:59,206 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 19:20:59,207 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 19:20:59,257 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 19:20:59,257 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 900 ms
2024-05-18 19:21:00,155 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 19:21:00,350 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 19:21:00,388 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 19:21:00,388 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail://messages/list)
2024-05-18 19:21:00,388 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 37ms (build:0ms init:0ms start:37ms)
2024-05-18 19:21:00,391 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 2.302 seconds (process running for 2.81)
2024-05-18 19:21:11,445 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 19:21:11,451 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 19:21:11,451 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail://messages/list)
2024-05-18 19:21:11,454 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 8ms (uptime:11s)
2024-05-18 19:23:04,672 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 17436 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 19:23:04,676 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 19:23:05,578 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 19:23:05,589 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 19:23:05,589 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 19:23:05,636 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 19:23:05,636 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 917 ms
2024-05-18 19:23:06,453 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 19:23:06,681 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 19:23:06,717 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 19:23:06,718 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail://messages/list)
2024-05-18 19:23:06,718 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 35ms (build:0ms init:0ms start:35ms)
2024-05-18 19:23:06,720 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 2.306 seconds (process running for 2.801)
2024-05-18 19:23:11,939 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 19:23:11,944 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 19:23:11,944 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail://messages/list)
2024-05-18 19:23:11,946 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 7ms (uptime:5s)
2024-05-18 19:26:18,997 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 9612 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 19:26:18,999 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 19:26:19,920 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 19:26:19,930 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 19:26:19,930 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 19:26:19,999 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 19:26:20,000 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 963 ms
2024-05-18 19:26:20,887 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 19:26:21,125 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 19:26:21,167 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 19:26:21,167 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail://messages/list)
2024-05-18 19:26:21,167 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 39ms (build:0ms init:0ms start:39ms)
2024-05-18 19:26:21,170 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 2.434 seconds (process running for 2.949)
2024-05-18 19:26:23,337 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: C8C8A8FF964AA96-0000000000000000 on ExchangeId: C8C8A8FF964AA96-0000000000000000). Exhausted after delivery attempt: 1 caught: org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          674
	...
                                         route1/to1                     http://localhost:8080/API/messages/                           0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:210)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:26:23,340 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[C8C8A8FF964AA96-0000000000000000]. Caused by: [org.apache.camel.http.base.HttpOperationFailedException - HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400]
org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:210)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:26:24,371 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: C8C8A8FF964AA96-0000000000000001 on ExchangeId: C8C8A8FF964AA96-0000000000000001). Exhausted after delivery attempt: 1 caught: org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          445
	...
                                         route1/to1                     http://localhost:8080/API/messages/                           0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:210)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:26:24,372 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[C8C8A8FF964AA96-0000000000000001]. Caused by: [org.apache.camel.http.base.HttpOperationFailedException - HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400]
org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:210)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:26:25,364 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 19:26:25,370 INFO [Camel (camel-1) thread #2 - ShutdownTask] o.a.c.i.e.DefaultShutdownStrategy [DefaultShutdownStrategy.java:689] Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 45 seconds. Inflights per route: [route1 = 1]
2024-05-18 19:26:25,481 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: C8C8A8FF964AA96-0000000000000002 on ExchangeId: C8C8A8FF964AA96-0000000000000002). Exhausted after delivery attempt: 1 caught: org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          520
	...
                                         route1/to1                     http://localhost:8080/API/messages/                           0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:210)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:26:25,481 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[C8C8A8FF964AA96-0000000000000002]. Caused by: [org.apache.camel.http.base.HttpOperationFailedException - HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400]
org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:210)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:26:26,379 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 19:26:26,379 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail://messages/list)
2024-05-18 19:26:26,383 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 1s19ms (uptime:5s)
2024-05-18 19:28:13,156 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 1500 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 19:28:13,158 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 19:28:13,959 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 19:28:13,967 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 19:28:13,968 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 19:28:14,022 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 19:28:14,022 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 822 ms
2024-05-18 19:28:14,807 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 19:28:14,994 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 19:28:15,031 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 19:28:15,031 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail://messages/list)
2024-05-18 19:28:15,032 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 36ms (build:0ms init:0ms start:36ms)
2024-05-18 19:28:15,034 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 2.117 seconds (process running for 2.605)
2024-05-18 19:28:22,487 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 19:28:22,492 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 19:28:22,493 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail://messages/list)
2024-05-18 19:28:22,496 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 8ms (uptime:7s)
2024-05-18 19:30:55,504 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 13292 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 19:30:55,507 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 19:30:56,402 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 19:30:56,415 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 19:30:56,415 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 19:30:56,469 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 19:30:56,469 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 921 ms
2024-05-18 19:30:57,387 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 19:30:57,584 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 19:30:57,624 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 19:30:57,624 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail://messages/list)
2024-05-18 19:30:57,624 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 38ms (build:0ms init:0ms start:38ms)
2024-05-18 19:30:57,626 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 2.353 seconds (process running for 2.883)
2024-05-18 19:30:59,949 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 73A5E95B4D84A7F-0000000000000000 on ExchangeId: 73A5E95B4D84A7F-0000000000000000). Exhausted after delivery attempt: 1 caught: org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          771
	...
                                         route1/to1                     http://localhost:8080/API/messages/                           0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:210)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:30:59,953 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[73A5E95B4D84A7F-0000000000000000]. Caused by: [org.apache.camel.http.base.HttpOperationFailedException - HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400]
org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:210)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:31:00,996 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 73A5E95B4D84A7F-0000000000000001 on ExchangeId: 73A5E95B4D84A7F-0000000000000001). Exhausted after delivery attempt: 1 caught: org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          447
	...
                                         route1/to1                     http://localhost:8080/API/messages/                           0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:210)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:31:00,997 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[73A5E95B4D84A7F-0000000000000001]. Caused by: [org.apache.camel.http.base.HttpOperationFailedException - HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400]
org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:210)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:31:02,101 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 73A5E95B4D84A7F-0000000000000002 on ExchangeId: 73A5E95B4D84A7F-0000000000000002). Exhausted after delivery attempt: 1 caught: org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          445
	...
                                         route1/to1                     http://localhost:8080/API/messages/                           0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:210)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:31:02,102 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[73A5E95B4D84A7F-0000000000000002]. Caused by: [org.apache.camel.http.base.HttpOperationFailedException - HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400]
org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:210)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:31:03,082 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 73A5E95B4D84A7F-0000000000000003 on ExchangeId: 73A5E95B4D84A7F-0000000000000003). Exhausted after delivery attempt: 1 caught: org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          392
	...
                                         route1/to1                     http://localhost:8080/API/messages/                           0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:210)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:31:03,082 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[73A5E95B4D84A7F-0000000000000003]. Caused by: [org.apache.camel.http.base.HttpOperationFailedException - HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400]
org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 400
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:210)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:31:03,297 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 19:31:03,301 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 19:31:03,301 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail://messages/list)
2024-05-18 19:31:03,304 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 7ms (uptime:5s)
2024-05-18 19:32:31,254 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 4400 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 19:32:31,256 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 19:32:32,151 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 19:32:32,162 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 19:32:32,162 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 19:32:32,210 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 19:32:32,210 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 918 ms
2024-05-18 19:32:33,210 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 19:32:33,443 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 19:32:33,487 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 19:32:33,488 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail://messages/list)
2024-05-18 19:32:33,488 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 43ms (build:0ms init:0ms start:43ms)
2024-05-18 19:32:33,491 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 2.475 seconds (process running for 2.969)
2024-05-18 19:32:58,033 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 19:32:58,037 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 19:32:58,037 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail://messages/list)
2024-05-18 19:32:58,042 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 9ms (uptime:24s)
2024-05-18 19:33:01,055 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 4784 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 19:33:01,059 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 19:33:02,054 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 19:33:02,118 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 1005 ms
2024-05-18 19:33:02,984 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 19:33:03,184 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 19:33:03,221 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 19:33:03,221 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail://messages/list)
2024-05-18 19:33:03,221 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 35ms (build:0ms init:0ms start:35ms)
2024-05-18 19:33:03,223 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 2.451 seconds (process running for 3.533)
2024-05-18 19:33:03,229 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 19:33:03,233 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 19:33:03,233 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail://messages/list)
2024-05-18 19:33:03,235 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 5ms (uptime:0s)
2024-05-18 19:34:20,806 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 2140 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 19:34:20,808 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 19:34:21,532 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 19:34:21,540 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 19:34:21,540 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 19:34:21,579 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 19:34:21,579 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 739 ms
2024-05-18 19:34:22,359 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 19:34:22,545 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 19:34:22,582 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 19:34:22,582 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail://messages/list)
2024-05-18 19:34:22,582 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 36ms (build:0ms init:0ms start:36ms)
2024-05-18 19:34:22,584 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 1.978 seconds (process running for 2.448)
2024-05-18 19:34:47,538 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 19:34:47,546 INFO [Camel (camel-1) thread #2 - ShutdownTask] o.a.c.i.e.DefaultShutdownStrategy [DefaultShutdownStrategy.java:689] Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 45 seconds. Inflights per route: [route1 = 1]
2024-05-18 19:34:48,559 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 19:34:48,560 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail://messages/list)
2024-05-18 19:34:48,563 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 1s25ms (uptime:26s)
2024-05-18 19:37:48,683 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 544 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 19:37:48,685 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 19:37:49,554 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 19:37:49,564 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 19:37:49,566 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 19:37:49,614 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 19:37:49,614 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 897 ms
2024-05-18 19:37:50,536 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 19:37:50,744 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 19:37:50,788 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 19:37:50,788 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail://messages/list)
2024-05-18 19:37:50,788 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 42ms (build:0ms init:0ms start:42ms)
2024-05-18 19:37:50,791 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 2.31 seconds (process running for 2.849)
2024-05-18 19:37:52,449 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 23DB0321758C128-0000000000000000 on ExchangeId: 23DB0321758C128-0000000000000000). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          158
	...
                                         route1/process1                Processor@0x77fb1002                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:38)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:37:52,453 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[23DB0321758C128-0000000000000000]. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:38)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:37:53,440 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 23DB0321758C128-0000000000000001 on ExchangeId: 23DB0321758C128-0000000000000001). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          404
	...
                                         route1/process1                Processor@0x77fb1002                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:38)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:37:53,441 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[23DB0321758C128-0000000000000001]. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:38)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:37:54,174 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 23DB0321758C128-0000000000000002 on ExchangeId: 23DB0321758C128-0000000000000002). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          145
	...
                                         route1/process1                Processor@0x77fb1002                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:38)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:37:54,174 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[23DB0321758C128-0000000000000002]. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:38)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:37:54,924 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 23DB0321758C128-0000000000000003 on ExchangeId: 23DB0321758C128-0000000000000003). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          163
	...
                                         route1/process1                Processor@0x77fb1002                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:38)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:37:54,925 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[23DB0321758C128-0000000000000003]. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:38)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:37:54,925 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 19:37:54,930 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 19:37:54,930 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail://messages/list)
2024-05-18 19:37:54,932 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 6ms (uptime:4s)
2024-05-18 19:38:25,124 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 5968 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 19:38:25,127 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 19:38:25,920 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 19:38:25,928 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 19:38:25,929 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 19:38:25,974 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 19:38:25,975 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 813 ms
2024-05-18 19:38:26,735 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 19:38:26,801 WARN [main] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext [AbstractApplicationContext.java:632] Exception encountered during context initialization - cancelling refresh attempt: org.apache.camel.FailedToCreateRouteException: Failed to create route route1: Route(route1)[From[google-mail://messages/list?userId=xxxxxx because of Failed to resolve endpoint: google-mail://messages/list?format=FULL&scopes=https%3A%2F%2Fmail.google.com&userId=xxxxxx due to: Failed to resolve endpoint: google-mail://messages/list?format=FULL&scopes=https%3A%2F%2Fmail.google.com&userId=xxxxxx due to: There are 1 parameters that couldn't be set on the endpoint. Check the uri if the parameters are spelt correctly and that they are properties of the endpoint. Unknown parameters=[{format=FULL}]
2024-05-18 19:38:26,813 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Stopping service [Tomcat]
2024-05-18 19:38:26,818 INFO [main] o.s.b.a.l.ConditionEvaluationReportLogger [ConditionEvaluationReportLogger.java:82] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-05-18 19:38:26,828 ERROR [main] o.s.b.SpringApplication [SpringApplication.java:851] Application run failed
org.apache.camel.FailedToCreateRouteException: Failed to create route route1: Route(route1)[From[google-mail://messages/list?userId=xxxxxx because of Failed to resolve endpoint: google-mail://messages/list?format=FULL&scopes=https%3A%2F%2Fmail.google.com&userId=xxxxxx due to: Failed to resolve endpoint: google-mail://messages/list?format=FULL&scopes=https%3A%2F%2Fmail.google.com&userId=xxxxxx due to: There are 1 parameters that couldn't be set on the endpoint. Check the uri if the parameters are spelt correctly and that they are properties of the endpoint. Unknown parameters=[{format=FULL}]
	at org.apache.camel.reifier.RouteReifier.createRoute(RouteReifier.java:85)
	at org.apache.camel.impl.DefaultModelReifierFactory.createRoute(DefaultModelReifierFactory.java:49)
	at org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:728)
	at org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:594)
	at org.apache.camel.impl.engine.AbstractCamelContext.doInit(AbstractCamelContext.java:2391)
	at org.apache.camel.support.service.BaseService.init(BaseService.java:78)
	at org.apache.camel.impl.engine.AbstractCamelContext.init(AbstractCamelContext.java:2027)
	at org.apache.camel.support.service.BaseService.start(BaseService.java:105)
	at org.apache.camel.impl.engine.AbstractCamelContext.start(AbstractCamelContext.java:2046)
	at org.apache.camel.impl.DefaultCamelContext.start(DefaultCamelContext.java:212)
	at org.apache.camel.spring.SpringCamelContext.start(SpringCamelContext.java:119)
	at org.apache.camel.spring.SpringCamelContext.onApplicationEvent(SpringCamelContext.java:151)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:451)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:384)
	at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:984)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at it.polito.communicationmanager.CommunicationManagerApplicationKt.main(CommunicationManagerApplication.kt:13)
Caused by: org.apache.camel.ResolveEndpointFailedException: Failed to resolve endpoint: google-mail://messages/list?format=FULL&scopes=https%3A%2F%2Fmail.google.com&userId=xxxxxx due to: Failed to resolve endpoint: google-mail://messages/list?format=FULL&scopes=https%3A%2F%2Fmail.google.com&userId=xxxxxx due to: There are 1 parameters that couldn't be set on the endpoint. Check the uri if the parameters are spelt correctly and that they are properties of the endpoint. Unknown parameters=[{format=FULL}]
	at org.apache.camel.impl.engine.AbstractCamelContext.doGetEndpoint(AbstractCamelContext.java:831)
	at org.apache.camel.impl.engine.AbstractCamelContext.getEndpoint(AbstractCamelContext.java:731)
	at org.apache.camel.support.CamelContextHelper.getMandatoryEndpoint(CamelContextHelper.java:66)
	at org.apache.camel.reifier.AbstractReifier.resolveEndpoint(AbstractReifier.java:195)
	at org.apache.camel.reifier.RouteReifier.doCreateRoute(RouteReifier.java:99)
	at org.apache.camel.reifier.RouteReifier.createRoute(RouteReifier.java:79)
	... 25 common frames omitted
Caused by: org.apache.camel.ResolveEndpointFailedException: Failed to resolve endpoint: google-mail://messages/list?format=FULL&scopes=https%3A%2F%2Fmail.google.com&userId=xxxxxx due to: There are 1 parameters that couldn't be set on the endpoint. Check the uri if the parameters are spelt correctly and that they are properties of the endpoint. Unknown parameters=[{format=FULL}]
	at org.apache.camel.support.DefaultComponent.validateParameters(DefaultComponent.java:302)
	at org.apache.camel.support.DefaultComponent.createEndpoint(DefaultComponent.java:191)
	at org.apache.camel.impl.engine.AbstractCamelContext.doGetEndpoint(AbstractCamelContext.java:797)
	... 30 common frames omitted
2024-05-18 19:38:35,154 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 6436 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 19:38:35,157 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 19:38:35,932 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 19:38:35,939 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 19:38:35,939 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 19:38:35,984 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 19:38:35,984 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 793 ms
2024-05-18 19:38:36,801 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 19:38:36,875 WARN [main] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext [AbstractApplicationContext.java:632] Exception encountered during context initialization - cancelling refresh attempt: org.apache.camel.FailedToCreateRouteException: Failed to create route route1: Route(route1)[From[google-mail://messages/list?userId=xxxxxx because of Failed to resolve endpoint: google-mail://messages/list?format=full&scopes=https%3A%2F%2Fmail.google.com&userId=xxxxxx due to: Failed to resolve endpoint: google-mail://messages/list?format=full&scopes=https%3A%2F%2Fmail.google.com&userId=xxxxxx due to: There are 1 parameters that couldn't be set on the endpoint. Check the uri if the parameters are spelt correctly and that they are properties of the endpoint. Unknown parameters=[{format=full}]
2024-05-18 19:38:36,881 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Stopping service [Tomcat]
2024-05-18 19:38:36,885 INFO [main] o.s.b.a.l.ConditionEvaluationReportLogger [ConditionEvaluationReportLogger.java:82] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-05-18 19:38:36,898 ERROR [main] o.s.b.SpringApplication [SpringApplication.java:851] Application run failed
org.apache.camel.FailedToCreateRouteException: Failed to create route route1: Route(route1)[From[google-mail://messages/list?userId=xxxxxx because of Failed to resolve endpoint: google-mail://messages/list?format=full&scopes=https%3A%2F%2Fmail.google.com&userId=xxxxxx due to: Failed to resolve endpoint: google-mail://messages/list?format=full&scopes=https%3A%2F%2Fmail.google.com&userId=xxxxxx due to: There are 1 parameters that couldn't be set on the endpoint. Check the uri if the parameters are spelt correctly and that they are properties of the endpoint. Unknown parameters=[{format=full}]
	at org.apache.camel.reifier.RouteReifier.createRoute(RouteReifier.java:85)
	at org.apache.camel.impl.DefaultModelReifierFactory.createRoute(DefaultModelReifierFactory.java:49)
	at org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:728)
	at org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:594)
	at org.apache.camel.impl.engine.AbstractCamelContext.doInit(AbstractCamelContext.java:2391)
	at org.apache.camel.support.service.BaseService.init(BaseService.java:78)
	at org.apache.camel.impl.engine.AbstractCamelContext.init(AbstractCamelContext.java:2027)
	at org.apache.camel.support.service.BaseService.start(BaseService.java:105)
	at org.apache.camel.impl.engine.AbstractCamelContext.start(AbstractCamelContext.java:2046)
	at org.apache.camel.impl.DefaultCamelContext.start(DefaultCamelContext.java:212)
	at org.apache.camel.spring.SpringCamelContext.start(SpringCamelContext.java:119)
	at org.apache.camel.spring.SpringCamelContext.onApplicationEvent(SpringCamelContext.java:151)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:451)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:384)
	at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:984)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at it.polito.communicationmanager.CommunicationManagerApplicationKt.main(CommunicationManagerApplication.kt:13)
Caused by: org.apache.camel.ResolveEndpointFailedException: Failed to resolve endpoint: google-mail://messages/list?format=full&scopes=https%3A%2F%2Fmail.google.com&userId=xxxxxx due to: Failed to resolve endpoint: google-mail://messages/list?format=full&scopes=https%3A%2F%2Fmail.google.com&userId=xxxxxx due to: There are 1 parameters that couldn't be set on the endpoint. Check the uri if the parameters are spelt correctly and that they are properties of the endpoint. Unknown parameters=[{format=full}]
	at org.apache.camel.impl.engine.AbstractCamelContext.doGetEndpoint(AbstractCamelContext.java:831)
	at org.apache.camel.impl.engine.AbstractCamelContext.getEndpoint(AbstractCamelContext.java:731)
	at org.apache.camel.support.CamelContextHelper.getMandatoryEndpoint(CamelContextHelper.java:66)
	at org.apache.camel.reifier.AbstractReifier.resolveEndpoint(AbstractReifier.java:195)
	at org.apache.camel.reifier.RouteReifier.doCreateRoute(RouteReifier.java:99)
	at org.apache.camel.reifier.RouteReifier.createRoute(RouteReifier.java:79)
	... 25 common frames omitted
Caused by: org.apache.camel.ResolveEndpointFailedException: Failed to resolve endpoint: google-mail://messages/list?format=full&scopes=https%3A%2F%2Fmail.google.com&userId=xxxxxx due to: There are 1 parameters that couldn't be set on the endpoint. Check the uri if the parameters are spelt correctly and that they are properties of the endpoint. Unknown parameters=[{format=full}]
	at org.apache.camel.support.DefaultComponent.validateParameters(DefaultComponent.java:302)
	at org.apache.camel.support.DefaultComponent.createEndpoint(DefaultComponent.java:191)
	at org.apache.camel.impl.engine.AbstractCamelContext.doGetEndpoint(AbstractCamelContext.java:797)
	... 30 common frames omitted
2024-05-18 19:40:09,477 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 4548 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 19:40:09,480 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 19:40:10,233 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 19:40:10,240 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 19:40:10,241 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 19:40:10,287 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 19:40:10,287 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 767 ms
2024-05-18 19:40:11,046 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 19:40:11,242 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 19:40:11,283 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 19:40:11,283 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail://messages/list)
2024-05-18 19:40:11,284 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 40ms (build:0ms init:0ms start:40ms)
2024-05-18 19:40:11,285 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 2.059 seconds (process running for 2.554)
2024-05-18 19:40:12,880 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: E939089069E6199-0000000000000000 on ExchangeId: E939089069E6199-0000000000000000). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          175
	...
                                         route1/process1                Processor@0x1136122a                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:38)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:40:12,884 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[E939089069E6199-0000000000000000]. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:38)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:40:13,652 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: E939089069E6199-0000000000000001 on ExchangeId: E939089069E6199-0000000000000001). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          166
	...
                                         route1/process1                Processor@0x1136122a                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:38)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:40:13,652 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[E939089069E6199-0000000000000001]. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:38)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:40:14,443 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: E939089069E6199-0000000000000002 on ExchangeId: E939089069E6199-0000000000000002). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          187
	...
                                         route1/process1                Processor@0x1136122a                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:38)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:40:14,444 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[E939089069E6199-0000000000000002]. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:38)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:40:15,415 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: E939089069E6199-0000000000000003 on ExchangeId: E939089069E6199-0000000000000003). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          279
	...
                                         route1/process1                Processor@0x1136122a                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:38)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:40:15,416 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[E939089069E6199-0000000000000003]. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:38)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:40:16,178 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: E939089069E6199-0000000000000004 on ExchangeId: E939089069E6199-0000000000000004). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          150
	...
                                         route1/process1                Processor@0x1136122a                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:38)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:40:16,178 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[E939089069E6199-0000000000000004]. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:38)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:40:17,226 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: E939089069E6199-0000000000000005 on ExchangeId: E939089069E6199-0000000000000005). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          364
	...
                                         route1/process1                Processor@0x1136122a                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:38)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:40:17,226 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[E939089069E6199-0000000000000005]. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:38)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:40:17,963 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: E939089069E6199-0000000000000006 on ExchangeId: E939089069E6199-0000000000000006). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          153
	...
                                         route1/process1                Processor@0x1136122a                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:38)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:40:17,965 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[E939089069E6199-0000000000000006]. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:38)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:40:18,691 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: E939089069E6199-0000000000000007 on ExchangeId: E939089069E6199-0000000000000007). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          144
	...
                                         route1/process1                Processor@0x1136122a                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:38)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:40:18,692 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[E939089069E6199-0000000000000007]. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:38)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:40:19,419 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: E939089069E6199-0000000000000008 on ExchangeId: E939089069E6199-0000000000000008). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          142
	...
                                         route1/process1                Processor@0x1136122a                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:38)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:40:19,420 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[E939089069E6199-0000000000000008]. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:38)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:40:20,201 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: E939089069E6199-0000000000000009 on ExchangeId: E939089069E6199-0000000000000009). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          186
	...
                                         route1/process1                Processor@0x1136122a                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:38)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:40:20,201 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[E939089069E6199-0000000000000009]. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:38)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:40:20,935 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: E939089069E6199-000000000000000A on ExchangeId: E939089069E6199-000000000000000A). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          157
	...
                                         route1/process1                Processor@0x1136122a                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:38)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:40:20,936 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[E939089069E6199-000000000000000A]. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:38)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:40:21,717 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: E939089069E6199-000000000000000B on ExchangeId: E939089069E6199-000000000000000B). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          141
	...
                                         route1/process1                Processor@0x1136122a                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:38)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:40:21,718 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[E939089069E6199-000000000000000B]. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:38)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 19:40:21,887 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 19:40:21,892 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 19:40:21,892 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail://messages/list)
2024-05-18 19:40:21,895 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 7ms (uptime:10s)
2024-05-18 19:40:24,957 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 26420 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 19:40:24,959 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 19:40:25,708 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 19:40:25,715 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 19:40:25,716 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 19:40:25,768 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 19:40:25,769 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 773 ms
2024-05-18 19:40:26,543 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 19:40:26,730 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 19:40:26,764 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 19:40:26,765 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail://messages/list)
2024-05-18 19:40:26,765 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 33ms (build:0ms init:0ms start:33ms)
2024-05-18 19:40:26,768 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 2.052 seconds (process running for 2.565)
2024-05-18 19:40:32,972 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 19:40:32,980 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 19:40:32,980 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail://messages/list)
2024-05-18 19:40:32,983 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 10ms (uptime:6s)
2024-05-18 19:42:57,828 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 20204 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 19:42:57,831 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 19:42:58,621 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 19:42:58,629 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 19:42:58,629 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 19:42:58,689 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 19:42:58,689 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 823 ms
2024-05-18 19:42:59,474 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 19:42:59,703 WARN [main] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext [AbstractApplicationContext.java:632] Exception encountered during context initialization - cancelling refresh attempt: org.apache.camel.FailedToStartRouteException: Failed to start route route1 because of Missing properties for messages/get, need one or more from [id]
2024-05-18 19:42:59,711 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Stopping service [Tomcat]
2024-05-18 19:42:59,717 INFO [main] o.s.b.a.l.ConditionEvaluationReportLogger [ConditionEvaluationReportLogger.java:82] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-05-18 19:42:59,732 ERROR [main] o.s.b.SpringApplication [SpringApplication.java:851] Application run failed
org.apache.camel.FailedToStartRouteException: Failed to start route route1 because of Missing properties for messages/get, need one or more from [id]
	at org.apache.camel.impl.engine.RouteService.setUp(RouteService.java:131)
	at org.apache.camel.impl.engine.InternalRouteStartupManager.doInitRoutes(InternalRouteStartupManager.java:89)
	at org.apache.camel.impl.engine.AbstractCamelContext.doInit(AbstractCamelContext.java:2393)
	at org.apache.camel.support.service.BaseService.init(BaseService.java:78)
	at org.apache.camel.impl.engine.AbstractCamelContext.init(AbstractCamelContext.java:2027)
	at org.apache.camel.support.service.BaseService.start(BaseService.java:105)
	at org.apache.camel.impl.engine.AbstractCamelContext.start(AbstractCamelContext.java:2046)
	at org.apache.camel.impl.DefaultCamelContext.start(DefaultCamelContext.java:212)
	at org.apache.camel.spring.SpringCamelContext.start(SpringCamelContext.java:119)
	at org.apache.camel.spring.SpringCamelContext.onApplicationEvent(SpringCamelContext.java:151)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:451)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:384)
	at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:984)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at it.polito.communicationmanager.CommunicationManagerApplicationKt.main(CommunicationManagerApplication.kt:13)
Caused by: java.lang.IllegalArgumentException: Missing properties for messages/get, need one or more from [id]
	at org.apache.camel.support.component.ApiConsumerHelper.findMethod(ApiConsumerHelper.java:64)
	at org.apache.camel.support.component.AbstractApiConsumer.<init>(AbstractApiConsumer.java:48)
	at org.apache.camel.component.google.mail.GoogleMailConsumer.<init>(GoogleMailConsumer.java:36)
	at org.apache.camel.component.google.mail.GoogleMailEndpoint.createConsumer(GoogleMailEndpoint.java:71)
	at org.apache.camel.impl.engine.DefaultRoute.gatherRootServices(DefaultRoute.java:655)
	at org.apache.camel.impl.engine.DefaultRoute.gatherServices(DefaultRoute.java:639)
	at org.apache.camel.impl.engine.DefaultRoute.initializeServices(DefaultRoute.java:224)
	at org.apache.camel.impl.engine.RouteService.doSetup(RouteService.java:150)
	at org.apache.camel.impl.engine.RouteService.setUp(RouteService.java:129)
	... 23 common frames omitted
2024-05-18 19:43:58,534 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 11784 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 19:43:58,536 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 19:43:59,325 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 19:43:59,334 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 19:43:59,335 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 19:43:59,377 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 19:43:59,377 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 797 ms
2024-05-18 19:44:00,304 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 19:44:00,509 WARN [main] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext [AbstractApplicationContext.java:632] Exception encountered during context initialization - cancelling refresh attempt: org.apache.camel.FailedToStartRouteException: Failed to start route route1 because of Missing properties for messages/get, need one or more from [id]
2024-05-18 19:44:00,515 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Stopping service [Tomcat]
2024-05-18 19:44:00,520 INFO [main] o.s.b.a.l.ConditionEvaluationReportLogger [ConditionEvaluationReportLogger.java:82] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-05-18 19:44:00,533 ERROR [main] o.s.b.SpringApplication [SpringApplication.java:851] Application run failed
org.apache.camel.FailedToStartRouteException: Failed to start route route1 because of Missing properties for messages/get, need one or more from [id]
	at org.apache.camel.impl.engine.RouteService.setUp(RouteService.java:131)
	at org.apache.camel.impl.engine.InternalRouteStartupManager.doInitRoutes(InternalRouteStartupManager.java:89)
	at org.apache.camel.impl.engine.AbstractCamelContext.doInit(AbstractCamelContext.java:2393)
	at org.apache.camel.support.service.BaseService.init(BaseService.java:78)
	at org.apache.camel.impl.engine.AbstractCamelContext.init(AbstractCamelContext.java:2027)
	at org.apache.camel.support.service.BaseService.start(BaseService.java:105)
	at org.apache.camel.impl.engine.AbstractCamelContext.start(AbstractCamelContext.java:2046)
	at org.apache.camel.impl.DefaultCamelContext.start(DefaultCamelContext.java:212)
	at org.apache.camel.spring.SpringCamelContext.start(SpringCamelContext.java:119)
	at org.apache.camel.spring.SpringCamelContext.onApplicationEvent(SpringCamelContext.java:151)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:451)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:384)
	at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:984)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at it.polito.communicationmanager.CommunicationManagerApplicationKt.main(CommunicationManagerApplication.kt:13)
Caused by: java.lang.IllegalArgumentException: Missing properties for messages/get, need one or more from [id]
	at org.apache.camel.support.component.ApiConsumerHelper.findMethod(ApiConsumerHelper.java:64)
	at org.apache.camel.support.component.AbstractApiConsumer.<init>(AbstractApiConsumer.java:48)
	at org.apache.camel.component.google.mail.GoogleMailConsumer.<init>(GoogleMailConsumer.java:36)
	at org.apache.camel.component.google.mail.GoogleMailEndpoint.createConsumer(GoogleMailEndpoint.java:71)
	at org.apache.camel.impl.engine.DefaultRoute.gatherRootServices(DefaultRoute.java:655)
	at org.apache.camel.impl.engine.DefaultRoute.gatherServices(DefaultRoute.java:639)
	at org.apache.camel.impl.engine.DefaultRoute.initializeServices(DefaultRoute.java:224)
	at org.apache.camel.impl.engine.RouteService.doSetup(RouteService.java:150)
	at org.apache.camel.impl.engine.RouteService.setUp(RouteService.java:129)
	... 23 common frames omitted
2024-05-18 19:44:59,034 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 25756 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 19:44:59,037 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 19:44:59,919 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 19:44:59,928 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 19:44:59,929 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 19:44:59,973 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 19:44:59,973 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 903 ms
2024-05-18 19:45:00,851 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 19:45:00,938 WARN [main] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext [AbstractApplicationContext.java:632] Exception encountered during context initialization - cancelling refresh attempt: org.apache.camel.FailedToCreateRouteException: Failed to create route route1: Route(route1)[From[google-mail://messages/get?userId=xxxxxx because of Failed to resolve endpoint: google-mail://messages/get?userId=xxxxxx&messageId={{messageId}}&scopes=https://mail.google.com due to: Property with key [messageId] not found in properties from text: google-mail://messages/get?userId=aw2g52024@gmail.com&messageId={{messageId}}&scopes=https://mail.google.com
2024-05-18 19:45:00,944 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Stopping service [Tomcat]
2024-05-18 19:45:00,950 INFO [main] o.s.b.a.l.ConditionEvaluationReportLogger [ConditionEvaluationReportLogger.java:82] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-05-18 19:45:00,963 ERROR [main] o.s.b.SpringApplication [SpringApplication.java:851] Application run failed
org.apache.camel.FailedToCreateRouteException: Failed to create route route1: Route(route1)[From[google-mail://messages/get?userId=xxxxxx because of Failed to resolve endpoint: google-mail://messages/get?userId=xxxxxx&messageId={{messageId}}&scopes=https://mail.google.com due to: Property with key [messageId] not found in properties from text: google-mail://messages/get?userId=aw2g52024@gmail.com&messageId={{messageId}}&scopes=https://mail.google.com
	at org.apache.camel.reifier.RouteReifier.createRoute(RouteReifier.java:85)
	at org.apache.camel.impl.DefaultModelReifierFactory.createRoute(DefaultModelReifierFactory.java:49)
	at org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:728)
	at org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:594)
	at org.apache.camel.impl.engine.AbstractCamelContext.doInit(AbstractCamelContext.java:2391)
	at org.apache.camel.support.service.BaseService.init(BaseService.java:78)
	at org.apache.camel.impl.engine.AbstractCamelContext.init(AbstractCamelContext.java:2027)
	at org.apache.camel.support.service.BaseService.start(BaseService.java:105)
	at org.apache.camel.impl.engine.AbstractCamelContext.start(AbstractCamelContext.java:2046)
	at org.apache.camel.impl.DefaultCamelContext.start(DefaultCamelContext.java:212)
	at org.apache.camel.spring.SpringCamelContext.start(SpringCamelContext.java:119)
	at org.apache.camel.spring.SpringCamelContext.onApplicationEvent(SpringCamelContext.java:151)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:451)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:384)
	at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:984)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at it.polito.communicationmanager.CommunicationManagerApplicationKt.main(CommunicationManagerApplication.kt:13)
Caused by: org.apache.camel.ResolveEndpointFailedException: Failed to resolve endpoint: google-mail://messages/get?userId=xxxxxx&messageId={{messageId}}&scopes=https://mail.google.com due to: Property with key [messageId] not found in properties from text: google-mail://messages/get?userId=aw2g52024@gmail.com&messageId={{messageId}}&scopes=https://mail.google.com
	at org.apache.camel.support.EndpointHelper.resolveEndpointUriPropertyPlaceholders(EndpointHelper.java:83)
	at org.apache.camel.impl.engine.AbstractCamelContext.doGetEndpoint(AbstractCamelContext.java:755)
	at org.apache.camel.impl.engine.AbstractCamelContext.getEndpoint(AbstractCamelContext.java:731)
	at org.apache.camel.support.CamelContextHelper.getMandatoryEndpoint(CamelContextHelper.java:66)
	at org.apache.camel.reifier.AbstractReifier.resolveEndpoint(AbstractReifier.java:195)
	at org.apache.camel.reifier.RouteReifier.doCreateRoute(RouteReifier.java:99)
	at org.apache.camel.reifier.RouteReifier.createRoute(RouteReifier.java:79)
	... 25 common frames omitted
Caused by: java.lang.IllegalArgumentException: Property with key [messageId] not found in properties from text: google-mail://messages/get?userId=aw2g52024@gmail.com&messageId={{messageId}}&scopes=https://mail.google.com
	at org.apache.camel.component.properties.DefaultPropertiesParser$ParsingContext.getPropertyValue(DefaultPropertiesParser.java:373)
	at org.apache.camel.component.properties.DefaultPropertiesParser$ParsingContext.readProperty(DefaultPropertiesParser.java:232)
	at org.apache.camel.component.properties.DefaultPropertiesParser$ParsingContext.doParseNested(DefaultPropertiesParser.java:169)
	at org.apache.camel.component.properties.DefaultPropertiesParser$ParsingContext.parse(DefaultPropertiesParser.java:118)
	at org.apache.camel.component.properties.DefaultPropertiesParser.parseUri(DefaultPropertiesParser.java:70)
	at org.apache.camel.component.properties.PropertiesComponent.parseUri(PropertiesComponent.java:320)
	at org.apache.camel.component.properties.PropertiesComponent.parseUri(PropertiesComponent.java:171)
	at org.apache.camel.impl.engine.DefaultCamelContextExtension.resolvePropertyPlaceholders(DefaultCamelContextExtension.java:326)
	at org.apache.camel.support.EndpointHelper.resolveEndpointUriPropertyPlaceholders(EndpointHelper.java:71)
	... 31 common frames omitted
2024-05-18 19:45:44,972 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 19724 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 19:45:44,974 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 19:45:45,734 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 19:45:45,744 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 19:45:45,744 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 19:45:45,786 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 19:45:45,786 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 778 ms
2024-05-18 19:45:46,549 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 19:45:46,618 WARN [main] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext [AbstractApplicationContext.java:632] Exception encountered during context initialization - cancelling refresh attempt: org.apache.camel.FailedToCreateRouteException: Failed to create route route1: Route(route1)[From[google-mail://messages/get?userId=xxxxxx because of Failed to resolve endpoint: google-mail://messages/get?userId=xxxxxx&messageId={{messageId}}&scopes=https://mail.google.com due to: Property with key [messageId] not found in properties from text: google-mail://messages/get?userId=aw2g52024@gmail.com&messageId={{messageId}}&scopes=https://mail.google.com
2024-05-18 19:45:46,624 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Stopping service [Tomcat]
2024-05-18 19:45:46,628 INFO [main] o.s.b.a.l.ConditionEvaluationReportLogger [ConditionEvaluationReportLogger.java:82] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-05-18 19:45:46,639 ERROR [main] o.s.b.SpringApplication [SpringApplication.java:851] Application run failed
org.apache.camel.FailedToCreateRouteException: Failed to create route route1: Route(route1)[From[google-mail://messages/get?userId=xxxxxx because of Failed to resolve endpoint: google-mail://messages/get?userId=xxxxxx&messageId={{messageId}}&scopes=https://mail.google.com due to: Property with key [messageId] not found in properties from text: google-mail://messages/get?userId=aw2g52024@gmail.com&messageId={{messageId}}&scopes=https://mail.google.com
	at org.apache.camel.reifier.RouteReifier.createRoute(RouteReifier.java:85)
	at org.apache.camel.impl.DefaultModelReifierFactory.createRoute(DefaultModelReifierFactory.java:49)
	at org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:728)
	at org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:594)
	at org.apache.camel.impl.engine.AbstractCamelContext.doInit(AbstractCamelContext.java:2391)
	at org.apache.camel.support.service.BaseService.init(BaseService.java:78)
	at org.apache.camel.impl.engine.AbstractCamelContext.init(AbstractCamelContext.java:2027)
	at org.apache.camel.support.service.BaseService.start(BaseService.java:105)
	at org.apache.camel.impl.engine.AbstractCamelContext.start(AbstractCamelContext.java:2046)
	at org.apache.camel.impl.DefaultCamelContext.start(DefaultCamelContext.java:212)
	at org.apache.camel.spring.SpringCamelContext.start(SpringCamelContext.java:119)
	at org.apache.camel.spring.SpringCamelContext.onApplicationEvent(SpringCamelContext.java:151)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:451)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:384)
	at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:984)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at it.polito.communicationmanager.CommunicationManagerApplicationKt.main(CommunicationManagerApplication.kt:13)
Caused by: org.apache.camel.ResolveEndpointFailedException: Failed to resolve endpoint: google-mail://messages/get?userId=xxxxxx&messageId={{messageId}}&scopes=https://mail.google.com due to: Property with key [messageId] not found in properties from text: google-mail://messages/get?userId=aw2g52024@gmail.com&messageId={{messageId}}&scopes=https://mail.google.com
	at org.apache.camel.support.EndpointHelper.resolveEndpointUriPropertyPlaceholders(EndpointHelper.java:83)
	at org.apache.camel.impl.engine.AbstractCamelContext.doGetEndpoint(AbstractCamelContext.java:755)
	at org.apache.camel.impl.engine.AbstractCamelContext.getEndpoint(AbstractCamelContext.java:731)
	at org.apache.camel.support.CamelContextHelper.getMandatoryEndpoint(CamelContextHelper.java:66)
	at org.apache.camel.reifier.AbstractReifier.resolveEndpoint(AbstractReifier.java:195)
	at org.apache.camel.reifier.RouteReifier.doCreateRoute(RouteReifier.java:99)
	at org.apache.camel.reifier.RouteReifier.createRoute(RouteReifier.java:79)
	... 25 common frames omitted
Caused by: java.lang.IllegalArgumentException: Property with key [messageId] not found in properties from text: google-mail://messages/get?userId=aw2g52024@gmail.com&messageId={{messageId}}&scopes=https://mail.google.com
	at org.apache.camel.component.properties.DefaultPropertiesParser$ParsingContext.getPropertyValue(DefaultPropertiesParser.java:373)
	at org.apache.camel.component.properties.DefaultPropertiesParser$ParsingContext.readProperty(DefaultPropertiesParser.java:232)
	at org.apache.camel.component.properties.DefaultPropertiesParser$ParsingContext.doParseNested(DefaultPropertiesParser.java:169)
	at org.apache.camel.component.properties.DefaultPropertiesParser$ParsingContext.parse(DefaultPropertiesParser.java:118)
	at org.apache.camel.component.properties.DefaultPropertiesParser.parseUri(DefaultPropertiesParser.java:70)
	at org.apache.camel.component.properties.PropertiesComponent.parseUri(PropertiesComponent.java:320)
	at org.apache.camel.component.properties.PropertiesComponent.parseUri(PropertiesComponent.java:171)
	at org.apache.camel.impl.engine.DefaultCamelContextExtension.resolvePropertyPlaceholders(DefaultCamelContextExtension.java:326)
	at org.apache.camel.support.EndpointHelper.resolveEndpointUriPropertyPlaceholders(EndpointHelper.java:71)
	... 31 common frames omitted
2024-05-18 19:46:22,118 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 15176 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 19:46:22,121 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 19:46:22,958 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 19:46:22,967 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 19:46:22,968 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 19:46:23,017 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 19:46:23,017 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 859 ms
2024-05-18 19:46:23,790 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 19:46:23,854 WARN [main] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext [AbstractApplicationContext.java:632] Exception encountered during context initialization - cancelling refresh attempt: org.apache.camel.FailedToCreateRouteException: Failed to create route route1: Route(route1)[From[google-mail://messages/get?userId=xxxxxx because of Failed to resolve endpoint: google-mail://messages/get?userId=xxxxxx&messageId={{messageId}}&scopes=https://mail.google.com due to: Property with key [messageId] not found in properties from text: google-mail://messages/get?userId=aw2g52024@gmail.com&messageId={{messageId}}&scopes=https://mail.google.com
2024-05-18 19:46:23,860 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Stopping service [Tomcat]
2024-05-18 19:46:23,863 INFO [main] o.s.b.a.l.ConditionEvaluationReportLogger [ConditionEvaluationReportLogger.java:82] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-05-18 19:46:23,873 ERROR [main] o.s.b.SpringApplication [SpringApplication.java:851] Application run failed
org.apache.camel.FailedToCreateRouteException: Failed to create route route1: Route(route1)[From[google-mail://messages/get?userId=xxxxxx because of Failed to resolve endpoint: google-mail://messages/get?userId=xxxxxx&messageId={{messageId}}&scopes=https://mail.google.com due to: Property with key [messageId] not found in properties from text: google-mail://messages/get?userId=aw2g52024@gmail.com&messageId={{messageId}}&scopes=https://mail.google.com
	at org.apache.camel.reifier.RouteReifier.createRoute(RouteReifier.java:85)
	at org.apache.camel.impl.DefaultModelReifierFactory.createRoute(DefaultModelReifierFactory.java:49)
	at org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:728)
	at org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:594)
	at org.apache.camel.impl.engine.AbstractCamelContext.doInit(AbstractCamelContext.java:2391)
	at org.apache.camel.support.service.BaseService.init(BaseService.java:78)
	at org.apache.camel.impl.engine.AbstractCamelContext.init(AbstractCamelContext.java:2027)
	at org.apache.camel.support.service.BaseService.start(BaseService.java:105)
	at org.apache.camel.impl.engine.AbstractCamelContext.start(AbstractCamelContext.java:2046)
	at org.apache.camel.impl.DefaultCamelContext.start(DefaultCamelContext.java:212)
	at org.apache.camel.spring.SpringCamelContext.start(SpringCamelContext.java:119)
	at org.apache.camel.spring.SpringCamelContext.onApplicationEvent(SpringCamelContext.java:151)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:451)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:384)
	at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:984)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at it.polito.communicationmanager.CommunicationManagerApplicationKt.main(CommunicationManagerApplication.kt:13)
Caused by: org.apache.camel.ResolveEndpointFailedException: Failed to resolve endpoint: google-mail://messages/get?userId=xxxxxx&messageId={{messageId}}&scopes=https://mail.google.com due to: Property with key [messageId] not found in properties from text: google-mail://messages/get?userId=aw2g52024@gmail.com&messageId={{messageId}}&scopes=https://mail.google.com
	at org.apache.camel.support.EndpointHelper.resolveEndpointUriPropertyPlaceholders(EndpointHelper.java:83)
	at org.apache.camel.impl.engine.AbstractCamelContext.doGetEndpoint(AbstractCamelContext.java:755)
	at org.apache.camel.impl.engine.AbstractCamelContext.getEndpoint(AbstractCamelContext.java:731)
	at org.apache.camel.support.CamelContextHelper.getMandatoryEndpoint(CamelContextHelper.java:66)
	at org.apache.camel.reifier.AbstractReifier.resolveEndpoint(AbstractReifier.java:195)
	at org.apache.camel.reifier.RouteReifier.doCreateRoute(RouteReifier.java:99)
	at org.apache.camel.reifier.RouteReifier.createRoute(RouteReifier.java:79)
	... 25 common frames omitted
Caused by: java.lang.IllegalArgumentException: Property with key [messageId] not found in properties from text: google-mail://messages/get?userId=aw2g52024@gmail.com&messageId={{messageId}}&scopes=https://mail.google.com
	at org.apache.camel.component.properties.DefaultPropertiesParser$ParsingContext.getPropertyValue(DefaultPropertiesParser.java:373)
	at org.apache.camel.component.properties.DefaultPropertiesParser$ParsingContext.readProperty(DefaultPropertiesParser.java:232)
	at org.apache.camel.component.properties.DefaultPropertiesParser$ParsingContext.doParseNested(DefaultPropertiesParser.java:169)
	at org.apache.camel.component.properties.DefaultPropertiesParser$ParsingContext.parse(DefaultPropertiesParser.java:118)
	at org.apache.camel.component.properties.DefaultPropertiesParser.parseUri(DefaultPropertiesParser.java:70)
	at org.apache.camel.component.properties.PropertiesComponent.parseUri(PropertiesComponent.java:320)
	at org.apache.camel.component.properties.PropertiesComponent.parseUri(PropertiesComponent.java:171)
	at org.apache.camel.impl.engine.DefaultCamelContextExtension.resolvePropertyPlaceholders(DefaultCamelContextExtension.java:326)
	at org.apache.camel.support.EndpointHelper.resolveEndpointUriPropertyPlaceholders(EndpointHelper.java:71)
	... 31 common frames omitted
2024-05-18 19:47:17,043 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 26152 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 19:47:17,046 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 19:47:17,831 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 19:47:17,841 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 19:47:17,841 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 19:47:17,892 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 19:47:17,893 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 807 ms
2024-05-18 19:47:18,712 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 19:47:18,902 WARN [main] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext [AbstractApplicationContext.java:632] Exception encountered during context initialization - cancelling refresh attempt: org.apache.camel.FailedToStartRouteException: Failed to start route route1 because of Missing properties for messages/get, need one or more from [id]
2024-05-18 19:47:18,908 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Stopping service [Tomcat]
2024-05-18 19:47:18,913 INFO [main] o.s.b.a.l.ConditionEvaluationReportLogger [ConditionEvaluationReportLogger.java:82] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-05-18 19:47:18,927 ERROR [main] o.s.b.SpringApplication [SpringApplication.java:851] Application run failed
org.apache.camel.FailedToStartRouteException: Failed to start route route1 because of Missing properties for messages/get, need one or more from [id]
	at org.apache.camel.impl.engine.RouteService.setUp(RouteService.java:131)
	at org.apache.camel.impl.engine.InternalRouteStartupManager.doInitRoutes(InternalRouteStartupManager.java:89)
	at org.apache.camel.impl.engine.AbstractCamelContext.doInit(AbstractCamelContext.java:2393)
	at org.apache.camel.support.service.BaseService.init(BaseService.java:78)
	at org.apache.camel.impl.engine.AbstractCamelContext.init(AbstractCamelContext.java:2027)
	at org.apache.camel.support.service.BaseService.start(BaseService.java:105)
	at org.apache.camel.impl.engine.AbstractCamelContext.start(AbstractCamelContext.java:2046)
	at org.apache.camel.impl.DefaultCamelContext.start(DefaultCamelContext.java:212)
	at org.apache.camel.spring.SpringCamelContext.start(SpringCamelContext.java:119)
	at org.apache.camel.spring.SpringCamelContext.onApplicationEvent(SpringCamelContext.java:151)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:451)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:384)
	at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:984)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at it.polito.communicationmanager.CommunicationManagerApplicationKt.main(CommunicationManagerApplication.kt:13)
Caused by: java.lang.IllegalArgumentException: Missing properties for messages/get, need one or more from [id]
	at org.apache.camel.support.component.ApiConsumerHelper.findMethod(ApiConsumerHelper.java:64)
	at org.apache.camel.support.component.AbstractApiConsumer.<init>(AbstractApiConsumer.java:48)
	at org.apache.camel.component.google.mail.GoogleMailConsumer.<init>(GoogleMailConsumer.java:36)
	at org.apache.camel.component.google.mail.GoogleMailEndpoint.createConsumer(GoogleMailEndpoint.java:71)
	at org.apache.camel.impl.engine.DefaultRoute.gatherRootServices(DefaultRoute.java:655)
	at org.apache.camel.impl.engine.DefaultRoute.gatherServices(DefaultRoute.java:639)
	at org.apache.camel.impl.engine.DefaultRoute.initializeServices(DefaultRoute.java:224)
	at org.apache.camel.impl.engine.RouteService.doSetup(RouteService.java:150)
	at org.apache.camel.impl.engine.RouteService.setUp(RouteService.java:129)
	... 23 common frames omitted
2024-05-18 19:48:29,132 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 25552 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 19:48:29,137 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 19:48:29,913 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 19:48:29,921 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 19:48:29,921 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 19:48:29,977 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 19:48:29,978 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 807 ms
2024-05-18 19:48:30,837 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 19:48:31,047 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 19:48:31,087 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 19:48:31,087 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail://messages/list)
2024-05-18 19:48:31,087 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 38ms (build:0ms init:0ms start:38ms)
2024-05-18 19:48:31,089 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 2.226 seconds (process running for 2.756)
2024-05-18 19:48:40,935 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 19:48:40,939 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 19:48:40,939 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail://messages/list)
2024-05-18 19:48:40,941 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 5ms (uptime:9s)
2024-05-18 19:53:16,082 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 6020 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 19:53:16,085 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 19:53:16,835 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 19:53:16,843 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 19:53:16,843 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 19:53:16,883 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 19:53:16,883 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 765 ms
2024-05-18 19:53:17,651 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 19:53:17,717 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 19:53:17,728 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 19:53:17,728 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail://messages/list)
2024-05-18 19:53:17,729 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 10ms (build:0ms init:0ms start:10ms)
2024-05-18 19:53:17,731 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 1.873 seconds (process running for 2.345)
2024-05-18 19:53:46,175 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 19:53:46,179 INFO [Camel (camel-1) thread #2 - ShutdownTask] o.a.c.i.e.DefaultShutdownStrategy [DefaultShutdownStrategy.java:689] Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 45 seconds. Inflights per route: [route1 = 1]
2024-05-18 19:53:47,189 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 19:53:47,189 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail://messages/list)
2024-05-18 19:53:47,195 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 1s20ms (uptime:29s)
2024-05-18 19:54:12,079 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 9148 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 19:54:12,081 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 19:54:12,901 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 19:54:12,909 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 19:54:12,909 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 19:54:12,956 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 19:54:12,956 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 840 ms
2024-05-18 19:54:13,795 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 19:54:13,876 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 19:54:13,886 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 19:54:13,886 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail://messages/list)
2024-05-18 19:54:13,886 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 9ms (build:0ms init:0ms start:9ms)
2024-05-18 19:54:13,889 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 2.031 seconds (process running for 2.471)
2024-05-18 19:54:33,232 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 19:54:33,236 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 19:54:33,236 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail://messages/list)
2024-05-18 19:54:33,238 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 6ms (uptime:19s)
2024-05-18 19:55:28,624 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 2828 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 19:55:28,626 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 19:55:29,354 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 19:55:29,373 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 19:55:29,374 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 19:55:29,415 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 19:55:29,416 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 755 ms
2024-05-18 19:55:30,184 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 19:55:30,278 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 19:55:30,293 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 19:55:30,293 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail://messages/list)
2024-05-18 19:55:30,293 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 13ms (build:0ms init:0ms start:13ms)
2024-05-18 19:55:30,296 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 1.876 seconds (process running for 2.362)
2024-05-18 19:55:32,168 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 1C61C68C2DE4E4A-0000000000000000 on ExchangeId: 1C61C68C2DE4E4A-0000000000000000). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          213
	...
                                         route1/process1                Processor@0x78e97d4d                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBody(DefaultProducerTemplate.java:414)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:67)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.InvalidPayloadException: No body available of type: java.io.InputStream but has type: it.polito.communicationmanager.dtos.CreateMessageDTO on: Message. Caused by: No type converter available to convert from type: it.polito.communicationmanager.dtos.CreateMessageDTO to the required type: java.io.InputStream. Exchange[]. Caused by: [org.apache.camel.NoTypeConversionAvailableException - No type converter available to convert from type: it.polito.communicationmanager.dtos.CreateMessageDTO to the required type: java.io.InputStream]
	at org.apache.camel.support.MessageSupport.getMandatoryBody(MessageSupport.java:128)
	at org.apache.camel.component.http.HttpProducer.createRequestEntity(HttpProducer.java:745)
	at org.apache.camel.component.http.HttpProducer.createMethod(HttpProducer.java:632)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:162)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBody(DefaultProducerTemplate.java:413)
	... 25 common frames omitted
Caused by: org.apache.camel.NoTypeConversionAvailableException: No type converter available to convert from type: it.polito.communicationmanager.dtos.CreateMessageDTO to the required type: java.io.InputStream
	at org.apache.camel.impl.converter.CoreTypeConverterRegistry.mandatoryConvertTo(CoreTypeConverterRegistry.java:199)
	at org.apache.camel.support.MessageSupport.getMandatoryBody(MessageSupport.java:126)
	... 38 common frames omitted
2024-05-18 19:55:32,170 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[1C61C68C2DE4E4A-0000000000000000]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBody(DefaultProducerTemplate.java:414)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:67)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.InvalidPayloadException: No body available of type: java.io.InputStream but has type: it.polito.communicationmanager.dtos.CreateMessageDTO on: Message. Caused by: No type converter available to convert from type: it.polito.communicationmanager.dtos.CreateMessageDTO to the required type: java.io.InputStream. Exchange[]. Caused by: [org.apache.camel.NoTypeConversionAvailableException - No type converter available to convert from type: it.polito.communicationmanager.dtos.CreateMessageDTO to the required type: java.io.InputStream]
	at org.apache.camel.support.MessageSupport.getMandatoryBody(MessageSupport.java:128)
	at org.apache.camel.component.http.HttpProducer.createRequestEntity(HttpProducer.java:745)
	at org.apache.camel.component.http.HttpProducer.createMethod(HttpProducer.java:632)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:162)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBody(DefaultProducerTemplate.java:413)
	... 25 common frames omitted
Caused by: org.apache.camel.NoTypeConversionAvailableException: No type converter available to convert from type: it.polito.communicationmanager.dtos.CreateMessageDTO to the required type: java.io.InputStream
	at org.apache.camel.impl.converter.CoreTypeConverterRegistry.mandatoryConvertTo(CoreTypeConverterRegistry.java:199)
	at org.apache.camel.support.MessageSupport.getMandatoryBody(MessageSupport.java:126)
	... 38 common frames omitted
2024-05-18 19:55:32,917 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 1C61C68C2DE4E4A-0000000000000001 on ExchangeId: 1C61C68C2DE4E4A-0000000000000001). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          143
	...
                                         route1/process1                Processor@0x78e97d4d                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBody(DefaultProducerTemplate.java:414)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:67)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.InvalidPayloadException: No body available of type: java.io.InputStream but has type: it.polito.communicationmanager.dtos.CreateMessageDTO on: Message. Caused by: No type converter available to convert from type: it.polito.communicationmanager.dtos.CreateMessageDTO to the required type: java.io.InputStream. Exchange[]. Caused by: [org.apache.camel.NoTypeConversionAvailableException - No type converter available to convert from type: it.polito.communicationmanager.dtos.CreateMessageDTO to the required type: java.io.InputStream]
	at org.apache.camel.support.MessageSupport.getMandatoryBody(MessageSupport.java:128)
	at org.apache.camel.component.http.HttpProducer.createRequestEntity(HttpProducer.java:745)
	at org.apache.camel.component.http.HttpProducer.createMethod(HttpProducer.java:632)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:162)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBody(DefaultProducerTemplate.java:413)
	... 25 common frames omitted
Caused by: org.apache.camel.NoTypeConversionAvailableException: No type converter available to convert from type: it.polito.communicationmanager.dtos.CreateMessageDTO to the required type: java.io.InputStream
	at org.apache.camel.impl.converter.CoreTypeConverterRegistry.mandatoryConvertTo(CoreTypeConverterRegistry.java:199)
	at org.apache.camel.support.MessageSupport.getMandatoryBody(MessageSupport.java:126)
	... 38 common frames omitted
2024-05-18 19:55:32,918 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[1C61C68C2DE4E4A-0000000000000001]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBody(DefaultProducerTemplate.java:414)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:67)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.InvalidPayloadException: No body available of type: java.io.InputStream but has type: it.polito.communicationmanager.dtos.CreateMessageDTO on: Message. Caused by: No type converter available to convert from type: it.polito.communicationmanager.dtos.CreateMessageDTO to the required type: java.io.InputStream. Exchange[]. Caused by: [org.apache.camel.NoTypeConversionAvailableException - No type converter available to convert from type: it.polito.communicationmanager.dtos.CreateMessageDTO to the required type: java.io.InputStream]
	at org.apache.camel.support.MessageSupport.getMandatoryBody(MessageSupport.java:128)
	at org.apache.camel.component.http.HttpProducer.createRequestEntity(HttpProducer.java:745)
	at org.apache.camel.component.http.HttpProducer.createMethod(HttpProducer.java:632)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:162)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBody(DefaultProducerTemplate.java:413)
	... 25 common frames omitted
Caused by: org.apache.camel.NoTypeConversionAvailableException: No type converter available to convert from type: it.polito.communicationmanager.dtos.CreateMessageDTO to the required type: java.io.InputStream
	at org.apache.camel.impl.converter.CoreTypeConverterRegistry.mandatoryConvertTo(CoreTypeConverterRegistry.java:199)
	at org.apache.camel.support.MessageSupport.getMandatoryBody(MessageSupport.java:126)
	... 38 common frames omitted
2024-05-18 19:55:33,661 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 1C61C68C2DE4E4A-0000000000000002 on ExchangeId: 1C61C68C2DE4E4A-0000000000000002). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          156
	...
                                         route1/process1                Processor@0x78e97d4d                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBody(DefaultProducerTemplate.java:414)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:67)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.InvalidPayloadException: No body available of type: java.io.InputStream but has type: it.polito.communicationmanager.dtos.CreateMessageDTO on: Message. Caused by: No type converter available to convert from type: it.polito.communicationmanager.dtos.CreateMessageDTO to the required type: java.io.InputStream. Exchange[]. Caused by: [org.apache.camel.NoTypeConversionAvailableException - No type converter available to convert from type: it.polito.communicationmanager.dtos.CreateMessageDTO to the required type: java.io.InputStream]
	at org.apache.camel.support.MessageSupport.getMandatoryBody(MessageSupport.java:128)
	at org.apache.camel.component.http.HttpProducer.createRequestEntity(HttpProducer.java:745)
	at org.apache.camel.component.http.HttpProducer.createMethod(HttpProducer.java:632)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:162)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBody(DefaultProducerTemplate.java:413)
	... 25 common frames omitted
Caused by: org.apache.camel.NoTypeConversionAvailableException: No type converter available to convert from type: it.polito.communicationmanager.dtos.CreateMessageDTO to the required type: java.io.InputStream
	at org.apache.camel.impl.converter.CoreTypeConverterRegistry.mandatoryConvertTo(CoreTypeConverterRegistry.java:199)
	at org.apache.camel.support.MessageSupport.getMandatoryBody(MessageSupport.java:126)
	... 38 common frames omitted
2024-05-18 19:55:33,663 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[1C61C68C2DE4E4A-0000000000000002]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBody(DefaultProducerTemplate.java:414)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:67)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.InvalidPayloadException: No body available of type: java.io.InputStream but has type: it.polito.communicationmanager.dtos.CreateMessageDTO on: Message. Caused by: No type converter available to convert from type: it.polito.communicationmanager.dtos.CreateMessageDTO to the required type: java.io.InputStream. Exchange[]. Caused by: [org.apache.camel.NoTypeConversionAvailableException - No type converter available to convert from type: it.polito.communicationmanager.dtos.CreateMessageDTO to the required type: java.io.InputStream]
	at org.apache.camel.support.MessageSupport.getMandatoryBody(MessageSupport.java:128)
	at org.apache.camel.component.http.HttpProducer.createRequestEntity(HttpProducer.java:745)
	at org.apache.camel.component.http.HttpProducer.createMethod(HttpProducer.java:632)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:162)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBody(DefaultProducerTemplate.java:413)
	... 25 common frames omitted
Caused by: org.apache.camel.NoTypeConversionAvailableException: No type converter available to convert from type: it.polito.communicationmanager.dtos.CreateMessageDTO to the required type: java.io.InputStream
	at org.apache.camel.impl.converter.CoreTypeConverterRegistry.mandatoryConvertTo(CoreTypeConverterRegistry.java:199)
	at org.apache.camel.support.MessageSupport.getMandatoryBody(MessageSupport.java:126)
	... 38 common frames omitted
2024-05-18 19:55:34,446 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 1C61C68C2DE4E4A-0000000000000003 on ExchangeId: 1C61C68C2DE4E4A-0000000000000003). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          199
	...
                                         route1/process1                Processor@0x78e97d4d                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBody(DefaultProducerTemplate.java:414)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:67)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.InvalidPayloadException: No body available of type: java.io.InputStream but has type: it.polito.communicationmanager.dtos.CreateMessageDTO on: Message. Caused by: No type converter available to convert from type: it.polito.communicationmanager.dtos.CreateMessageDTO to the required type: java.io.InputStream. Exchange[]. Caused by: [org.apache.camel.NoTypeConversionAvailableException - No type converter available to convert from type: it.polito.communicationmanager.dtos.CreateMessageDTO to the required type: java.io.InputStream]
	at org.apache.camel.support.MessageSupport.getMandatoryBody(MessageSupport.java:128)
	at org.apache.camel.component.http.HttpProducer.createRequestEntity(HttpProducer.java:745)
	at org.apache.camel.component.http.HttpProducer.createMethod(HttpProducer.java:632)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:162)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBody(DefaultProducerTemplate.java:413)
	... 25 common frames omitted
Caused by: org.apache.camel.NoTypeConversionAvailableException: No type converter available to convert from type: it.polito.communicationmanager.dtos.CreateMessageDTO to the required type: java.io.InputStream
	at org.apache.camel.impl.converter.CoreTypeConverterRegistry.mandatoryConvertTo(CoreTypeConverterRegistry.java:199)
	at org.apache.camel.support.MessageSupport.getMandatoryBody(MessageSupport.java:126)
	... 38 common frames omitted
2024-05-18 19:55:34,447 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[1C61C68C2DE4E4A-0000000000000003]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBody(DefaultProducerTemplate.java:414)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:67)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.InvalidPayloadException: No body available of type: java.io.InputStream but has type: it.polito.communicationmanager.dtos.CreateMessageDTO on: Message. Caused by: No type converter available to convert from type: it.polito.communicationmanager.dtos.CreateMessageDTO to the required type: java.io.InputStream. Exchange[]. Caused by: [org.apache.camel.NoTypeConversionAvailableException - No type converter available to convert from type: it.polito.communicationmanager.dtos.CreateMessageDTO to the required type: java.io.InputStream]
	at org.apache.camel.support.MessageSupport.getMandatoryBody(MessageSupport.java:128)
	at org.apache.camel.component.http.HttpProducer.createRequestEntity(HttpProducer.java:745)
	at org.apache.camel.component.http.HttpProducer.createMethod(HttpProducer.java:632)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:162)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBody(DefaultProducerTemplate.java:413)
	... 25 common frames omitted
Caused by: org.apache.camel.NoTypeConversionAvailableException: No type converter available to convert from type: it.polito.communicationmanager.dtos.CreateMessageDTO to the required type: java.io.InputStream
	at org.apache.camel.impl.converter.CoreTypeConverterRegistry.mandatoryConvertTo(CoreTypeConverterRegistry.java:199)
	at org.apache.camel.support.MessageSupport.getMandatoryBody(MessageSupport.java:126)
	... 38 common frames omitted
2024-05-18 19:55:34,644 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 19:55:34,647 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 19:55:34,647 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail://messages/list)
2024-05-18 19:55:34,649 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 5ms (uptime:4s)
2024-05-18 19:57:13,955 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 2312 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 19:57:13,957 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 19:57:14,679 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 19:57:14,686 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 19:57:14,687 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 19:57:14,728 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 19:57:14,728 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 737 ms
2024-05-18 19:57:15,497 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 19:57:15,572 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 19:57:15,583 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 19:57:15,585 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail://messages/list)
2024-05-18 19:57:15,585 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 10ms (build:0ms init:0ms start:10ms)
2024-05-18 19:57:15,586 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 1.833 seconds (process running for 2.259)
2024-05-18 19:57:27,338 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 19:57:27,345 INFO [Camel (camel-1) thread #2 - ShutdownTask] o.a.c.i.e.DefaultShutdownStrategy [DefaultShutdownStrategy.java:689] Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 45 seconds. Inflights per route: [route1 = 1]
2024-05-18 19:57:28,359 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 19:57:28,359 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail://messages/list)
2024-05-18 19:57:28,362 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 1s23ms (uptime:12s)
2024-05-18 19:58:29,104 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 20504 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 19:58:29,106 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 19:58:29,841 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 19:58:29,848 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 19:58:29,849 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 19:58:29,889 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 19:58:29,890 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 748 ms
2024-05-18 19:58:30,695 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 19:58:30,774 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 19:58:30,785 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 19:58:30,785 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail://messages/list)
2024-05-18 19:58:30,785 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 9ms (build:0ms init:0ms start:9ms)
2024-05-18 19:58:30,787 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 1.908 seconds (process running for 2.349)
2024-05-18 19:58:42,886 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 19:58:42,891 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 19:58:42,891 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail://messages/list)
2024-05-18 19:58:42,894 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 8ms (uptime:12s)
2024-05-18 20:01:08,610 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 25336 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 20:01:08,612 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 20:01:09,413 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 20:01:09,421 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 20:01:09,422 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 20:01:09,465 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 20:01:09,465 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 819 ms
2024-05-18 20:01:10,243 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 20:01:10,315 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 20:01:10,324 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 20:01:10,324 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail://messages/list)
2024-05-18 20:01:10,324 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 9ms (build:0ms init:0ms start:9ms)
2024-05-18 20:01:10,327 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 1.932 seconds (process running for 2.393)
2024-05-18 20:01:29,443 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 20:01:29,447 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 20:01:29,447 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail://messages/list)
2024-05-18 20:01:29,451 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 8ms (uptime:19s)
2024-05-18 20:01:32,157 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 21004 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 20:01:32,160 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 20:01:32,921 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 20:01:32,929 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 20:01:32,929 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 20:01:32,972 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 20:01:32,972 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 781 ms
2024-05-18 20:01:33,766 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 20:01:33,842 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 20:01:33,852 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 20:01:33,852 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail://messages/list)
2024-05-18 20:01:33,853 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 9ms (build:0ms init:0ms start:9ms)
2024-05-18 20:01:33,855 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 1.903 seconds (process running for 2.377)
2024-05-18 20:01:42,305 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 20:01:42,313 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 20:01:42,313 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail://messages/list)
2024-05-18 20:01:42,319 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 13ms (uptime:8s)
2024-05-18 20:06:41,748 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 4976 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 20:06:41,750 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 20:06:42,491 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 20:06:42,505 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 20:06:42,505 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 20:06:42,547 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 20:06:42,549 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 764 ms
2024-05-18 20:06:43,397 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 20:06:43,466 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 20:06:43,476 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 20:06:43,477 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail://messages/list)
2024-05-18 20:06:43,477 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 9ms (build:0ms init:0ms start:9ms)
2024-05-18 20:06:43,479 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 1.937 seconds (process running for 2.398)
2024-05-18 20:06:45,240 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 2FE84933B0B960F-0000000000000000 on ExchangeId: 2FE84933B0B960F-0000000000000000). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          225
	...
                                         route1/process1                Processor@0x54e18a46                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:70)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.InvalidPayloadException: No body available of type: java.io.InputStream but has type: it.polito.communicationmanager.dtos.CreateMessageDTO on: Message. Caused by: No type converter available to convert from type: it.polito.communicationmanager.dtos.CreateMessageDTO to the required type: java.io.InputStream. Exchange[]. Caused by: [org.apache.camel.NoTypeConversionAvailableException - No type converter available to convert from type: it.polito.communicationmanager.dtos.CreateMessageDTO to the required type: java.io.InputStream]
	at org.apache.camel.support.MessageSupport.getMandatoryBody(MessageSupport.java:128)
	at org.apache.camel.component.http.HttpProducer.createRequestEntity(HttpProducer.java:745)
	at org.apache.camel.component.http.HttpProducer.createMethod(HttpProducer.java:632)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:162)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: org.apache.camel.NoTypeConversionAvailableException: No type converter available to convert from type: it.polito.communicationmanager.dtos.CreateMessageDTO to the required type: java.io.InputStream
	at org.apache.camel.impl.converter.CoreTypeConverterRegistry.mandatoryConvertTo(CoreTypeConverterRegistry.java:199)
	at org.apache.camel.support.MessageSupport.getMandatoryBody(MessageSupport.java:126)
	... 40 common frames omitted
2024-05-18 20:06:45,242 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[2FE84933B0B960F-0000000000000000]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:70)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.InvalidPayloadException: No body available of type: java.io.InputStream but has type: it.polito.communicationmanager.dtos.CreateMessageDTO on: Message. Caused by: No type converter available to convert from type: it.polito.communicationmanager.dtos.CreateMessageDTO to the required type: java.io.InputStream. Exchange[]. Caused by: [org.apache.camel.NoTypeConversionAvailableException - No type converter available to convert from type: it.polito.communicationmanager.dtos.CreateMessageDTO to the required type: java.io.InputStream]
	at org.apache.camel.support.MessageSupport.getMandatoryBody(MessageSupport.java:128)
	at org.apache.camel.component.http.HttpProducer.createRequestEntity(HttpProducer.java:745)
	at org.apache.camel.component.http.HttpProducer.createMethod(HttpProducer.java:632)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:162)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: org.apache.camel.NoTypeConversionAvailableException: No type converter available to convert from type: it.polito.communicationmanager.dtos.CreateMessageDTO to the required type: java.io.InputStream
	at org.apache.camel.impl.converter.CoreTypeConverterRegistry.mandatoryConvertTo(CoreTypeConverterRegistry.java:199)
	at org.apache.camel.support.MessageSupport.getMandatoryBody(MessageSupport.java:126)
	... 40 common frames omitted
2024-05-18 20:06:45,999 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 2FE84933B0B960F-0000000000000001 on ExchangeId: 2FE84933B0B960F-0000000000000001). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          167
	...
                                         route1/process1                Processor@0x54e18a46                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:70)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.InvalidPayloadException: No body available of type: java.io.InputStream but has type: it.polito.communicationmanager.dtos.CreateMessageDTO on: Message. Caused by: No type converter available to convert from type: it.polito.communicationmanager.dtos.CreateMessageDTO to the required type: java.io.InputStream. Exchange[]. Caused by: [org.apache.camel.NoTypeConversionAvailableException - No type converter available to convert from type: it.polito.communicationmanager.dtos.CreateMessageDTO to the required type: java.io.InputStream]
	at org.apache.camel.support.MessageSupport.getMandatoryBody(MessageSupport.java:128)
	at org.apache.camel.component.http.HttpProducer.createRequestEntity(HttpProducer.java:745)
	at org.apache.camel.component.http.HttpProducer.createMethod(HttpProducer.java:632)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:162)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: org.apache.camel.NoTypeConversionAvailableException: No type converter available to convert from type: it.polito.communicationmanager.dtos.CreateMessageDTO to the required type: java.io.InputStream
	at org.apache.camel.impl.converter.CoreTypeConverterRegistry.mandatoryConvertTo(CoreTypeConverterRegistry.java:199)
	at org.apache.camel.support.MessageSupport.getMandatoryBody(MessageSupport.java:126)
	... 40 common frames omitted
2024-05-18 20:06:45,999 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[2FE84933B0B960F-0000000000000001]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:70)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.InvalidPayloadException: No body available of type: java.io.InputStream but has type: it.polito.communicationmanager.dtos.CreateMessageDTO on: Message. Caused by: No type converter available to convert from type: it.polito.communicationmanager.dtos.CreateMessageDTO to the required type: java.io.InputStream. Exchange[]. Caused by: [org.apache.camel.NoTypeConversionAvailableException - No type converter available to convert from type: it.polito.communicationmanager.dtos.CreateMessageDTO to the required type: java.io.InputStream]
	at org.apache.camel.support.MessageSupport.getMandatoryBody(MessageSupport.java:128)
	at org.apache.camel.component.http.HttpProducer.createRequestEntity(HttpProducer.java:745)
	at org.apache.camel.component.http.HttpProducer.createMethod(HttpProducer.java:632)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:162)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: org.apache.camel.NoTypeConversionAvailableException: No type converter available to convert from type: it.polito.communicationmanager.dtos.CreateMessageDTO to the required type: java.io.InputStream
	at org.apache.camel.impl.converter.CoreTypeConverterRegistry.mandatoryConvertTo(CoreTypeConverterRegistry.java:199)
	at org.apache.camel.support.MessageSupport.getMandatoryBody(MessageSupport.java:126)
	... 40 common frames omitted
2024-05-18 20:06:46,732 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 2FE84933B0B960F-0000000000000002 on ExchangeId: 2FE84933B0B960F-0000000000000002). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          160
	...
                                         route1/process1                Processor@0x54e18a46                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:70)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.InvalidPayloadException: No body available of type: java.io.InputStream but has type: it.polito.communicationmanager.dtos.CreateMessageDTO on: Message. Caused by: No type converter available to convert from type: it.polito.communicationmanager.dtos.CreateMessageDTO to the required type: java.io.InputStream. Exchange[]. Caused by: [org.apache.camel.NoTypeConversionAvailableException - No type converter available to convert from type: it.polito.communicationmanager.dtos.CreateMessageDTO to the required type: java.io.InputStream]
	at org.apache.camel.support.MessageSupport.getMandatoryBody(MessageSupport.java:128)
	at org.apache.camel.component.http.HttpProducer.createRequestEntity(HttpProducer.java:745)
	at org.apache.camel.component.http.HttpProducer.createMethod(HttpProducer.java:632)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:162)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: org.apache.camel.NoTypeConversionAvailableException: No type converter available to convert from type: it.polito.communicationmanager.dtos.CreateMessageDTO to the required type: java.io.InputStream
	at org.apache.camel.impl.converter.CoreTypeConverterRegistry.mandatoryConvertTo(CoreTypeConverterRegistry.java:199)
	at org.apache.camel.support.MessageSupport.getMandatoryBody(MessageSupport.java:126)
	... 40 common frames omitted
2024-05-18 20:06:46,733 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[2FE84933B0B960F-0000000000000002]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:70)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.InvalidPayloadException: No body available of type: java.io.InputStream but has type: it.polito.communicationmanager.dtos.CreateMessageDTO on: Message. Caused by: No type converter available to convert from type: it.polito.communicationmanager.dtos.CreateMessageDTO to the required type: java.io.InputStream. Exchange[]. Caused by: [org.apache.camel.NoTypeConversionAvailableException - No type converter available to convert from type: it.polito.communicationmanager.dtos.CreateMessageDTO to the required type: java.io.InputStream]
	at org.apache.camel.support.MessageSupport.getMandatoryBody(MessageSupport.java:128)
	at org.apache.camel.component.http.HttpProducer.createRequestEntity(HttpProducer.java:745)
	at org.apache.camel.component.http.HttpProducer.createMethod(HttpProducer.java:632)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:162)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: org.apache.camel.NoTypeConversionAvailableException: No type converter available to convert from type: it.polito.communicationmanager.dtos.CreateMessageDTO to the required type: java.io.InputStream
	at org.apache.camel.impl.converter.CoreTypeConverterRegistry.mandatoryConvertTo(CoreTypeConverterRegistry.java:199)
	at org.apache.camel.support.MessageSupport.getMandatoryBody(MessageSupport.java:126)
	... 40 common frames omitted
2024-05-18 20:06:47,458 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 2FE84933B0B960F-0000000000000003 on ExchangeId: 2FE84933B0B960F-0000000000000003). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          150
	...
                                         route1/process1                Processor@0x54e18a46                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:70)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.InvalidPayloadException: No body available of type: java.io.InputStream but has type: it.polito.communicationmanager.dtos.CreateMessageDTO on: Message. Caused by: No type converter available to convert from type: it.polito.communicationmanager.dtos.CreateMessageDTO to the required type: java.io.InputStream. Exchange[]. Caused by: [org.apache.camel.NoTypeConversionAvailableException - No type converter available to convert from type: it.polito.communicationmanager.dtos.CreateMessageDTO to the required type: java.io.InputStream]
	at org.apache.camel.support.MessageSupport.getMandatoryBody(MessageSupport.java:128)
	at org.apache.camel.component.http.HttpProducer.createRequestEntity(HttpProducer.java:745)
	at org.apache.camel.component.http.HttpProducer.createMethod(HttpProducer.java:632)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:162)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: org.apache.camel.NoTypeConversionAvailableException: No type converter available to convert from type: it.polito.communicationmanager.dtos.CreateMessageDTO to the required type: java.io.InputStream
	at org.apache.camel.impl.converter.CoreTypeConverterRegistry.mandatoryConvertTo(CoreTypeConverterRegistry.java:199)
	at org.apache.camel.support.MessageSupport.getMandatoryBody(MessageSupport.java:126)
	... 40 common frames omitted
2024-05-18 20:06:47,459 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[2FE84933B0B960F-0000000000000003]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:70)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.InvalidPayloadException: No body available of type: java.io.InputStream but has type: it.polito.communicationmanager.dtos.CreateMessageDTO on: Message. Caused by: No type converter available to convert from type: it.polito.communicationmanager.dtos.CreateMessageDTO to the required type: java.io.InputStream. Exchange[]. Caused by: [org.apache.camel.NoTypeConversionAvailableException - No type converter available to convert from type: it.polito.communicationmanager.dtos.CreateMessageDTO to the required type: java.io.InputStream]
	at org.apache.camel.support.MessageSupport.getMandatoryBody(MessageSupport.java:128)
	at org.apache.camel.component.http.HttpProducer.createRequestEntity(HttpProducer.java:745)
	at org.apache.camel.component.http.HttpProducer.createMethod(HttpProducer.java:632)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:162)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: org.apache.camel.NoTypeConversionAvailableException: No type converter available to convert from type: it.polito.communicationmanager.dtos.CreateMessageDTO to the required type: java.io.InputStream
	at org.apache.camel.impl.converter.CoreTypeConverterRegistry.mandatoryConvertTo(CoreTypeConverterRegistry.java:199)
	at org.apache.camel.support.MessageSupport.getMandatoryBody(MessageSupport.java:126)
	... 40 common frames omitted
2024-05-18 20:06:47,962 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 20:06:47,967 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 20:06:47,968 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail://messages/list)
2024-05-18 20:06:47,970 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 7ms (uptime:4s)
2024-05-18 20:09:38,194 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 12712 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 20:09:38,196 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 20:09:38,985 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 20:09:38,995 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 20:09:38,995 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 20:09:39,037 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 20:09:39,038 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 809 ms
2024-05-18 20:09:39,863 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 20:09:39,945 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 20:09:39,954 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 20:09:39,954 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail://messages/list)
2024-05-18 20:09:39,954 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 9ms (build:0ms init:0ms start:9ms)
2024-05-18 20:09:39,956 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 1.958 seconds (process running for 2.408)
2024-05-18 20:09:50,250 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 8A367DC6C726046-0000000000000000 on ExchangeId: 8A367DC6C726046-0000000000000000). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          189
	...
                                         route1/process1                Processor@0x7096d451                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.SocketException: Connessione interrotta dal software del computer host
	at java.base/sun.nio.ch.SocketDispatcher.read0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.read(SocketDispatcher.java:46)
	at java.base/sun.nio.ch.NioSocketImpl.tryRead(NioSocketImpl.java:256)
	at java.base/sun.nio.ch.NioSocketImpl.implRead(NioSocketImpl.java:307)
	at java.base/sun.nio.ch.NioSocketImpl.read(NioSocketImpl.java:346)
	at java.base/sun.nio.ch.NioSocketImpl$1.read(NioSocketImpl.java:796)
	at java.base/java.net.Socket$SocketInputStream.read(Socket.java:1099)
	at org.apache.http.impl.io.SessionInputBufferImpl.streamRead(SessionInputBufferImpl.java:137)
	at org.apache.http.impl.io.SessionInputBufferImpl.fillBuffer(SessionInputBufferImpl.java:153)
	at org.apache.http.impl.io.SessionInputBufferImpl.readLine(SessionInputBufferImpl.java:280)
	at org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:138)
	at org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:56)
	at org.apache.http.impl.io.AbstractMessageParser.parse(AbstractMessageParser.java:259)
	at org.apache.http.impl.DefaultBHttpClientConnection.receiveResponseHeader(DefaultBHttpClientConnection.java:163)
	at org.apache.http.impl.conn.CPoolProxy.receiveResponseHeader(CPoolProxy.java:157)
	at org.apache.http.protocol.HttpRequestExecutor.doReceiveResponse(HttpRequestExecutor.java:273)
	at org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:125)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:272)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
2024-05-18 20:09:50,253 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[8A367DC6C726046-0000000000000000]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.SocketException: Connessione interrotta dal software del computer host
	at java.base/sun.nio.ch.SocketDispatcher.read0(Native Method)
	at java.base/sun.nio.ch.SocketDispatcher.read(SocketDispatcher.java:46)
	at java.base/sun.nio.ch.NioSocketImpl.tryRead(NioSocketImpl.java:256)
	at java.base/sun.nio.ch.NioSocketImpl.implRead(NioSocketImpl.java:307)
	at java.base/sun.nio.ch.NioSocketImpl.read(NioSocketImpl.java:346)
	at java.base/sun.nio.ch.NioSocketImpl$1.read(NioSocketImpl.java:796)
	at java.base/java.net.Socket$SocketInputStream.read(Socket.java:1099)
	at org.apache.http.impl.io.SessionInputBufferImpl.streamRead(SessionInputBufferImpl.java:137)
	at org.apache.http.impl.io.SessionInputBufferImpl.fillBuffer(SessionInputBufferImpl.java:153)
	at org.apache.http.impl.io.SessionInputBufferImpl.readLine(SessionInputBufferImpl.java:280)
	at org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:138)
	at org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:56)
	at org.apache.http.impl.io.AbstractMessageParser.parse(AbstractMessageParser.java:259)
	at org.apache.http.impl.DefaultBHttpClientConnection.receiveResponseHeader(DefaultBHttpClientConnection.java:163)
	at org.apache.http.impl.conn.CPoolProxy.receiveResponseHeader(CPoolProxy.java:157)
	at org.apache.http.protocol.HttpRequestExecutor.doReceiveResponse(HttpRequestExecutor.java:273)
	at org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:125)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:272)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
2024-05-18 20:09:51,080 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 8A367DC6C726046-0000000000000001 on ExchangeId: 8A367DC6C726046-0000000000000001). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          252
	...
                                         route1/process1                Processor@0x7096d451                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:09:51,081 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[8A367DC6C726046-0000000000000001]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:09:51,819 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 8A367DC6C726046-0000000000000002 on ExchangeId: 8A367DC6C726046-0000000000000002). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          156
	...
                                         route1/process1                Processor@0x7096d451                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:09:51,820 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[8A367DC6C726046-0000000000000002]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:09:52,585 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 8A367DC6C726046-0000000000000003 on ExchangeId: 8A367DC6C726046-0000000000000003). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          175
	...
                                         route1/process1                Processor@0x7096d451                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:09:52,586 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[8A367DC6C726046-0000000000000003]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:09:53,314 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 8A367DC6C726046-0000000000000004 on ExchangeId: 8A367DC6C726046-0000000000000004). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          137
	...
                                         route1/process1                Processor@0x7096d451                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:09:53,314 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[8A367DC6C726046-0000000000000004]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:09:54,078 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 8A367DC6C726046-0000000000000005 on ExchangeId: 8A367DC6C726046-0000000000000005). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          180
	...
                                         route1/process1                Processor@0x7096d451                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:09:54,079 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[8A367DC6C726046-0000000000000005]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:09:55,565 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 8A367DC6C726046-0000000000000006 on ExchangeId: 8A367DC6C726046-0000000000000006). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          539
	...
                                         route1/process1                Processor@0x7096d451                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:09:55,566 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[8A367DC6C726046-0000000000000006]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:09:56,341 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 8A367DC6C726046-0000000000000007 on ExchangeId: 8A367DC6C726046-0000000000000007). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          184
	...
                                         route1/process1                Processor@0x7096d451                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:09:56,342 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[8A367DC6C726046-0000000000000007]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:09:57,598 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 8A367DC6C726046-0000000000000008 on ExchangeId: 8A367DC6C726046-0000000000000008). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          677
	...
                                         route1/process1                Processor@0x7096d451                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:09:57,598 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[8A367DC6C726046-0000000000000008]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:09:58,330 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 8A367DC6C726046-0000000000000009 on ExchangeId: 8A367DC6C726046-0000000000000009). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          146
	...
                                         route1/process1                Processor@0x7096d451                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:09:58,331 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[8A367DC6C726046-0000000000000009]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:09:59,185 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 8A367DC6C726046-000000000000000A on ExchangeId: 8A367DC6C726046-000000000000000A). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          247
	...
                                         route1/process1                Processor@0x7096d451                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:09:59,185 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[8A367DC6C726046-000000000000000A]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:10:00,032 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 8A367DC6C726046-000000000000000B on ExchangeId: 8A367DC6C726046-000000000000000B). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          141
	...
                                         route1/process1                Processor@0x7096d451                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:10:00,033 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[8A367DC6C726046-000000000000000B]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:10:00,758 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 8A367DC6C726046-000000000000000C on ExchangeId: 8A367DC6C726046-000000000000000C). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          139
	...
                                         route1/process1                Processor@0x7096d451                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:10:00,759 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[8A367DC6C726046-000000000000000C]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:10:01,478 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 8A367DC6C726046-000000000000000D on ExchangeId: 8A367DC6C726046-000000000000000D). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          136
	...
                                         route1/process1                Processor@0x7096d451                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:10:01,479 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[8A367DC6C726046-000000000000000D]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:10:02,254 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 8A367DC6C726046-000000000000000E on ExchangeId: 8A367DC6C726046-000000000000000E). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          152
	...
                                         route1/process1                Processor@0x7096d451                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:10:02,255 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[8A367DC6C726046-000000000000000E]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:10:02,985 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 8A367DC6C726046-000000000000000F on ExchangeId: 8A367DC6C726046-000000000000000F). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          145
	...
                                         route1/process1                Processor@0x7096d451                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:10:02,986 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[8A367DC6C726046-000000000000000F]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:10:03,694 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 8A367DC6C726046-0000000000000010 on ExchangeId: 8A367DC6C726046-0000000000000010). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          141
	...
                                         route1/process1                Processor@0x7096d451                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:10:03,695 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[8A367DC6C726046-0000000000000010]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:10:04,452 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 8A367DC6C726046-0000000000000011 on ExchangeId: 8A367DC6C726046-0000000000000011). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          150
	...
                                         route1/process1                Processor@0x7096d451                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:10:04,452 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[8A367DC6C726046-0000000000000011]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:10:05,177 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 8A367DC6C726046-0000000000000012 on ExchangeId: 8A367DC6C726046-0000000000000012). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          139
	...
                                         route1/process1                Processor@0x7096d451                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:10:05,177 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[8A367DC6C726046-0000000000000012]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:10:05,890 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 8A367DC6C726046-0000000000000013 on ExchangeId: 8A367DC6C726046-0000000000000013). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          130
	...
                                         route1/process1                Processor@0x7096d451                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:10:05,894 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[8A367DC6C726046-0000000000000013]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:10:06,618 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 8A367DC6C726046-0000000000000014 on ExchangeId: 8A367DC6C726046-0000000000000014). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          139
	...
                                         route1/process1                Processor@0x7096d451                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:10:06,618 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[8A367DC6C726046-0000000000000014]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:10:07,328 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 8A367DC6C726046-0000000000000015 on ExchangeId: 8A367DC6C726046-0000000000000015). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          129
	...
                                         route1/process1                Processor@0x7096d451                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:10:07,328 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[8A367DC6C726046-0000000000000015]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:10:08,752 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 8A367DC6C726046-0000000000000016 on ExchangeId: 8A367DC6C726046-0000000000000016). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          839
	...
                                         route1/process1                Processor@0x7096d451                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:10:08,753 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[8A367DC6C726046-0000000000000016]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:10:09,543 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 8A367DC6C726046-0000000000000017 on ExchangeId: 8A367DC6C726046-0000000000000017). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          164
	...
                                         route1/process1                Processor@0x7096d451                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:10:09,544 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[8A367DC6C726046-0000000000000017]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:10:10,340 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 8A367DC6C726046-0000000000000018 on ExchangeId: 8A367DC6C726046-0000000000000018). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          219
	...
                                         route1/process1                Processor@0x7096d451                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:10:10,341 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[8A367DC6C726046-0000000000000018]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:10:11,058 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 8A367DC6C726046-0000000000000019 on ExchangeId: 8A367DC6C726046-0000000000000019). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          146
	...
                                         route1/process1                Processor@0x7096d451                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:10:11,059 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[8A367DC6C726046-0000000000000019]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:10:11,784 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 8A367DC6C726046-000000000000001A on ExchangeId: 8A367DC6C726046-000000000000001A). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          140
	...
                                         route1/process1                Processor@0x7096d451                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:10:11,784 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[8A367DC6C726046-000000000000001A]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:10:12,495 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 8A367DC6C726046-000000000000001B on ExchangeId: 8A367DC6C726046-000000000000001B). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          136
	...
                                         route1/process1                Processor@0x7096d451                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:10:12,498 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[8A367DC6C726046-000000000000001B]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:10:13,245 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 8A367DC6C726046-000000000000001C on ExchangeId: 8A367DC6C726046-000000000000001C). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          163
	...
                                         route1/process1                Processor@0x7096d451                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:10:13,245 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[8A367DC6C726046-000000000000001C]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:10:13,993 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 8A367DC6C726046-000000000000001D on ExchangeId: 8A367DC6C726046-000000000000001D). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          163
	...
                                         route1/process1                Processor@0x7096d451                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:10:13,993 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[8A367DC6C726046-000000000000001D]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:10:14,774 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 8A367DC6C726046-000000000000001E on ExchangeId: 8A367DC6C726046-000000000000001E). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          166
	...
                                         route1/process1                Processor@0x7096d451                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:10:14,774 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[8A367DC6C726046-000000000000001E]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:10:15,670 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 8A367DC6C726046-000000000000001F on ExchangeId: 8A367DC6C726046-000000000000001F). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          238
	...
                                         route1/process1                Processor@0x7096d451                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:10:15,671 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[8A367DC6C726046-000000000000001F]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:10:16,389 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 8A367DC6C726046-0000000000000020 on ExchangeId: 8A367DC6C726046-0000000000000020). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          149
	...
                                         route1/process1                Processor@0x7096d451                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:10:16,390 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[8A367DC6C726046-0000000000000020]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:10:17,139 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 8A367DC6C726046-0000000000000021 on ExchangeId: 8A367DC6C726046-0000000000000021). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          136
	...
                                         route1/process1                Processor@0x7096d451                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:10:17,139 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[8A367DC6C726046-0000000000000021]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:10:17,935 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 8A367DC6C726046-0000000000000022 on ExchangeId: 8A367DC6C726046-0000000000000022). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          195
	...
                                         route1/process1                Processor@0x7096d451                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:10:17,936 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[8A367DC6C726046-0000000000000022]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:10:18,723 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 8A367DC6C726046-0000000000000023 on ExchangeId: 8A367DC6C726046-0000000000000023). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          143
	...
                                         route1/process1                Processor@0x7096d451                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:10:18,724 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[8A367DC6C726046-0000000000000023]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:10:19,454 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 8A367DC6C726046-0000000000000024 on ExchangeId: 8A367DC6C726046-0000000000000024). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          150
	...
                                         route1/process1                Processor@0x7096d451                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:10:19,455 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[8A367DC6C726046-0000000000000024]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:10:20,180 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 8A367DC6C726046-0000000000000025 on ExchangeId: 8A367DC6C726046-0000000000000025). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          144
	...
                                         route1/process1                Processor@0x7096d451                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:10:20,181 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[8A367DC6C726046-0000000000000025]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:10:20,905 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 8A367DC6C726046-0000000000000026 on ExchangeId: 8A367DC6C726046-0000000000000026). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          150
	...
                                         route1/process1                Processor@0x7096d451                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:10:20,905 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[8A367DC6C726046-0000000000000026]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:10:21,616 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 8A367DC6C726046-0000000000000027 on ExchangeId: 8A367DC6C726046-0000000000000027). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          132
	...
                                         route1/process1                Processor@0x7096d451                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:10:21,617 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[8A367DC6C726046-0000000000000027]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:10:22,350 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 8A367DC6C726046-0000000000000028 on ExchangeId: 8A367DC6C726046-0000000000000028). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          150
	...
                                         route1/process1                Processor@0x7096d451                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:10:22,351 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[8A367DC6C726046-0000000000000028]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:10:23,231 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 8A367DC6C726046-0000000000000029 on ExchangeId: 8A367DC6C726046-0000000000000029). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          209
	...
                                         route1/process1                Processor@0x7096d451                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:10:23,231 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[8A367DC6C726046-0000000000000029]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:77)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 47 common frames omitted
2024-05-18 20:10:23,267 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 20:10:23,271 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 20:10:23,271 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail://messages/list)
2024-05-18 20:10:23,273 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 5ms (uptime:43s)
2024-05-18 20:11:27,544 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 8960 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 20:11:27,547 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 20:11:28,315 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 20:11:28,330 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 20:11:28,331 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 20:11:28,374 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 20:11:28,374 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 792 ms
2024-05-18 20:11:29,140 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 20:11:29,214 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 20:11:29,225 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 20:11:29,225 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail://messages/list)
2024-05-18 20:11:29,225 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 10ms (build:0ms init:0ms start:10ms)
2024-05-18 20:11:29,226 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 1.908 seconds (process running for 2.385)
2024-05-18 20:11:53,269 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 20:11:53,273 INFO [Camel (camel-1) thread #2 - ShutdownTask] o.a.c.i.e.DefaultShutdownStrategy [DefaultShutdownStrategy.java:689] Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 45 seconds. Inflights per route: [route1 = 1]
2024-05-18 20:11:54,287 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 20:11:54,287 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail://messages/list)
2024-05-18 20:11:54,292 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 1s22ms (uptime:25s)
2024-05-18 20:22:27,753 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 25976 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 20:22:27,755 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 20:22:28,528 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 20:22:28,536 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 20:22:28,537 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 20:22:28,580 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 20:22:28,581 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 788 ms
2024-05-18 20:22:29,358 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 20:22:29,431 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 20:22:29,443 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 20:22:29,443 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail://messages/list)
2024-05-18 20:22:29,443 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 10ms (build:0ms init:0ms start:10ms)
2024-05-18 20:22:29,445 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 1.917 seconds (process running for 2.441)
2024-05-18 20:22:31,163 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 32766E43204E9DC-0000000000000000 on ExchangeId: 32766E43204E9DC-0000000000000000). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          172
	...
                                         route1/process1                Processor@0x78e97d4d                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBody(DefaultProducerTemplate.java:414)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:72)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: Missing properties for get, need one or more from (1 args) [userId]
	at org.apache.camel.support.component.AbstractApiProducer.findMethod(AbstractApiProducer.java:153)
	at org.apache.camel.support.component.AbstractApiProducer.process(AbstractApiProducer.java:72)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBody(DefaultProducerTemplate.java:413)
	... 25 common frames omitted
2024-05-18 20:22:31,167 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[32766E43204E9DC-0000000000000000]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBody(DefaultProducerTemplate.java:414)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:72)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: Missing properties for get, need one or more from (1 args) [userId]
	at org.apache.camel.support.component.AbstractApiProducer.findMethod(AbstractApiProducer.java:153)
	at org.apache.camel.support.component.AbstractApiProducer.process(AbstractApiProducer.java:72)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBody(DefaultProducerTemplate.java:413)
	... 25 common frames omitted
2024-05-18 20:22:31,918 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 32766E43204E9DC-0000000000000001 on ExchangeId: 32766E43204E9DC-0000000000000001). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          159
	...
                                         route1/process1                Processor@0x78e97d4d                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBody(DefaultProducerTemplate.java:414)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:72)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: Missing properties for get, need one or more from (1 args) [userId]
	at org.apache.camel.support.component.AbstractApiProducer.findMethod(AbstractApiProducer.java:153)
	at org.apache.camel.support.component.AbstractApiProducer.process(AbstractApiProducer.java:72)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBody(DefaultProducerTemplate.java:413)
	... 25 common frames omitted
2024-05-18 20:22:31,919 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[32766E43204E9DC-0000000000000001]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBody(DefaultProducerTemplate.java:414)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:72)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: Missing properties for get, need one or more from (1 args) [userId]
	at org.apache.camel.support.component.AbstractApiProducer.findMethod(AbstractApiProducer.java:153)
	at org.apache.camel.support.component.AbstractApiProducer.process(AbstractApiProducer.java:72)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBody(DefaultProducerTemplate.java:413)
	... 25 common frames omitted
2024-05-18 20:22:32,696 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 32766E43204E9DC-0000000000000002 on ExchangeId: 32766E43204E9DC-0000000000000002). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          192
	...
                                         route1/process1                Processor@0x78e97d4d                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBody(DefaultProducerTemplate.java:414)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:72)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: Missing properties for get, need one or more from (1 args) [userId]
	at org.apache.camel.support.component.AbstractApiProducer.findMethod(AbstractApiProducer.java:153)
	at org.apache.camel.support.component.AbstractApiProducer.process(AbstractApiProducer.java:72)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBody(DefaultProducerTemplate.java:413)
	... 25 common frames omitted
2024-05-18 20:22:32,696 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[32766E43204E9DC-0000000000000002]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBody(DefaultProducerTemplate.java:414)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:72)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: Missing properties for get, need one or more from (1 args) [userId]
	at org.apache.camel.support.component.AbstractApiProducer.findMethod(AbstractApiProducer.java:153)
	at org.apache.camel.support.component.AbstractApiProducer.process(AbstractApiProducer.java:72)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBody(DefaultProducerTemplate.java:413)
	... 25 common frames omitted
2024-05-18 20:22:33,415 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 32766E43204E9DC-0000000000000003 on ExchangeId: 32766E43204E9DC-0000000000000003). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          139
	...
                                         route1/process1                Processor@0x78e97d4d                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBody(DefaultProducerTemplate.java:414)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:72)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: Missing properties for get, need one or more from (1 args) [userId]
	at org.apache.camel.support.component.AbstractApiProducer.findMethod(AbstractApiProducer.java:153)
	at org.apache.camel.support.component.AbstractApiProducer.process(AbstractApiProducer.java:72)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBody(DefaultProducerTemplate.java:413)
	... 25 common frames omitted
2024-05-18 20:22:33,415 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[32766E43204E9DC-0000000000000003]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBody(DefaultProducerTemplate.java:414)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:72)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: Missing properties for get, need one or more from (1 args) [userId]
	at org.apache.camel.support.component.AbstractApiProducer.findMethod(AbstractApiProducer.java:153)
	at org.apache.camel.support.component.AbstractApiProducer.process(AbstractApiProducer.java:72)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBody(DefaultProducerTemplate.java:413)
	... 25 common frames omitted
2024-05-18 20:22:34,189 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 32766E43204E9DC-0000000000000004 on ExchangeId: 32766E43204E9DC-0000000000000004). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          144
	...
                                         route1/process1                Processor@0x78e97d4d                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBody(DefaultProducerTemplate.java:414)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:72)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: Missing properties for get, need one or more from (1 args) [userId]
	at org.apache.camel.support.component.AbstractApiProducer.findMethod(AbstractApiProducer.java:153)
	at org.apache.camel.support.component.AbstractApiProducer.process(AbstractApiProducer.java:72)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBody(DefaultProducerTemplate.java:413)
	... 25 common frames omitted
2024-05-18 20:22:34,189 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[32766E43204E9DC-0000000000000004]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBody(DefaultProducerTemplate.java:414)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:72)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: Missing properties for get, need one or more from (1 args) [userId]
	at org.apache.camel.support.component.AbstractApiProducer.findMethod(AbstractApiProducer.java:153)
	at org.apache.camel.support.component.AbstractApiProducer.process(AbstractApiProducer.java:72)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBody(DefaultProducerTemplate.java:413)
	... 25 common frames omitted
2024-05-18 20:22:34,239 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 20:22:34,248 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 20:22:34,249 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail://messages/list)
2024-05-18 20:22:34,250 WARN [SpringApplicationShutdownHook] o.a.c.i.e.DefaultInflightRepository [DefaultInflightRepository.java:202] Shutting down while there are still 5 inflight exchanges.
2024-05-18 20:22:34,252 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 11ms (uptime:4s)
2024-05-18 20:24:15,196 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 3592 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 20:24:15,199 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 20:24:15,986 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 20:24:15,996 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 20:24:15,997 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 20:24:16,045 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 20:24:16,045 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 809 ms
2024-05-18 20:24:16,855 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 20:24:16,927 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 20:24:16,936 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 20:24:16,936 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail://messages/list)
2024-05-18 20:24:16,936 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 9ms (build:0ms init:0ms start:9ms)
2024-05-18 20:24:16,938 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 1.963 seconds (process running for 2.446)
2024-05-18 20:24:18,570 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: EBC284F70782297-0000000000000000 on ExchangeId: EBC284F70782297-0000000000000000). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          168
	...
                                         route1/process1                Processor@0x8585cdd                                           0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBody(DefaultProducerTemplate.java:189)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBody(DefaultProducerTemplate.java:195)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:72)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: Missing properties for get, need one or more from (1 args) [userId]
	at org.apache.camel.support.component.AbstractApiProducer.findMethod(AbstractApiProducer.java:153)
	at org.apache.camel.support.component.AbstractApiProducer.process(AbstractApiProducer.java:72)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBody(DefaultProducerTemplate.java:187)
	... 26 common frames omitted
2024-05-18 20:24:18,573 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[EBC284F70782297-0000000000000000]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBody(DefaultProducerTemplate.java:189)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBody(DefaultProducerTemplate.java:195)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:72)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: Missing properties for get, need one or more from (1 args) [userId]
	at org.apache.camel.support.component.AbstractApiProducer.findMethod(AbstractApiProducer.java:153)
	at org.apache.camel.support.component.AbstractApiProducer.process(AbstractApiProducer.java:72)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBody(DefaultProducerTemplate.java:187)
	... 26 common frames omitted
2024-05-18 20:24:19,307 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: EBC284F70782297-0000000000000001 on ExchangeId: EBC284F70782297-0000000000000001). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          144
	...
                                         route1/process1                Processor@0x8585cdd                                           0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBody(DefaultProducerTemplate.java:189)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBody(DefaultProducerTemplate.java:195)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:72)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: Missing properties for get, need one or more from (1 args) [userId]
	at org.apache.camel.support.component.AbstractApiProducer.findMethod(AbstractApiProducer.java:153)
	at org.apache.camel.support.component.AbstractApiProducer.process(AbstractApiProducer.java:72)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBody(DefaultProducerTemplate.java:187)
	... 26 common frames omitted
2024-05-18 20:24:19,307 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[EBC284F70782297-0000000000000001]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBody(DefaultProducerTemplate.java:189)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBody(DefaultProducerTemplate.java:195)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:72)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: Missing properties for get, need one or more from (1 args) [userId]
	at org.apache.camel.support.component.AbstractApiProducer.findMethod(AbstractApiProducer.java:153)
	at org.apache.camel.support.component.AbstractApiProducer.process(AbstractApiProducer.java:72)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBody(DefaultProducerTemplate.java:187)
	... 26 common frames omitted
2024-05-18 20:24:20,030 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: EBC284F70782297-0000000000000002 on ExchangeId: EBC284F70782297-0000000000000002). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          145
	...
                                         route1/process1                Processor@0x8585cdd                                           0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBody(DefaultProducerTemplate.java:189)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBody(DefaultProducerTemplate.java:195)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:72)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: Missing properties for get, need one or more from (1 args) [userId]
	at org.apache.camel.support.component.AbstractApiProducer.findMethod(AbstractApiProducer.java:153)
	at org.apache.camel.support.component.AbstractApiProducer.process(AbstractApiProducer.java:72)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBody(DefaultProducerTemplate.java:187)
	... 26 common frames omitted
2024-05-18 20:24:20,031 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[EBC284F70782297-0000000000000002]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBody(DefaultProducerTemplate.java:189)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBody(DefaultProducerTemplate.java:195)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:72)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: Missing properties for get, need one or more from (1 args) [userId]
	at org.apache.camel.support.component.AbstractApiProducer.findMethod(AbstractApiProducer.java:153)
	at org.apache.camel.support.component.AbstractApiProducer.process(AbstractApiProducer.java:72)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBody(DefaultProducerTemplate.java:187)
	... 26 common frames omitted
2024-05-18 20:24:20,622 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 20:24:20,631 INFO [Camel (camel-1) thread #2 - ShutdownTask] o.a.c.i.e.DefaultShutdownStrategy [DefaultShutdownStrategy.java:689] Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 45 seconds. Inflights per route: [route1 = 1]
2024-05-18 20:24:20,767 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: EBC284F70782297-0000000000000003 on ExchangeId: EBC284F70782297-0000000000000003). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          161
	...
                                         route1/process1                Processor@0x8585cdd                                           0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBody(DefaultProducerTemplate.java:189)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBody(DefaultProducerTemplate.java:195)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:72)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: Missing properties for get, need one or more from (1 args) [userId]
	at org.apache.camel.support.component.AbstractApiProducer.findMethod(AbstractApiProducer.java:153)
	at org.apache.camel.support.component.AbstractApiProducer.process(AbstractApiProducer.java:72)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBody(DefaultProducerTemplate.java:187)
	... 26 common frames omitted
2024-05-18 20:24:20,768 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[EBC284F70782297-0000000000000003]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBody(DefaultProducerTemplate.java:189)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBody(DefaultProducerTemplate.java:195)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:72)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: Missing properties for get, need one or more from (1 args) [userId]
	at org.apache.camel.support.component.AbstractApiProducer.findMethod(AbstractApiProducer.java:153)
	at org.apache.camel.support.component.AbstractApiProducer.process(AbstractApiProducer.java:72)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBody(DefaultProducerTemplate.java:187)
	... 26 common frames omitted
2024-05-18 20:24:21,643 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 20:24:21,643 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail://messages/list)
2024-05-18 20:24:21,645 WARN [SpringApplicationShutdownHook] o.a.c.i.e.DefaultInflightRepository [DefaultInflightRepository.java:202] Shutting down while there are still 4 inflight exchanges.
2024-05-18 20:24:21,646 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 1s23ms (uptime:4s)
2024-05-18 21:45:21,640 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 19504 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 21:45:21,643 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 21:45:22,367 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 21:45:22,374 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 21:45:22,376 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 21:45:22,425 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 21:45:22,426 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 751 ms
2024-05-18 21:45:23,166 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 21:45:23,235 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 21:45:23,245 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 21:45:23,246 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail://messages/list)
2024-05-18 21:45:23,246 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 10ms (build:0ms init:0ms start:10ms)
2024-05-18 21:45:23,247 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 1.808 seconds (process running for 2.243)
2024-05-18 21:45:25,109 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 920D27C7B1CE627-0000000000000000 on ExchangeId: 920D27C7B1CE627-0000000000000000). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          299
	...
                                         route1/process1                Processor@0x1ab85862                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:72)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: Missing properties for get, need one or more from (1 args) [userId]
	at org.apache.camel.support.component.AbstractApiProducer.findMethod(AbstractApiProducer.java:153)
	at org.apache.camel.support.component.AbstractApiProducer.process(AbstractApiProducer.java:72)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
2024-05-18 21:45:25,112 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[920D27C7B1CE627-0000000000000000]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:72)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: Missing properties for get, need one or more from (1 args) [userId]
	at org.apache.camel.support.component.AbstractApiProducer.findMethod(AbstractApiProducer.java:153)
	at org.apache.camel.support.component.AbstractApiProducer.process(AbstractApiProducer.java:72)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
2024-05-18 21:45:25,844 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 920D27C7B1CE627-0000000000000001 on ExchangeId: 920D27C7B1CE627-0000000000000001). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          148
	...
                                         route1/process1                Processor@0x1ab85862                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:72)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: Missing properties for get, need one or more from (1 args) [userId]
	at org.apache.camel.support.component.AbstractApiProducer.findMethod(AbstractApiProducer.java:153)
	at org.apache.camel.support.component.AbstractApiProducer.process(AbstractApiProducer.java:72)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
2024-05-18 21:45:25,846 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[920D27C7B1CE627-0000000000000001]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:72)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: Missing properties for get, need one or more from (1 args) [userId]
	at org.apache.camel.support.component.AbstractApiProducer.findMethod(AbstractApiProducer.java:153)
	at org.apache.camel.support.component.AbstractApiProducer.process(AbstractApiProducer.java:72)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
2024-05-18 21:45:26,626 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 920D27C7B1CE627-0000000000000002 on ExchangeId: 920D27C7B1CE627-0000000000000002). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          201
	...
                                         route1/process1                Processor@0x1ab85862                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:72)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: Missing properties for get, need one or more from (1 args) [userId]
	at org.apache.camel.support.component.AbstractApiProducer.findMethod(AbstractApiProducer.java:153)
	at org.apache.camel.support.component.AbstractApiProducer.process(AbstractApiProducer.java:72)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
2024-05-18 21:45:26,627 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[920D27C7B1CE627-0000000000000002]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:72)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: Missing properties for get, need one or more from (1 args) [userId]
	at org.apache.camel.support.component.AbstractApiProducer.findMethod(AbstractApiProducer.java:153)
	at org.apache.camel.support.component.AbstractApiProducer.process(AbstractApiProducer.java:72)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
2024-05-18 21:45:27,347 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 920D27C7B1CE627-0000000000000003 on ExchangeId: 920D27C7B1CE627-0000000000000003). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          136
	...
                                         route1/process1                Processor@0x1ab85862                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:72)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: Missing properties for get, need one or more from (1 args) [userId]
	at org.apache.camel.support.component.AbstractApiProducer.findMethod(AbstractApiProducer.java:153)
	at org.apache.camel.support.component.AbstractApiProducer.process(AbstractApiProducer.java:72)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
2024-05-18 21:45:27,348 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[920D27C7B1CE627-0000000000000003]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:72)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: Missing properties for get, need one or more from (1 args) [userId]
	at org.apache.camel.support.component.AbstractApiProducer.findMethod(AbstractApiProducer.java:153)
	at org.apache.camel.support.component.AbstractApiProducer.process(AbstractApiProducer.java:72)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 26 common frames omitted
2024-05-18 21:45:27,760 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 21:45:27,767 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 21:45:27,767 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail://messages/list)
2024-05-18 21:45:27,769 WARN [SpringApplicationShutdownHook] o.a.c.i.e.DefaultInflightRepository [DefaultInflightRepository.java:202] Shutting down while there are still 4 inflight exchanges.
2024-05-18 21:45:27,771 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 10ms (uptime:4s)
2024-05-18 21:46:38,325 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 8352 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 21:46:38,327 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 21:46:39,064 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 21:46:39,080 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 21:46:39,081 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 21:46:39,123 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 21:46:39,124 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 765 ms
2024-05-18 21:46:39,885 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 21:46:39,954 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 21:46:39,964 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 21:46:39,965 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail://messages/list)
2024-05-18 21:46:39,965 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 9ms (build:0ms init:0ms start:9ms)
2024-05-18 21:46:39,967 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 1.845 seconds (process running for 2.28)
2024-05-18 21:46:42,263 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: D783C09EE45CC9B-0000000000000000 on ExchangeId: D783C09EE45CC9B-0000000000000000). Exhausted after delivery attempt: 1 caught: org.apache.camel.RuntimeCamelException: Missing properties for get, need one or more from (1 args) [userId]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          849
	...
                                         route1/process1                Processor@0x67d180e4                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.RuntimeCamelException: Missing properties for get, need one or more from (1 args) [userId]
	at org.apache.camel.support.component.AbstractApiProducer.findMethod(AbstractApiProducer.java:153)
	at org.apache.camel.support.component.AbstractApiProducer.process(AbstractApiProducer.java:72)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:148)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:131)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:72)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 21:46:42,265 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[D783C09EE45CC9B-0000000000000000]. Caused by: [org.apache.camel.RuntimeCamelException - Missing properties for get, need one or more from (1 args) [userId]]
org.apache.camel.RuntimeCamelException: Missing properties for get, need one or more from (1 args) [userId]
	at org.apache.camel.support.component.AbstractApiProducer.findMethod(AbstractApiProducer.java:153)
	at org.apache.camel.support.component.AbstractApiProducer.process(AbstractApiProducer.java:72)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:148)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:131)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:72)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 21:46:43,332 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: D783C09EE45CC9B-0000000000000001 on ExchangeId: D783C09EE45CC9B-0000000000000001). Exhausted after delivery attempt: 1 caught: org.apache.camel.RuntimeCamelException: Missing properties for get, need one or more from (1 args) [userId]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          477
	...
                                         route1/process1                Processor@0x67d180e4                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.RuntimeCamelException: Missing properties for get, need one or more from (1 args) [userId]
	at org.apache.camel.support.component.AbstractApiProducer.findMethod(AbstractApiProducer.java:153)
	at org.apache.camel.support.component.AbstractApiProducer.process(AbstractApiProducer.java:72)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:148)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:131)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:72)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 21:46:43,332 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[D783C09EE45CC9B-0000000000000001]. Caused by: [org.apache.camel.RuntimeCamelException - Missing properties for get, need one or more from (1 args) [userId]]
org.apache.camel.RuntimeCamelException: Missing properties for get, need one or more from (1 args) [userId]
	at org.apache.camel.support.component.AbstractApiProducer.findMethod(AbstractApiProducer.java:153)
	at org.apache.camel.support.component.AbstractApiProducer.process(AbstractApiProducer.java:72)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:148)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:131)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:72)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 21:46:44,731 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: D783C09EE45CC9B-0000000000000002 on ExchangeId: D783C09EE45CC9B-0000000000000002). Exhausted after delivery attempt: 1 caught: org.apache.camel.RuntimeCamelException: Missing properties for get, need one or more from (1 args) [userId]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          812
	...
                                         route1/process1                Processor@0x67d180e4                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.RuntimeCamelException: Missing properties for get, need one or more from (1 args) [userId]
	at org.apache.camel.support.component.AbstractApiProducer.findMethod(AbstractApiProducer.java:153)
	at org.apache.camel.support.component.AbstractApiProducer.process(AbstractApiProducer.java:72)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:148)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:131)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:72)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 21:46:44,732 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[D783C09EE45CC9B-0000000000000002]. Caused by: [org.apache.camel.RuntimeCamelException - Missing properties for get, need one or more from (1 args) [userId]]
org.apache.camel.RuntimeCamelException: Missing properties for get, need one or more from (1 args) [userId]
	at org.apache.camel.support.component.AbstractApiProducer.findMethod(AbstractApiProducer.java:153)
	at org.apache.camel.support.component.AbstractApiProducer.process(AbstractApiProducer.java:72)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:148)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:131)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:72)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 21:46:45,065 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 21:46:45,068 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 21:46:45,069 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail://messages/list)
2024-05-18 21:46:45,072 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 6ms (uptime:5s)
2024-05-18 21:48:24,757 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 18572 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 21:48:24,759 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 21:48:25,539 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 21:48:25,547 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 21:48:25,547 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 21:48:25,590 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 21:48:25,591 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 798 ms
2024-05-18 21:48:26,350 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 21:48:26,419 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 21:48:26,429 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 21:48:26,429 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail://messages/list)
2024-05-18 21:48:26,430 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 9ms (build:0ms init:0ms start:9ms)
2024-05-18 21:48:26,432 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 1.908 seconds (process running for 2.4)
2024-05-18 21:48:28,133 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 7D43D6C4E8FEB0E-0000000000000000 on ExchangeId: 7D43D6C4E8FEB0E-0000000000000000). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          155
	...
                                         route1/process1                Processor@0x7131d668                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBodyAndHeaders(DefaultProducerTemplate.java:440)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:75)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: Missing properties for get, need one or more from (1 args) [userId]
	at org.apache.camel.support.component.AbstractApiProducer.findMethod(AbstractApiProducer.java:153)
	at org.apache.camel.support.component.AbstractApiProducer.process(AbstractApiProducer.java:72)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBodyAndHeaders(DefaultProducerTemplate.java:439)
	... 25 common frames omitted
2024-05-18 21:48:28,136 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[7D43D6C4E8FEB0E-0000000000000000]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBodyAndHeaders(DefaultProducerTemplate.java:440)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:75)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: Missing properties for get, need one or more from (1 args) [userId]
	at org.apache.camel.support.component.AbstractApiProducer.findMethod(AbstractApiProducer.java:153)
	at org.apache.camel.support.component.AbstractApiProducer.process(AbstractApiProducer.java:72)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBodyAndHeaders(DefaultProducerTemplate.java:439)
	... 25 common frames omitted
2024-05-18 21:48:28,878 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 7D43D6C4E8FEB0E-0000000000000001 on ExchangeId: 7D43D6C4E8FEB0E-0000000000000001). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          154
	...
                                         route1/process1                Processor@0x7131d668                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBodyAndHeaders(DefaultProducerTemplate.java:440)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:75)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: Missing properties for get, need one or more from (1 args) [userId]
	at org.apache.camel.support.component.AbstractApiProducer.findMethod(AbstractApiProducer.java:153)
	at org.apache.camel.support.component.AbstractApiProducer.process(AbstractApiProducer.java:72)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBodyAndHeaders(DefaultProducerTemplate.java:439)
	... 25 common frames omitted
2024-05-18 21:48:28,879 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[7D43D6C4E8FEB0E-0000000000000001]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBodyAndHeaders(DefaultProducerTemplate.java:440)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:75)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: Missing properties for get, need one or more from (1 args) [userId]
	at org.apache.camel.support.component.AbstractApiProducer.findMethod(AbstractApiProducer.java:153)
	at org.apache.camel.support.component.AbstractApiProducer.process(AbstractApiProducer.java:72)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBodyAndHeaders(DefaultProducerTemplate.java:439)
	... 25 common frames omitted
2024-05-18 21:48:29,606 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 7D43D6C4E8FEB0E-0000000000000002 on ExchangeId: 7D43D6C4E8FEB0E-0000000000000002). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          140
	...
                                         route1/process1                Processor@0x7131d668                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBodyAndHeaders(DefaultProducerTemplate.java:440)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:75)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: Missing properties for get, need one or more from (1 args) [userId]
	at org.apache.camel.support.component.AbstractApiProducer.findMethod(AbstractApiProducer.java:153)
	at org.apache.camel.support.component.AbstractApiProducer.process(AbstractApiProducer.java:72)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBodyAndHeaders(DefaultProducerTemplate.java:439)
	... 25 common frames omitted
2024-05-18 21:48:29,607 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[7D43D6C4E8FEB0E-0000000000000002]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBodyAndHeaders(DefaultProducerTemplate.java:440)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:75)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: Missing properties for get, need one or more from (1 args) [userId]
	at org.apache.camel.support.component.AbstractApiProducer.findMethod(AbstractApiProducer.java:153)
	at org.apache.camel.support.component.AbstractApiProducer.process(AbstractApiProducer.java:72)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBodyAndHeaders(DefaultProducerTemplate.java:439)
	... 25 common frames omitted
2024-05-18 21:48:30,338 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 21:48:30,341 INFO [Camel (camel-1) thread #2 - ShutdownTask] o.a.c.i.e.DefaultShutdownStrategy [DefaultShutdownStrategy.java:689] Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 45 seconds. Inflights per route: [route1 = 1]
2024-05-18 21:48:30,360 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 7D43D6C4E8FEB0E-0000000000000003 on ExchangeId: 7D43D6C4E8FEB0E-0000000000000003). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          167
	...
                                         route1/process1                Processor@0x7131d668                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBodyAndHeaders(DefaultProducerTemplate.java:440)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:75)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: Missing properties for get, need one or more from (1 args) [userId]
	at org.apache.camel.support.component.AbstractApiProducer.findMethod(AbstractApiProducer.java:153)
	at org.apache.camel.support.component.AbstractApiProducer.process(AbstractApiProducer.java:72)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBodyAndHeaders(DefaultProducerTemplate.java:439)
	... 25 common frames omitted
2024-05-18 21:48:30,361 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[7D43D6C4E8FEB0E-0000000000000003]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBodyAndHeaders(DefaultProducerTemplate.java:440)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:75)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: Missing properties for get, need one or more from (1 args) [userId]
	at org.apache.camel.support.component.AbstractApiProducer.findMethod(AbstractApiProducer.java:153)
	at org.apache.camel.support.component.AbstractApiProducer.process(AbstractApiProducer.java:72)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBodyAndHeaders(DefaultProducerTemplate.java:439)
	... 25 common frames omitted
2024-05-18 21:48:31,359 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 21:48:31,359 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail://messages/list)
2024-05-18 21:48:31,361 WARN [SpringApplicationShutdownHook] o.a.c.i.e.DefaultInflightRepository [DefaultInflightRepository.java:202] Shutting down while there are still 4 inflight exchanges.
2024-05-18 21:48:31,362 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 1s24ms (uptime:4s)
2024-05-18 21:50:04,767 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 12460 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 21:50:04,770 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 21:50:05,529 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 21:50:05,537 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 21:50:05,537 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 21:50:05,579 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 21:50:05,579 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 772 ms
2024-05-18 21:50:06,365 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 21:50:06,435 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 21:50:06,444 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 21:50:06,444 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail://messages/list)
2024-05-18 21:50:06,445 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 9ms (build:0ms init:0ms start:9ms)
2024-05-18 21:50:06,447 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 1.899 seconds (process running for 2.364)
2024-05-18 21:50:08,178 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: F49CD9C028FA7FF-0000000000000000 on ExchangeId: F49CD9C028FA7FF-0000000000000000). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          248
	...
                                         route1/process1                Processor@0x11a67420                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBodyAndHeaders(DefaultProducerTemplate.java:440)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:76)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:51)
	at org.apache.camel.support.component.AbstractApiProducer$1.run(AbstractApiProducer.java:89)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	... 3 common frames omitted
Caused by: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:49)
	... 7 common frames omitted
2024-05-18 21:50:08,181 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[F49CD9C028FA7FF-0000000000000000]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBodyAndHeaders(DefaultProducerTemplate.java:440)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:76)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:51)
	at org.apache.camel.support.component.AbstractApiProducer$1.run(AbstractApiProducer.java:89)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	... 3 common frames omitted
Caused by: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:49)
	... 7 common frames omitted
2024-05-18 21:50:09,005 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: F49CD9C028FA7FF-0000000000000001 on ExchangeId: F49CD9C028FA7FF-0000000000000001). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          246
	...
                                         route1/process1                Processor@0x11a67420                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBodyAndHeaders(DefaultProducerTemplate.java:440)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:76)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:51)
	at org.apache.camel.support.component.AbstractApiProducer$1.run(AbstractApiProducer.java:89)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	... 3 common frames omitted
Caused by: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:49)
	... 7 common frames omitted
2024-05-18 21:50:09,007 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[F49CD9C028FA7FF-0000000000000001]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBodyAndHeaders(DefaultProducerTemplate.java:440)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:76)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:51)
	at org.apache.camel.support.component.AbstractApiProducer$1.run(AbstractApiProducer.java:89)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	... 3 common frames omitted
Caused by: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:49)
	... 7 common frames omitted
2024-05-18 21:50:09,789 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: F49CD9C028FA7FF-0000000000000002 on ExchangeId: F49CD9C028FA7FF-0000000000000002). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          207
	...
                                         route1/process1                Processor@0x11a67420                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBodyAndHeaders(DefaultProducerTemplate.java:440)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:76)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:51)
	at org.apache.camel.support.component.AbstractApiProducer$1.run(AbstractApiProducer.java:89)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	... 3 common frames omitted
Caused by: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:49)
	... 7 common frames omitted
2024-05-18 21:50:09,790 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[F49CD9C028FA7FF-0000000000000002]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBodyAndHeaders(DefaultProducerTemplate.java:440)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:76)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:51)
	at org.apache.camel.support.component.AbstractApiProducer$1.run(AbstractApiProducer.java:89)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	... 3 common frames omitted
Caused by: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:49)
	... 7 common frames omitted
2024-05-18 21:50:10,461 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 21:50:10,474 INFO [Camel (camel-1) thread #5 - ShutdownTask] o.a.c.i.e.DefaultShutdownStrategy [DefaultShutdownStrategy.java:689] Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 45 seconds. Inflights per route: [route1 = 1]
2024-05-18 21:50:10,632 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: F49CD9C028FA7FF-0000000000000003 on ExchangeId: F49CD9C028FA7FF-0000000000000003). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          222
	...
                                         route1/process1                Processor@0x11a67420                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBodyAndHeaders(DefaultProducerTemplate.java:440)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:76)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:51)
	at org.apache.camel.support.component.AbstractApiProducer$1.run(AbstractApiProducer.java:89)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	... 3 common frames omitted
Caused by: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:49)
	... 7 common frames omitted
2024-05-18 21:50:10,633 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[F49CD9C028FA7FF-0000000000000003]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBodyAndHeaders(DefaultProducerTemplate.java:440)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:76)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:51)
	at org.apache.camel.support.component.AbstractApiProducer$1.run(AbstractApiProducer.java:89)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	... 3 common frames omitted
Caused by: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:49)
	... 7 common frames omitted
2024-05-18 21:50:11,478 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 21:50:11,478 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail://messages/list)
2024-05-18 21:50:11,480 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 1s19ms (uptime:5s)
2024-05-18 21:51:52,655 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 20644 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 21:51:52,657 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 21:51:53,386 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 21:51:53,394 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 21:51:53,395 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 21:51:53,438 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 21:51:53,438 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 744 ms
2024-05-18 21:51:54,191 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 21:51:54,259 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 21:51:54,269 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 21:51:54,269 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail://messages/list)
2024-05-18 21:51:54,270 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 9ms (build:0ms init:0ms start:9ms)
2024-05-18 21:51:54,271 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 1.836 seconds (process running for 2.285)
2024-05-18 21:51:56,027 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 7DA91254EF7BB40-0000000000000000 on ExchangeId: 7DA91254EF7BB40-0000000000000000). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          260
	...
                                         route1/process1                Processor@0x666b91db                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBodyAndHeaders(DefaultProducerTemplate.java:440)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:76)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:51)
	at org.apache.camel.support.component.AbstractApiProducer$1.run(AbstractApiProducer.java:89)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	... 3 common frames omitted
Caused by: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:49)
	... 7 common frames omitted
2024-05-18 21:51:56,030 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[7DA91254EF7BB40-0000000000000000]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBodyAndHeaders(DefaultProducerTemplate.java:440)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:76)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:51)
	at org.apache.camel.support.component.AbstractApiProducer$1.run(AbstractApiProducer.java:89)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	... 3 common frames omitted
Caused by: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:49)
	... 7 common frames omitted
2024-05-18 21:51:56,984 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 7DA91254EF7BB40-0000000000000001 on ExchangeId: 7DA91254EF7BB40-0000000000000001). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          220
	...
                                         route1/process1                Processor@0x666b91db                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBodyAndHeaders(DefaultProducerTemplate.java:440)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:76)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:51)
	at org.apache.camel.support.component.AbstractApiProducer$1.run(AbstractApiProducer.java:89)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	... 3 common frames omitted
Caused by: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:49)
	... 7 common frames omitted
2024-05-18 21:51:56,984 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[7DA91254EF7BB40-0000000000000001]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBodyAndHeaders(DefaultProducerTemplate.java:440)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:76)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:51)
	at org.apache.camel.support.component.AbstractApiProducer$1.run(AbstractApiProducer.java:89)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	... 3 common frames omitted
Caused by: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:49)
	... 7 common frames omitted
2024-05-18 21:51:57,829 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 7DA91254EF7BB40-0000000000000002 on ExchangeId: 7DA91254EF7BB40-0000000000000002). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          255
	...
                                         route1/process1                Processor@0x666b91db                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBodyAndHeaders(DefaultProducerTemplate.java:440)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:76)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:51)
	at org.apache.camel.support.component.AbstractApiProducer$1.run(AbstractApiProducer.java:89)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	... 3 common frames omitted
Caused by: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:49)
	... 7 common frames omitted
2024-05-18 21:51:57,831 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[7DA91254EF7BB40-0000000000000002]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBodyAndHeaders(DefaultProducerTemplate.java:440)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:76)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:51)
	at org.apache.camel.support.component.AbstractApiProducer$1.run(AbstractApiProducer.java:89)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	... 3 common frames omitted
Caused by: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:49)
	... 7 common frames omitted
2024-05-18 21:51:58,151 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 21:51:58,163 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 21:51:58,163 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail://messages/list)
2024-05-18 21:51:58,166 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 14ms (uptime:3s)
2024-05-18 21:52:27,495 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 292 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 21:52:27,497 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 21:52:28,291 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 21:52:28,301 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 21:52:28,302 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 21:52:28,354 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 21:52:28,354 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 820 ms
2024-05-18 21:52:29,160 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 21:52:29,229 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 21:52:29,239 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 21:52:29,240 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail://messages/list)
2024-05-18 21:52:29,240 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 9ms (build:0ms init:0ms start:9ms)
2024-05-18 21:52:29,242 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 1.966 seconds (process running for 2.443)
2024-05-18 21:52:30,978 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 03A38DA8B3D9218-0000000000000000 on ExchangeId: 03A38DA8B3D9218-0000000000000000). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          271
	...
                                         route1/process1                Processor@0x11a67420                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBodyAndHeaders(DefaultProducerTemplate.java:440)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:76)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:51)
	at org.apache.camel.support.component.AbstractApiProducer$1.run(AbstractApiProducer.java:89)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	... 3 common frames omitted
Caused by: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:49)
	... 7 common frames omitted
2024-05-18 21:52:30,980 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[03A38DA8B3D9218-0000000000000000]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBodyAndHeaders(DefaultProducerTemplate.java:440)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:76)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:51)
	at org.apache.camel.support.component.AbstractApiProducer$1.run(AbstractApiProducer.java:89)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	... 3 common frames omitted
Caused by: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:49)
	... 7 common frames omitted
2024-05-18 21:52:31,802 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 03A38DA8B3D9218-0000000000000001 on ExchangeId: 03A38DA8B3D9218-0000000000000001). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          235
	...
                                         route1/process1                Processor@0x11a67420                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBodyAndHeaders(DefaultProducerTemplate.java:440)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:76)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:51)
	at org.apache.camel.support.component.AbstractApiProducer$1.run(AbstractApiProducer.java:89)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	... 3 common frames omitted
Caused by: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:49)
	... 7 common frames omitted
2024-05-18 21:52:31,805 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[03A38DA8B3D9218-0000000000000001]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBodyAndHeaders(DefaultProducerTemplate.java:440)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:76)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:51)
	at org.apache.camel.support.component.AbstractApiProducer$1.run(AbstractApiProducer.java:89)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	... 3 common frames omitted
Caused by: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:49)
	... 7 common frames omitted
2024-05-18 21:52:32,599 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 03A38DA8B3D9218-0000000000000002 on ExchangeId: 03A38DA8B3D9218-0000000000000002). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          216
	...
                                         route1/process1                Processor@0x11a67420                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBodyAndHeaders(DefaultProducerTemplate.java:440)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:76)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:51)
	at org.apache.camel.support.component.AbstractApiProducer$1.run(AbstractApiProducer.java:89)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	... 3 common frames omitted
Caused by: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:49)
	... 7 common frames omitted
2024-05-18 21:52:32,600 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[03A38DA8B3D9218-0000000000000002]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBodyAndHeaders(DefaultProducerTemplate.java:440)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:76)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:51)
	at org.apache.camel.support.component.AbstractApiProducer$1.run(AbstractApiProducer.java:89)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	... 3 common frames omitted
Caused by: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:49)
	... 7 common frames omitted
2024-05-18 21:52:33,415 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 03A38DA8B3D9218-0000000000000003 on ExchangeId: 03A38DA8B3D9218-0000000000000003). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          211
	...
                                         route1/process1                Processor@0x11a67420                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBodyAndHeaders(DefaultProducerTemplate.java:440)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:76)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:51)
	at org.apache.camel.support.component.AbstractApiProducer$1.run(AbstractApiProducer.java:89)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	... 3 common frames omitted
Caused by: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:49)
	... 7 common frames omitted
2024-05-18 21:52:33,416 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[03A38DA8B3D9218-0000000000000003]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBodyAndHeaders(DefaultProducerTemplate.java:440)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:76)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:51)
	at org.apache.camel.support.component.AbstractApiProducer$1.run(AbstractApiProducer.java:89)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	... 3 common frames omitted
Caused by: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:49)
	... 7 common frames omitted
2024-05-18 21:52:33,854 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 21:52:33,861 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 21:52:33,861 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail://messages/list)
2024-05-18 21:52:33,866 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 12ms (uptime:4s)
2024-05-18 22:00:32,370 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 12304 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 22:00:32,372 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 22:00:33,124 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 22:00:33,132 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 22:00:33,132 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 22:00:33,172 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 22:00:33,172 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 764 ms
2024-05-18 22:00:33,932 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 22:00:34,006 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 22:00:34,017 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 22:00:34,017 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail://messages/list)
2024-05-18 22:00:34,017 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 9ms (build:0ms init:0ms start:9ms)
2024-05-18 22:00:34,019 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 1.878 seconds (process running for 2.336)
2024-05-18 22:00:35,833 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 3683AECFD11F77D-0000000000000000 on ExchangeId: 3683AECFD11F77D-0000000000000000). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          300
	...
                                         route1/process1                Processor@0x1325f967                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBodyAndHeaders(DefaultProducerTemplate.java:440)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:76)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:51)
	at org.apache.camel.support.component.AbstractApiProducer$1.run(AbstractApiProducer.java:89)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	... 3 common frames omitted
Caused by: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:49)
	... 7 common frames omitted
2024-05-18 22:00:35,835 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[3683AECFD11F77D-0000000000000000]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBodyAndHeaders(DefaultProducerTemplate.java:440)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:76)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:51)
	at org.apache.camel.support.component.AbstractApiProducer$1.run(AbstractApiProducer.java:89)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	... 3 common frames omitted
Caused by: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:49)
	... 7 common frames omitted
2024-05-18 22:00:36,642 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 3683AECFD11F77D-0000000000000001 on ExchangeId: 3683AECFD11F77D-0000000000000001). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          220
	...
                                         route1/process1                Processor@0x1325f967                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBodyAndHeaders(DefaultProducerTemplate.java:440)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:76)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:51)
	at org.apache.camel.support.component.AbstractApiProducer$1.run(AbstractApiProducer.java:89)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	... 3 common frames omitted
Caused by: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:49)
	... 7 common frames omitted
2024-05-18 22:00:36,644 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[3683AECFD11F77D-0000000000000001]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBodyAndHeaders(DefaultProducerTemplate.java:440)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:76)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:51)
	at org.apache.camel.support.component.AbstractApiProducer$1.run(AbstractApiProducer.java:89)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	... 3 common frames omitted
Caused by: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:49)
	... 7 common frames omitted
2024-05-18 22:00:37,636 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 3683AECFD11F77D-0000000000000002 on ExchangeId: 3683AECFD11F77D-0000000000000002). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          205
	...
                                         route1/process1                Processor@0x1325f967                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBodyAndHeaders(DefaultProducerTemplate.java:440)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:76)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:51)
	at org.apache.camel.support.component.AbstractApiProducer$1.run(AbstractApiProducer.java:89)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	... 3 common frames omitted
Caused by: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:49)
	... 7 common frames omitted
2024-05-18 22:00:37,637 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[3683AECFD11F77D-0000000000000002]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBodyAndHeaders(DefaultProducerTemplate.java:440)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:76)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:51)
	at org.apache.camel.support.component.AbstractApiProducer$1.run(AbstractApiProducer.java:89)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	... 3 common frames omitted
Caused by: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:49)
	... 7 common frames omitted
2024-05-18 22:00:38,174 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 22:00:38,183 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 22:00:38,183 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail://messages/list)
2024-05-18 22:00:38,186 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 11ms (uptime:4s)
2024-05-18 22:00:53,890 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 4588 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 22:00:53,892 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 22:00:54,618 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 22:00:54,625 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 22:00:54,625 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 22:00:54,666 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 22:00:54,667 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 740 ms
2024-05-18 22:00:55,434 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 22:00:55,505 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 22:00:55,515 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 22:00:55,515 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail://messages/list)
2024-05-18 22:00:55,515 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 9ms (build:0ms init:0ms start:9ms)
2024-05-18 22:00:55,517 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 1.847 seconds (process running for 2.289)
2024-05-18 22:00:57,313 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 07F57FFE5750AAF-0000000000000000 on ExchangeId: 07F57FFE5750AAF-0000000000000000). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          315
	...
                                         route1/process1                Processor@0x7096d451                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBodyAndHeaders(DefaultProducerTemplate.java:440)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:76)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:51)
	at org.apache.camel.support.component.AbstractApiProducer$1.run(AbstractApiProducer.java:89)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	... 3 common frames omitted
Caused by: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:49)
	... 7 common frames omitted
2024-05-18 22:00:57,317 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[07F57FFE5750AAF-0000000000000000]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBodyAndHeaders(DefaultProducerTemplate.java:440)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:76)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:51)
	at org.apache.camel.support.component.AbstractApiProducer$1.run(AbstractApiProducer.java:89)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	... 3 common frames omitted
Caused by: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:49)
	... 7 common frames omitted
2024-05-18 22:00:58,099 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 07F57FFE5750AAF-0000000000000001 on ExchangeId: 07F57FFE5750AAF-0000000000000001). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          207
	...
                                         route1/process1                Processor@0x7096d451                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBodyAndHeaders(DefaultProducerTemplate.java:440)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:76)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:51)
	at org.apache.camel.support.component.AbstractApiProducer$1.run(AbstractApiProducer.java:89)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	... 3 common frames omitted
Caused by: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:49)
	... 7 common frames omitted
2024-05-18 22:00:58,100 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[07F57FFE5750AAF-0000000000000001]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBodyAndHeaders(DefaultProducerTemplate.java:440)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:76)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:51)
	at org.apache.camel.support.component.AbstractApiProducer$1.run(AbstractApiProducer.java:89)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	... 3 common frames omitted
Caused by: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:49)
	... 7 common frames omitted
2024-05-18 22:00:58,892 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 07F57FFE5750AAF-0000000000000002 on ExchangeId: 07F57FFE5750AAF-0000000000000002). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          218
	...
                                         route1/process1                Processor@0x7096d451                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBodyAndHeaders(DefaultProducerTemplate.java:440)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:76)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:51)
	at org.apache.camel.support.component.AbstractApiProducer$1.run(AbstractApiProducer.java:89)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	... 3 common frames omitted
Caused by: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:49)
	... 7 common frames omitted
2024-05-18 22:00:58,892 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[07F57FFE5750AAF-0000000000000002]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBodyAndHeaders(DefaultProducerTemplate.java:440)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:76)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:51)
	at org.apache.camel.support.component.AbstractApiProducer$1.run(AbstractApiProducer.java:89)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	... 3 common frames omitted
Caused by: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:49)
	... 7 common frames omitted
2024-05-18 22:00:59,289 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 22:00:59,293 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 22:00:59,293 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail://messages/list)
2024-05-18 22:00:59,295 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 5ms (uptime:3s)
2024-05-18 22:01:29,882 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 25624 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 22:01:29,885 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 22:01:30,612 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 22:01:30,620 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 22:01:30,621 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 22:01:30,667 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 22:01:30,667 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 748 ms
2024-05-18 22:01:31,414 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 22:01:31,483 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 22:01:31,493 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 22:01:31,493 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail://messages/list)
2024-05-18 22:01:31,494 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 9ms (build:0ms init:0ms start:9ms)
2024-05-18 22:01:31,495 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 1.845 seconds (process running for 2.306)
2024-05-18 22:01:33,209 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 45943EBADB7F7AC-0000000000000000 on ExchangeId: 45943EBADB7F7AC-0000000000000000). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          259
	...
                                         route1/process1                Processor@0x1ab85862                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBodyAndHeaders(DefaultProducerTemplate.java:440)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:76)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:51)
	at org.apache.camel.support.component.AbstractApiProducer$1.run(AbstractApiProducer.java:89)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	... 3 common frames omitted
Caused by: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:49)
	... 7 common frames omitted
2024-05-18 22:01:33,211 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[45943EBADB7F7AC-0000000000000000]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBodyAndHeaders(DefaultProducerTemplate.java:440)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:76)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:51)
	at org.apache.camel.support.component.AbstractApiProducer$1.run(AbstractApiProducer.java:89)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	... 3 common frames omitted
Caused by: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:49)
	... 7 common frames omitted
2024-05-18 22:01:34,042 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 45943EBADB7F7AC-0000000000000001 on ExchangeId: 45943EBADB7F7AC-0000000000000001). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          228
	...
                                         route1/process1                Processor@0x1ab85862                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBodyAndHeaders(DefaultProducerTemplate.java:440)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:76)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:51)
	at org.apache.camel.support.component.AbstractApiProducer$1.run(AbstractApiProducer.java:89)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	... 3 common frames omitted
Caused by: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:49)
	... 7 common frames omitted
2024-05-18 22:01:34,043 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[45943EBADB7F7AC-0000000000000001]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBodyAndHeaders(DefaultProducerTemplate.java:440)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:76)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:51)
	at org.apache.camel.support.component.AbstractApiProducer$1.run(AbstractApiProducer.java:89)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	... 3 common frames omitted
Caused by: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:49)
	... 7 common frames omitted
2024-05-18 22:01:34,835 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 45943EBADB7F7AC-0000000000000002 on ExchangeId: 45943EBADB7F7AC-0000000000000002). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          216
	...
                                         route1/process1                Processor@0x1ab85862                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBodyAndHeaders(DefaultProducerTemplate.java:440)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:76)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:51)
	at org.apache.camel.support.component.AbstractApiProducer$1.run(AbstractApiProducer.java:89)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	... 3 common frames omitted
Caused by: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:49)
	... 7 common frames omitted
2024-05-18 22:01:34,835 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[45943EBADB7F7AC-0000000000000002]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBodyAndHeaders(DefaultProducerTemplate.java:440)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:76)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:51)
	at org.apache.camel.support.component.AbstractApiProducer$1.run(AbstractApiProducer.java:89)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	... 3 common frames omitted
Caused by: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:49)
	... 7 common frames omitted
2024-05-18 22:01:34,894 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 22:01:34,900 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 22:01:34,901 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail://messages/list)
2024-05-18 22:01:34,906 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 11ms (uptime:3s)
2024-05-18 22:02:13,857 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 2124 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 22:02:13,860 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 22:02:14,665 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 22:02:14,675 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 22:02:14,675 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 22:02:14,722 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 22:02:14,723 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 825 ms
2024-05-18 22:02:15,581 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 22:02:15,654 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 22:02:15,665 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 22:02:15,666 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail://messages/list)
2024-05-18 22:02:15,666 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 10ms (build:0ms init:0ms start:10ms)
2024-05-18 22:02:15,668 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 2.027 seconds (process running for 2.483)
2024-05-18 22:02:17,446 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 5D4A181B137964B-0000000000000000 on ExchangeId: 5D4A181B137964B-0000000000000000). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          260
	...
                                         route1/process1                Processor@0x6c9e74f3                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBodyAndHeaders(DefaultProducerTemplate.java:440)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:76)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:51)
	at org.apache.camel.support.component.AbstractApiProducer$1.run(AbstractApiProducer.java:89)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	... 3 common frames omitted
Caused by: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:49)
	... 7 common frames omitted
2024-05-18 22:02:17,452 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[5D4A181B137964B-0000000000000000]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBodyAndHeaders(DefaultProducerTemplate.java:440)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:76)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:51)
	at org.apache.camel.support.component.AbstractApiProducer$1.run(AbstractApiProducer.java:89)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	... 3 common frames omitted
Caused by: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:49)
	... 7 common frames omitted
2024-05-18 22:02:18,303 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 5D4A181B137964B-0000000000000001 on ExchangeId: 5D4A181B137964B-0000000000000001). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          257
	...
                                         route1/process1                Processor@0x6c9e74f3                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBodyAndHeaders(DefaultProducerTemplate.java:440)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:76)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:51)
	at org.apache.camel.support.component.AbstractApiProducer$1.run(AbstractApiProducer.java:89)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	... 3 common frames omitted
Caused by: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:49)
	... 7 common frames omitted
2024-05-18 22:02:18,304 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[5D4A181B137964B-0000000000000001]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBodyAndHeaders(DefaultProducerTemplate.java:440)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:76)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:51)
	at org.apache.camel.support.component.AbstractApiProducer$1.run(AbstractApiProducer.java:89)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	... 3 common frames omitted
Caused by: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:49)
	... 7 common frames omitted
2024-05-18 22:02:19,097 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 5D4A181B137964B-0000000000000002 on ExchangeId: 5D4A181B137964B-0000000000000002). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          215
	...
                                         route1/process1                Processor@0x6c9e74f3                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBodyAndHeaders(DefaultProducerTemplate.java:440)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:76)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:51)
	at org.apache.camel.support.component.AbstractApiProducer$1.run(AbstractApiProducer.java:89)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	... 3 common frames omitted
Caused by: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:49)
	... 7 common frames omitted
2024-05-18 22:02:19,098 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[5D4A181B137964B-0000000000000002]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBodyAndHeaders(DefaultProducerTemplate.java:440)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:76)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:51)
	at org.apache.camel.support.component.AbstractApiProducer$1.run(AbstractApiProducer.java:89)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	... 3 common frames omitted
Caused by: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:49)
	... 7 common frames omitted
2024-05-18 22:02:19,496 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 22:02:19,505 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 22:02:19,505 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail://messages/list)
2024-05-18 22:02:19,514 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 18ms (uptime:3s)
2024-05-18 22:36:42,404 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 19540 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 22:36:42,406 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 22:36:43,191 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 22:36:43,198 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 22:36:43,198 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 22:36:43,250 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 22:36:43,250 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 807 ms
2024-05-18 22:36:44,021 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 22:36:44,095 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 22:36:44,106 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 22:36:44,106 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail://messages/list)
2024-05-18 22:36:44,106 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 9ms (build:0ms init:0ms start:9ms)
2024-05-18 22:36:44,108 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 1.918 seconds (process running for 2.394)
2024-05-18 22:36:59,881 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 22:36:59,885 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 22:36:59,885 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail://messages/list)
2024-05-18 22:36:59,887 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 6ms (uptime:15s)
2024-05-18 22:39:18,116 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 24612 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 22:39:18,117 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 22:39:18,854 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 22:39:18,871 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 22:39:18,871 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 22:39:18,915 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 22:39:18,916 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 768 ms
2024-05-18 22:39:19,679 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 22:39:19,786 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 22:39:19,794 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:2)
2024-05-18 22:39:19,795 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail://messages/list)
2024-05-18 22:39:19,795 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route2 (direct://processMessage)
2024-05-18 22:39:19,795 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 8ms (build:0ms init:0ms start:8ms)
2024-05-18 22:39:19,797 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 1.899 seconds (process running for 2.339)
2024-05-18 22:39:21,655 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: A8430FCAB037EBA-0000000000000001 on ExchangeId: A8430FCAB037EBA-0000000000000001). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          334
	...
                                         route2/process2                Processor@0x73852720                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:78)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:39:21,729 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: A8430FCAB037EBA-0000000000000002 on ExchangeId: A8430FCAB037EBA-0000000000000002). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f62485e53d1e37?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          409
	...
                                         route2/process2                Processor@0x73852720                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f62485e53d1e37?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:78)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:39:21,798 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: A8430FCAB037EBA-0000000000000003 on ExchangeId: A8430FCAB037EBA-0000000000000003). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f62409487742e0?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          476
	...
                                         route2/process2                Processor@0x73852720                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f62409487742e0?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:78)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:39:21,869 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: A8430FCAB037EBA-0000000000000004 on ExchangeId: A8430FCAB037EBA-0000000000000004). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f623dd3141f95b?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          548
	...
                                         route2/process2                Processor@0x73852720                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f623dd3141f95b?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:78)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:39:21,872 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[A8430FCAB037EBA-0000000000000000]. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f623dd3141f95b?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f623dd3141f95b?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:78)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:39:22,606 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: A8430FCAB037EBA-0000000000000006 on ExchangeId: A8430FCAB037EBA-0000000000000006). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          148
	...
                                         route2/process2                Processor@0x73852720                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:78)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:39:22,681 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: A8430FCAB037EBA-0000000000000007 on ExchangeId: A8430FCAB037EBA-0000000000000007). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f62485e53d1e37?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          224
	...
                                         route2/process2                Processor@0x73852720                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f62485e53d1e37?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:78)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:39:22,746 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: A8430FCAB037EBA-0000000000000008 on ExchangeId: A8430FCAB037EBA-0000000000000008). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f62409487742e0?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          289
	...
                                         route2/process2                Processor@0x73852720                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f62409487742e0?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:78)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:39:22,813 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: A8430FCAB037EBA-0000000000000009 on ExchangeId: A8430FCAB037EBA-0000000000000009). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f623dd3141f95b?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          356
	...
                                         route2/process2                Processor@0x73852720                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f623dd3141f95b?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:78)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:39:22,814 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[A8430FCAB037EBA-0000000000000005]. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f623dd3141f95b?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f623dd3141f95b?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:78)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:39:23,640 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: A8430FCAB037EBA-000000000000000B on ExchangeId: A8430FCAB037EBA-000000000000000B). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          140
	...
                                         route2/process2                Processor@0x73852720                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:78)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:39:23,697 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 22:39:23,707 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: A8430FCAB037EBA-000000000000000C on ExchangeId: A8430FCAB037EBA-000000000000000C). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f62485e53d1e37?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          206
	...
                                         route2/process2                Processor@0x73852720                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f62485e53d1e37?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:78)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:39:23,707 INFO [Camel (camel-1) thread #2 - ShutdownTask] o.a.c.i.e.DefaultShutdownStrategy [DefaultShutdownStrategy.java:689] Waiting as there are still 2 inflight and pending exchanges to complete, timeout in 45 seconds. Inflights per route: [route2 = 1, route1 = 1]
2024-05-18 22:39:23,770 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: A8430FCAB037EBA-000000000000000D on ExchangeId: A8430FCAB037EBA-000000000000000D). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f62409487742e0?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          270
	...
                                         route2/process2                Processor@0x73852720                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f62409487742e0?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:78)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:39:23,922 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: A8430FCAB037EBA-000000000000000E on ExchangeId: A8430FCAB037EBA-000000000000000E). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f623dd3141f95b?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          421
	...
                                         route2/process2                Processor@0x73852720                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f623dd3141f95b?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:78)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:39:23,923 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[A8430FCAB037EBA-000000000000000A]. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f623dd3141f95b?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f623dd3141f95b?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:78)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:39:24,720 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:2)
2024-05-18 22:39:24,720 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route2 (direct://processMessage)
2024-05-18 22:39:24,720 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail://messages/list)
2024-05-18 22:39:24,723 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 1s24ms (uptime:4s)
2024-05-18 22:43:20,286 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 14672 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 22:43:20,288 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 22:43:21,038 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 22:43:21,046 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 22:43:21,046 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 22:43:21,090 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 22:43:21,090 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 767 ms
2024-05-18 22:43:21,890 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 22:43:21,986 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 22:43:21,996 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:2)
2024-05-18 22:43:21,996 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail://messages/list)
2024-05-18 22:43:21,996 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route2 (direct://processMessage)
2024-05-18 22:43:21,996 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 8ms (build:0ms init:0ms start:8ms)
2024-05-18 22:43:21,998 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 1.933 seconds (process running for 2.397)
2024-05-18 22:43:23,649 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: F70196005D6506B-0000000000000001 on ExchangeId: F70196005D6506B-0000000000000001). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          161
	...
                                         route2/process2                Processor@0x53fc870f                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:79)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:43:23,721 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: F70196005D6506B-0000000000000002 on ExchangeId: F70196005D6506B-0000000000000002). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f62485e53d1e37?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          233
	...
                                         route2/process2                Processor@0x53fc870f                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f62485e53d1e37?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:79)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:43:23,834 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: F70196005D6506B-0000000000000003 on ExchangeId: F70196005D6506B-0000000000000003). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f62409487742e0?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          346
	...
                                         route2/process2                Processor@0x53fc870f                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f62409487742e0?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:79)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:43:23,898 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: F70196005D6506B-0000000000000004 on ExchangeId: F70196005D6506B-0000000000000004). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f623dd3141f95b?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          409
	...
                                         route2/process2                Processor@0x53fc870f                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f623dd3141f95b?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:79)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:43:23,899 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[F70196005D6506B-0000000000000000]. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f623dd3141f95b?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f623dd3141f95b?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:79)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:43:24,301 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 22:43:24,307 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:2)
2024-05-18 22:43:24,308 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route2 (direct://processMessage)
2024-05-18 22:43:24,308 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail://messages/list)
2024-05-18 22:43:24,313 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 12ms (uptime:2s)
2024-05-18 22:44:23,538 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 19956 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 22:44:23,540 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 22:44:24,301 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 22:44:24,309 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 22:44:24,309 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 22:44:24,353 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 22:44:24,353 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 781 ms
2024-05-18 22:44:25,130 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 22:44:25,230 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 22:44:25,239 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:2)
2024-05-18 22:44:25,239 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail://messages/list)
2024-05-18 22:44:25,239 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route2 (direct://processMessage)
2024-05-18 22:44:25,239 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 7ms (build:0ms init:0ms start:7ms)
2024-05-18 22:44:25,241 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 1.904 seconds (process running for 2.379)
2024-05-18 22:44:26,923 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 2C140D03A724134-0000000000000001 on ExchangeId: 2C140D03A724134-0000000000000001). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          179
	...
                                         route2/process2                Processor@0x5c60f096                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:78)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:44:26,998 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 2C140D03A724134-0000000000000002 on ExchangeId: 2C140D03A724134-0000000000000002). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f62485e53d1e37
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          254
	...
                                         route2/process2                Processor@0x5c60f096                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f62485e53d1e37
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:78)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:44:27,093 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 2C140D03A724134-0000000000000003 on ExchangeId: 2C140D03A724134-0000000000000003). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f62409487742e0
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          349
	...
                                         route2/process2                Processor@0x5c60f096                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f62409487742e0
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:78)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:44:27,176 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 2C140D03A724134-0000000000000004 on ExchangeId: 2C140D03A724134-0000000000000004). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f623dd3141f95b
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          433
	...
                                         route2/process2                Processor@0x5c60f096                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f623dd3141f95b
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:78)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:44:27,178 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[2C140D03A724134-0000000000000000]. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f623dd3141f95b
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f623dd3141f95b
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:78)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:44:27,905 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 2C140D03A724134-0000000000000006 on ExchangeId: 2C140D03A724134-0000000000000006). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          137
	...
                                         route2/process2                Processor@0x5c60f096                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:78)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:44:27,977 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 2C140D03A724134-0000000000000007 on ExchangeId: 2C140D03A724134-0000000000000007). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f62485e53d1e37
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          209
	...
                                         route2/process2                Processor@0x5c60f096                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f62485e53d1e37
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:78)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:44:28,040 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 2C140D03A724134-0000000000000008 on ExchangeId: 2C140D03A724134-0000000000000008). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f62409487742e0
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          273
	...
                                         route2/process2                Processor@0x5c60f096                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f62409487742e0
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:78)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:44:28,108 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 2C140D03A724134-0000000000000009 on ExchangeId: 2C140D03A724134-0000000000000009). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f623dd3141f95b
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          340
	...
                                         route2/process2                Processor@0x5c60f096                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f623dd3141f95b
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:78)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:44:28,108 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[2C140D03A724134-0000000000000005]. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f623dd3141f95b
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f623dd3141f95b
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:78)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:44:28,659 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 22:44:28,668 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:2)
2024-05-18 22:44:28,668 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route2 (direct://processMessage)
2024-05-18 22:44:28,668 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail://messages/list)
2024-05-18 22:44:28,671 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 12ms (uptime:3s)
2024-05-18 22:47:08,151 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 25652 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 22:47:08,154 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 22:47:08,924 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 22:47:08,932 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 22:47:08,932 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 22:47:08,976 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 22:47:08,976 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 785 ms
2024-05-18 22:47:09,763 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 22:47:09,856 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 22:47:09,864 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:2)
2024-05-18 22:47:09,864 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail://messages/list)
2024-05-18 22:47:09,864 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route2 (direct://processMessage)
2024-05-18 22:47:09,864 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 7ms (build:0ms init:0ms start:7ms)
2024-05-18 22:47:09,866 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 1.94 seconds (process running for 2.404)
2024-05-18 22:47:11,526 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 99BB55EC54CD9AD-0000000000000001 on ExchangeId: 99BB55EC54CD9AD-0000000000000001). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          175
	...
                                         route2/process2                Processor@0x5ddf5118                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:78)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:47:11,604 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 99BB55EC54CD9AD-0000000000000002 on ExchangeId: 99BB55EC54CD9AD-0000000000000002). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f62485e53d1e37
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          252
	...
                                         route2/process2                Processor@0x5ddf5118                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f62485e53d1e37
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:78)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:47:11,698 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 99BB55EC54CD9AD-0000000000000003 on ExchangeId: 99BB55EC54CD9AD-0000000000000003). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f62409487742e0
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          346
	...
                                         route2/process2                Processor@0x5ddf5118                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f62409487742e0
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:78)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:47:11,772 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 99BB55EC54CD9AD-0000000000000004 on ExchangeId: 99BB55EC54CD9AD-0000000000000004). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f623dd3141f95b
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          420
	...
                                         route2/process2                Processor@0x5ddf5118                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f623dd3141f95b
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:78)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:47:11,773 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[99BB55EC54CD9AD-0000000000000000]. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f623dd3141f95b
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f623dd3141f95b
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:78)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:47:12,506 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 99BB55EC54CD9AD-0000000000000006 on ExchangeId: 99BB55EC54CD9AD-0000000000000006). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          144
	...
                                         route2/process2                Processor@0x5ddf5118                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:78)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:47:12,577 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 99BB55EC54CD9AD-0000000000000007 on ExchangeId: 99BB55EC54CD9AD-0000000000000007). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f62485e53d1e37
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          215
	...
                                         route2/process2                Processor@0x5ddf5118                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f62485e53d1e37
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:78)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:47:12,654 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 99BB55EC54CD9AD-0000000000000008 on ExchangeId: 99BB55EC54CD9AD-0000000000000008). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f62409487742e0
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          292
	...
                                         route2/process2                Processor@0x5ddf5118                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f62409487742e0
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:78)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:47:12,722 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 99BB55EC54CD9AD-0000000000000009 on ExchangeId: 99BB55EC54CD9AD-0000000000000009). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f623dd3141f95b
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          361
	...
                                         route2/process2                Processor@0x5ddf5118                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f623dd3141f95b
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:78)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:47:12,723 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[99BB55EC54CD9AD-0000000000000005]. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f623dd3141f95b
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f623dd3141f95b
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:78)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:47:13,436 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 99BB55EC54CD9AD-000000000000000B on ExchangeId: 99BB55EC54CD9AD-000000000000000B). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          138
	...
                                         route2/process2                Processor@0x5ddf5118                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:78)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:47:13,505 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 99BB55EC54CD9AD-000000000000000C on ExchangeId: 99BB55EC54CD9AD-000000000000000C). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f62485e53d1e37
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          206
	...
                                         route2/process2                Processor@0x5ddf5118                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f62485e53d1e37
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:78)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:47:13,586 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 99BB55EC54CD9AD-000000000000000D on ExchangeId: 99BB55EC54CD9AD-000000000000000D). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f62409487742e0
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          287
	...
                                         route2/process2                Processor@0x5ddf5118                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f62409487742e0
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:78)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:47:13,653 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 99BB55EC54CD9AD-000000000000000E on ExchangeId: 99BB55EC54CD9AD-000000000000000E). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f623dd3141f95b
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          355
	...
                                         route2/process2                Processor@0x5ddf5118                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f623dd3141f95b
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:78)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:47:13,653 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[99BB55EC54CD9AD-000000000000000A]. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f623dd3141f95b
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f623dd3141f95b
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:78)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:47:14,234 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 22:47:14,238 INFO [Camel (camel-1) thread #2 - ShutdownTask] o.a.c.i.e.DefaultShutdownStrategy [DefaultShutdownStrategy.java:689] Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 45 seconds. Inflights per route: [route1 = 1]
2024-05-18 22:47:14,368 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 99BB55EC54CD9AD-0000000000000010 on ExchangeId: 99BB55EC54CD9AD-0000000000000010). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          136
	...
                                         route2/process2                Processor@0x5ddf5118                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:78)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:47:14,437 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 99BB55EC54CD9AD-0000000000000011 on ExchangeId: 99BB55EC54CD9AD-0000000000000011). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f62485e53d1e37
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          205
	...
                                         route2/process2                Processor@0x5ddf5118                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f62485e53d1e37
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:78)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:47:14,497 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 99BB55EC54CD9AD-0000000000000012 on ExchangeId: 99BB55EC54CD9AD-0000000000000012). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f62409487742e0
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          264
	...
                                         route2/process2                Processor@0x5ddf5118                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f62409487742e0
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:78)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:47:14,606 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 99BB55EC54CD9AD-0000000000000013 on ExchangeId: 99BB55EC54CD9AD-0000000000000013). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f623dd3141f95b
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          373
	...
                                         route2/process2                Processor@0x5ddf5118                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f623dd3141f95b
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:78)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:47:14,607 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[99BB55EC54CD9AD-000000000000000F]. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f623dd3141f95b
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f623dd3141f95b
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:78)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:47:15,247 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:2)
2024-05-18 22:47:15,247 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route2 (direct://processMessage)
2024-05-18 22:47:15,248 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail://messages/list)
2024-05-18 22:47:15,252 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 1s17ms (uptime:5s)
2024-05-18 22:48:46,493 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 4872 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 22:48:46,496 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 22:48:47,275 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 22:48:47,283 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 22:48:47,284 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 22:48:47,332 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 22:48:47,332 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 805 ms
2024-05-18 22:48:47,910 WARN [main] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext [AbstractApplicationContext.java:632] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'processMessageRoute' defined in file [C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main\it\polito\communicationmanager\services\ProcessMessageRoute.class]: Unsatisfied dependency expressed through constructor parameter 2: No qualifying bean of type 'org.apache.camel.component.google.mail.GoogleMailEndpoint' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
2024-05-18 22:48:47,912 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Stopping service [Tomcat]
2024-05-18 22:48:47,922 INFO [main] o.s.b.a.l.ConditionEvaluationReportLogger [ConditionEvaluationReportLogger.java:82] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-05-18 22:48:47,936 ERROR [main] o.s.b.d.LoggingFailureAnalysisReporter [LoggingFailureAnalysisReporter.java:40] 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 2 of constructor in it.polito.communicationmanager.services.ProcessMessageRoute required a bean of type 'org.apache.camel.component.google.mail.GoogleMailEndpoint' that could not be found.


Action:

Consider defining a bean of type 'org.apache.camel.component.google.mail.GoogleMailEndpoint' in your configuration.

2024-05-18 22:49:54,815 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 23968 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 22:49:54,817 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 22:49:55,582 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 22:49:55,589 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 22:49:55,590 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 22:49:55,632 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 22:49:55,633 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 778 ms
2024-05-18 22:49:56,460 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 22:49:56,556 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 22:49:56,564 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:2)
2024-05-18 22:49:56,565 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail://messages/list)
2024-05-18 22:49:56,565 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route2 (direct://processMessage)
2024-05-18 22:49:56,565 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 7ms (build:0ms init:0ms start:7ms)
2024-05-18 22:49:56,567 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 1.956 seconds (process running for 2.392)
2024-05-18 22:49:58,259 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: C7F3F6A9153FB1F-0000000000000001 on ExchangeId: C7F3F6A9153FB1F-0000000000000001). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          163
	...
                                         route2/process2                Processor@0x1760e688                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:79)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:49:58,335 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: C7F3F6A9153FB1F-0000000000000002 on ExchangeId: C7F3F6A9153FB1F-0000000000000002). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f62485e53d1e37?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          238
	...
                                         route2/process2                Processor@0x1760e688                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f62485e53d1e37?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:79)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:49:58,405 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: C7F3F6A9153FB1F-0000000000000003 on ExchangeId: C7F3F6A9153FB1F-0000000000000003). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f62409487742e0?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          308
	...
                                         route2/process2                Processor@0x1760e688                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f62409487742e0?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:79)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:49:58,470 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: C7F3F6A9153FB1F-0000000000000004 on ExchangeId: C7F3F6A9153FB1F-0000000000000004). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f623dd3141f95b?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          373
	...
                                         route2/process2                Processor@0x1760e688                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f623dd3141f95b?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:79)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:49:58,470 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[C7F3F6A9153FB1F-0000000000000000]. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f623dd3141f95b?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f623dd3141f95b?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:79)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:49:59,191 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: C7F3F6A9153FB1F-0000000000000006 on ExchangeId: C7F3F6A9153FB1F-0000000000000006). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          138
	...
                                         route2/process2                Processor@0x1760e688                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:79)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:49:59,257 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: C7F3F6A9153FB1F-0000000000000007 on ExchangeId: C7F3F6A9153FB1F-0000000000000007). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f62485e53d1e37?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          203
	...
                                         route2/process2                Processor@0x1760e688                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f62485e53d1e37?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:79)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:49:59,324 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: C7F3F6A9153FB1F-0000000000000008 on ExchangeId: C7F3F6A9153FB1F-0000000000000008). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f62409487742e0?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          271
	...
                                         route2/process2                Processor@0x1760e688                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f62409487742e0?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:79)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:49:59,386 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: C7F3F6A9153FB1F-0000000000000009 on ExchangeId: C7F3F6A9153FB1F-0000000000000009). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f623dd3141f95b?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          333
	...
                                         route2/process2                Processor@0x1760e688                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f623dd3141f95b?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:79)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:49:59,387 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[C7F3F6A9153FB1F-0000000000000005]. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f623dd3141f95b?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f623dd3141f95b?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:79)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:50:00,093 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 22:50:00,102 INFO [Camel (camel-1) thread #2 - ShutdownTask] o.a.c.i.e.DefaultShutdownStrategy [DefaultShutdownStrategy.java:689] Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 45 seconds. Inflights per route: [route1 = 1]
2024-05-18 22:50:00,253 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: C7F3F6A9153FB1F-000000000000000B on ExchangeId: C7F3F6A9153FB1F-000000000000000B). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          281
	...
                                         route2/process2                Processor@0x1760e688                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:79)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:50:00,320 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: C7F3F6A9153FB1F-000000000000000C on ExchangeId: C7F3F6A9153FB1F-000000000000000C). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f62485e53d1e37?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          348
	...
                                         route2/process2                Processor@0x1760e688                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f62485e53d1e37?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:79)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:50:00,389 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: C7F3F6A9153FB1F-000000000000000D on ExchangeId: C7F3F6A9153FB1F-000000000000000D). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f62409487742e0?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          418
	...
                                         route2/process2                Processor@0x1760e688                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f62409487742e0?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:79)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:50:00,451 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: C7F3F6A9153FB1F-000000000000000E on ExchangeId: C7F3F6A9153FB1F-000000000000000E). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f623dd3141f95b?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          479
	...
                                         route2/process2                Processor@0x1760e688                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f623dd3141f95b?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:79)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:50:00,451 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[C7F3F6A9153FB1F-000000000000000A]. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f623dd3141f95b?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f623dd3141f95b?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:79)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:50:01,115 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:2)
2024-05-18 22:50:01,115 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route2 (direct://processMessage)
2024-05-18 22:50:01,116 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail://messages/list)
2024-05-18 22:50:01,118 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 1s24ms (uptime:4s)
2024-05-18 22:50:57,459 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 18912 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 22:50:57,462 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 22:50:58,205 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 22:50:58,212 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 22:50:58,213 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 22:50:58,263 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 22:50:58,263 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 763 ms
2024-05-18 22:50:59,033 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 22:50:59,133 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 22:50:59,143 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:2)
2024-05-18 22:50:59,143 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail://messages/list)
2024-05-18 22:50:59,143 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route2 (direct://processMessage)
2024-05-18 22:50:59,143 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 9ms (build:0ms init:0ms start:9ms)
2024-05-18 22:50:59,145 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 1.898 seconds (process running for 2.331)
2024-05-18 22:51:00,771 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 3B48AD50BCF17FF-0000000000000001 on ExchangeId: 3B48AD50BCF17FF-0000000000000001). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          156
	...
                                         route2/process2                Processor@0x1b9c716f                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:80)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:51:00,838 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 3B48AD50BCF17FF-0000000000000002 on ExchangeId: 3B48AD50BCF17FF-0000000000000002). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f62485e53d1e37?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          223
	...
                                         route2/process2                Processor@0x1b9c716f                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f62485e53d1e37?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:80)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:51:00,906 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 3B48AD50BCF17FF-0000000000000003 on ExchangeId: 3B48AD50BCF17FF-0000000000000003). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f62409487742e0?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          291
	...
                                         route2/process2                Processor@0x1b9c716f                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f62409487742e0?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:80)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:51:00,977 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 3B48AD50BCF17FF-0000000000000004 on ExchangeId: 3B48AD50BCF17FF-0000000000000004). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f623dd3141f95b?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          361
	...
                                         route2/process2                Processor@0x1b9c716f                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f623dd3141f95b?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:80)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:51:00,980 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[3B48AD50BCF17FF-0000000000000000]. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f623dd3141f95b?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f623dd3141f95b?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:80)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:51:01,762 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 3B48AD50BCF17FF-0000000000000006 on ExchangeId: 3B48AD50BCF17FF-0000000000000006). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          133
	...
                                         route2/process2                Processor@0x1b9c716f                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:80)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:51:01,984 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 3B48AD50BCF17FF-0000000000000007 on ExchangeId: 3B48AD50BCF17FF-0000000000000007). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f62485e53d1e37?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          355
	...
                                         route2/process2                Processor@0x1b9c716f                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f62485e53d1e37?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:80)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:51:02,051 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 3B48AD50BCF17FF-0000000000000008 on ExchangeId: 3B48AD50BCF17FF-0000000000000008). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f62409487742e0?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          423
	...
                                         route2/process2                Processor@0x1b9c716f                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f62409487742e0?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:80)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:51:02,092 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 22:51:02,096 INFO [Camel (camel-1) thread #2 - ShutdownTask] o.a.c.i.e.DefaultShutdownStrategy [DefaultShutdownStrategy.java:689] Waiting as there are still 2 inflight and pending exchanges to complete, timeout in 45 seconds. Inflights per route: [route2 = 1, route1 = 1]
2024-05-18 22:51:02,128 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 3B48AD50BCF17FF-0000000000000009 on ExchangeId: 3B48AD50BCF17FF-0000000000000009). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f623dd3141f95b?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          500
	...
                                         route2/process2                Processor@0x1b9c716f                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f623dd3141f95b?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:80)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:51:02,130 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[3B48AD50BCF17FF-0000000000000005]. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f623dd3141f95b?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f623dd3141f95b?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:80)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:51:03,100 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:2)
2024-05-18 22:51:03,100 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route2 (direct://processMessage)
2024-05-18 22:51:03,100 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail://messages/list)
2024-05-18 22:51:03,102 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 1s10ms (uptime:3s)
2024-05-18 22:54:01,031 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 21892 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 22:54:01,033 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 22:54:01,760 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 22:54:01,767 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 22:54:01,768 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 22:54:01,822 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 22:54:01,822 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 754 ms
2024-05-18 22:54:02,567 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 22:54:02,660 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 22:54:02,667 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:2)
2024-05-18 22:54:02,668 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail://messages/list)
2024-05-18 22:54:02,668 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route2 (direct://processMessage)
2024-05-18 22:54:02,668 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 7ms (build:0ms init:0ms start:7ms)
2024-05-18 22:54:02,670 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 1.844 seconds (process running for 2.288)
2024-05-18 22:54:03,992 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail://messages/list?scopes=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fgmail.modify&userId=xxxxxx. Will try again at next poll. Caused by: [org.apache.camel.RuntimeCamelException - com.google.api.client.auth.oauth2.TokenResponseException: 401 Unauthorized
POST https://oauth2.googleapis.com/token]
org.apache.camel.RuntimeCamelException: com.google.api.client.auth.oauth2.TokenResponseException: 401 Unauthorized
POST https://oauth2.googleapis.com/token
	at org.apache.camel.component.google.mail.GoogleMailConsumer.doInvokeMethod(GoogleMailConsumer.java:50)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:67)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.google.api.client.auth.oauth2.TokenResponseException: 401 Unauthorized
POST https://oauth2.googleapis.com/token
	at com.google.api.client.auth.oauth2.TokenResponseException.from(TokenResponseException.java:103)
	at com.google.api.client.auth.oauth2.TokenRequest.executeUnparsed(TokenRequest.java:308)
	at com.google.api.client.auth.oauth2.TokenRequest.execute(TokenRequest.java:324)
	at com.google.api.client.auth.oauth2.Credential.executeRefreshToken(Credential.java:547)
	at com.google.api.client.googleapis.auth.oauth2.GoogleCredential.executeRefreshToken(GoogleCredential.java:352)
	at com.google.api.client.auth.oauth2.Credential.refreshToken(Credential.java:470)
	at com.google.api.client.auth.oauth2.Credential.intercept(Credential.java:201)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:880)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailConsumer.doInvokeMethod(GoogleMailConsumer.java:48)
	... 9 common frames omitted
2024-05-18 22:54:04,620 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail://messages/list?scopes=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fgmail.modify&userId=xxxxxx. Will try again at next poll. Caused by: [org.apache.camel.RuntimeCamelException - com.google.api.client.auth.oauth2.TokenResponseException: 401 Unauthorized
POST https://oauth2.googleapis.com/token]
org.apache.camel.RuntimeCamelException: com.google.api.client.auth.oauth2.TokenResponseException: 401 Unauthorized
POST https://oauth2.googleapis.com/token
	at org.apache.camel.component.google.mail.GoogleMailConsumer.doInvokeMethod(GoogleMailConsumer.java:50)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:67)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.google.api.client.auth.oauth2.TokenResponseException: 401 Unauthorized
POST https://oauth2.googleapis.com/token
	at com.google.api.client.auth.oauth2.TokenResponseException.from(TokenResponseException.java:103)
	at com.google.api.client.auth.oauth2.TokenRequest.executeUnparsed(TokenRequest.java:308)
	at com.google.api.client.auth.oauth2.TokenRequest.execute(TokenRequest.java:324)
	at com.google.api.client.auth.oauth2.Credential.executeRefreshToken(Credential.java:547)
	at com.google.api.client.googleapis.auth.oauth2.GoogleCredential.executeRefreshToken(GoogleCredential.java:352)
	at com.google.api.client.auth.oauth2.Credential.refreshToken(Credential.java:470)
	at com.google.api.client.auth.oauth2.Credential.intercept(Credential.java:201)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:880)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailConsumer.doInvokeMethod(GoogleMailConsumer.java:48)
	... 9 common frames omitted
2024-05-18 22:54:05,234 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail://messages/list?scopes=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fgmail.modify&userId=xxxxxx. Will try again at next poll. Caused by: [org.apache.camel.RuntimeCamelException - com.google.api.client.auth.oauth2.TokenResponseException: 401 Unauthorized
POST https://oauth2.googleapis.com/token]
org.apache.camel.RuntimeCamelException: com.google.api.client.auth.oauth2.TokenResponseException: 401 Unauthorized
POST https://oauth2.googleapis.com/token
	at org.apache.camel.component.google.mail.GoogleMailConsumer.doInvokeMethod(GoogleMailConsumer.java:50)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:67)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.google.api.client.auth.oauth2.TokenResponseException: 401 Unauthorized
POST https://oauth2.googleapis.com/token
	at com.google.api.client.auth.oauth2.TokenResponseException.from(TokenResponseException.java:103)
	at com.google.api.client.auth.oauth2.TokenRequest.executeUnparsed(TokenRequest.java:308)
	at com.google.api.client.auth.oauth2.TokenRequest.execute(TokenRequest.java:324)
	at com.google.api.client.auth.oauth2.Credential.executeRefreshToken(Credential.java:547)
	at com.google.api.client.googleapis.auth.oauth2.GoogleCredential.executeRefreshToken(GoogleCredential.java:352)
	at com.google.api.client.auth.oauth2.Credential.refreshToken(Credential.java:470)
	at com.google.api.client.auth.oauth2.Credential.intercept(Credential.java:201)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:880)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailConsumer.doInvokeMethod(GoogleMailConsumer.java:48)
	... 9 common frames omitted
2024-05-18 22:54:05,882 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail://messages/list?scopes=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fgmail.modify&userId=xxxxxx. Will try again at next poll. Caused by: [org.apache.camel.RuntimeCamelException - com.google.api.client.auth.oauth2.TokenResponseException: 401 Unauthorized
POST https://oauth2.googleapis.com/token]
org.apache.camel.RuntimeCamelException: com.google.api.client.auth.oauth2.TokenResponseException: 401 Unauthorized
POST https://oauth2.googleapis.com/token
	at org.apache.camel.component.google.mail.GoogleMailConsumer.doInvokeMethod(GoogleMailConsumer.java:50)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:67)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.google.api.client.auth.oauth2.TokenResponseException: 401 Unauthorized
POST https://oauth2.googleapis.com/token
	at com.google.api.client.auth.oauth2.TokenResponseException.from(TokenResponseException.java:103)
	at com.google.api.client.auth.oauth2.TokenRequest.executeUnparsed(TokenRequest.java:308)
	at com.google.api.client.auth.oauth2.TokenRequest.execute(TokenRequest.java:324)
	at com.google.api.client.auth.oauth2.Credential.executeRefreshToken(Credential.java:547)
	at com.google.api.client.googleapis.auth.oauth2.GoogleCredential.executeRefreshToken(GoogleCredential.java:352)
	at com.google.api.client.auth.oauth2.Credential.refreshToken(Credential.java:470)
	at com.google.api.client.auth.oauth2.Credential.intercept(Credential.java:201)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:880)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailConsumer.doInvokeMethod(GoogleMailConsumer.java:48)
	... 9 common frames omitted
2024-05-18 22:54:05,883 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 22:54:05,890 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:2)
2024-05-18 22:54:05,891 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route2 (direct://processMessage)
2024-05-18 22:54:05,891 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail://messages/list)
2024-05-18 22:54:05,893 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 9ms (uptime:3s)
2024-05-18 22:54:42,144 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 3412 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 22:54:42,146 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 22:54:42,892 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 22:54:42,900 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 22:54:42,900 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 22:54:42,942 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 22:54:42,943 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 762 ms
2024-05-18 22:54:43,711 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 22:54:43,805 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 22:54:43,814 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:2)
2024-05-18 22:54:43,815 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail://messages/list)
2024-05-18 22:54:43,815 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route2 (direct://processMessage)
2024-05-18 22:54:43,815 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 8ms (build:0ms init:0ms start:8ms)
2024-05-18 22:54:43,817 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 1.911 seconds (process running for 2.434)
2024-05-18 22:54:45,472 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 7896F59D1215BA3-0000000000000001 on ExchangeId: 7896F59D1215BA3-0000000000000001). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          152
	...
                                         route2/process2                Processor@0x512dc0e0                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:80)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:54:45,561 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 7896F59D1215BA3-0000000000000002 on ExchangeId: 7896F59D1215BA3-0000000000000002). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f62485e53d1e37?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          241
	...
                                         route2/process2                Processor@0x512dc0e0                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f62485e53d1e37?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:80)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:54:45,639 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 7896F59D1215BA3-0000000000000003 on ExchangeId: 7896F59D1215BA3-0000000000000003). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f62409487742e0?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          318
	...
                                         route2/process2                Processor@0x512dc0e0                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f62409487742e0?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:80)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:54:45,736 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 7896F59D1215BA3-0000000000000004 on ExchangeId: 7896F59D1215BA3-0000000000000004). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f623dd3141f95b?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          416
	...
                                         route2/process2                Processor@0x512dc0e0                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f623dd3141f95b?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:80)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:54:45,738 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[7896F59D1215BA3-0000000000000000]. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f623dd3141f95b?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f623dd3141f95b?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:80)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:54:46,460 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 7896F59D1215BA3-0000000000000006 on ExchangeId: 7896F59D1215BA3-0000000000000006). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          136
	...
                                         route2/process2                Processor@0x512dc0e0                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:80)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:54:46,529 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 7896F59D1215BA3-0000000000000007 on ExchangeId: 7896F59D1215BA3-0000000000000007). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f62485e53d1e37?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          205
	...
                                         route2/process2                Processor@0x512dc0e0                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f62485e53d1e37?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:80)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:54:46,597 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 7896F59D1215BA3-0000000000000008 on ExchangeId: 7896F59D1215BA3-0000000000000008). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f62409487742e0?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          273
	...
                                         route2/process2                Processor@0x512dc0e0                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f62409487742e0?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:80)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:54:46,626 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 22:54:46,628 INFO [Camel (camel-1) thread #2 - ShutdownTask] o.a.c.i.e.DefaultShutdownStrategy [DefaultShutdownStrategy.java:689] Waiting as there are still 2 inflight and pending exchanges to complete, timeout in 45 seconds. Inflights per route: [route2 = 1, route1 = 1]
2024-05-18 22:54:46,676 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 7896F59D1215BA3-0000000000000009 on ExchangeId: 7896F59D1215BA3-0000000000000009). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f623dd3141f95b?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          352
	...
                                         route2/process2                Processor@0x512dc0e0                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f623dd3141f95b?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:80)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:54:46,678 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[7896F59D1215BA3-0000000000000005]. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f623dd3141f95b?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f623dd3141f95b?format=FULL
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.ProcessMessageRoute.configure$lambda$2(CommunicationServiceImpl.kt:80)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 22:54:47,648 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:2)
2024-05-18 22:54:47,648 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route2 (direct://processMessage)
2024-05-18 22:54:47,649 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail://messages/list)
2024-05-18 22:54:47,653 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 1s27ms (uptime:3s)
2024-05-18 22:55:29,811 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 8664 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 22:55:29,813 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 22:55:30,572 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 22:55:30,581 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 22:55:30,581 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 22:55:30,625 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 22:55:30,625 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 779 ms
2024-05-18 22:55:31,381 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 22:55:31,474 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 22:55:31,482 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:2)
2024-05-18 22:55:31,482 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail://messages/list)
2024-05-18 22:55:31,482 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route2 (direct://processMessage)
2024-05-18 22:55:31,483 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 7ms (build:0ms init:0ms start:7ms)
2024-05-18 22:55:31,485 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 1.901 seconds (process running for 2.377)
2024-05-18 22:55:32,794 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail://messages/list?scopes=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fgmail.modify&userId=xxxxxx. Will try again at next poll. Caused by: [org.apache.camel.RuntimeCamelException - com.google.api.client.auth.oauth2.TokenResponseException: 401 Unauthorized
POST https://oauth2.googleapis.com/token]
org.apache.camel.RuntimeCamelException: com.google.api.client.auth.oauth2.TokenResponseException: 401 Unauthorized
POST https://oauth2.googleapis.com/token
	at org.apache.camel.component.google.mail.GoogleMailConsumer.doInvokeMethod(GoogleMailConsumer.java:50)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:67)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.google.api.client.auth.oauth2.TokenResponseException: 401 Unauthorized
POST https://oauth2.googleapis.com/token
	at com.google.api.client.auth.oauth2.TokenResponseException.from(TokenResponseException.java:103)
	at com.google.api.client.auth.oauth2.TokenRequest.executeUnparsed(TokenRequest.java:308)
	at com.google.api.client.auth.oauth2.TokenRequest.execute(TokenRequest.java:324)
	at com.google.api.client.auth.oauth2.Credential.executeRefreshToken(Credential.java:547)
	at com.google.api.client.googleapis.auth.oauth2.GoogleCredential.executeRefreshToken(GoogleCredential.java:352)
	at com.google.api.client.auth.oauth2.Credential.refreshToken(Credential.java:470)
	at com.google.api.client.auth.oauth2.Credential.intercept(Credential.java:201)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:880)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailConsumer.doInvokeMethod(GoogleMailConsumer.java:48)
	... 9 common frames omitted
2024-05-18 22:55:33,397 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail://messages/list?scopes=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fgmail.modify&userId=xxxxxx. Will try again at next poll. Caused by: [org.apache.camel.RuntimeCamelException - com.google.api.client.auth.oauth2.TokenResponseException: 401 Unauthorized
POST https://oauth2.googleapis.com/token]
org.apache.camel.RuntimeCamelException: com.google.api.client.auth.oauth2.TokenResponseException: 401 Unauthorized
POST https://oauth2.googleapis.com/token
	at org.apache.camel.component.google.mail.GoogleMailConsumer.doInvokeMethod(GoogleMailConsumer.java:50)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:67)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.google.api.client.auth.oauth2.TokenResponseException: 401 Unauthorized
POST https://oauth2.googleapis.com/token
	at com.google.api.client.auth.oauth2.TokenResponseException.from(TokenResponseException.java:103)
	at com.google.api.client.auth.oauth2.TokenRequest.executeUnparsed(TokenRequest.java:308)
	at com.google.api.client.auth.oauth2.TokenRequest.execute(TokenRequest.java:324)
	at com.google.api.client.auth.oauth2.Credential.executeRefreshToken(Credential.java:547)
	at com.google.api.client.googleapis.auth.oauth2.GoogleCredential.executeRefreshToken(GoogleCredential.java:352)
	at com.google.api.client.auth.oauth2.Credential.refreshToken(Credential.java:470)
	at com.google.api.client.auth.oauth2.Credential.intercept(Credential.java:201)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:880)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailConsumer.doInvokeMethod(GoogleMailConsumer.java:48)
	... 9 common frames omitted
2024-05-18 22:55:34,011 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail://messages/list?scopes=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fgmail.modify&userId=xxxxxx. Will try again at next poll. Caused by: [org.apache.camel.RuntimeCamelException - com.google.api.client.auth.oauth2.TokenResponseException: 401 Unauthorized
POST https://oauth2.googleapis.com/token]
org.apache.camel.RuntimeCamelException: com.google.api.client.auth.oauth2.TokenResponseException: 401 Unauthorized
POST https://oauth2.googleapis.com/token
	at org.apache.camel.component.google.mail.GoogleMailConsumer.doInvokeMethod(GoogleMailConsumer.java:50)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:67)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.google.api.client.auth.oauth2.TokenResponseException: 401 Unauthorized
POST https://oauth2.googleapis.com/token
	at com.google.api.client.auth.oauth2.TokenResponseException.from(TokenResponseException.java:103)
	at com.google.api.client.auth.oauth2.TokenRequest.executeUnparsed(TokenRequest.java:308)
	at com.google.api.client.auth.oauth2.TokenRequest.execute(TokenRequest.java:324)
	at com.google.api.client.auth.oauth2.Credential.executeRefreshToken(Credential.java:547)
	at com.google.api.client.googleapis.auth.oauth2.GoogleCredential.executeRefreshToken(GoogleCredential.java:352)
	at com.google.api.client.auth.oauth2.Credential.refreshToken(Credential.java:470)
	at com.google.api.client.auth.oauth2.Credential.intercept(Credential.java:201)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:880)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailConsumer.doInvokeMethod(GoogleMailConsumer.java:48)
	... 9 common frames omitted
2024-05-18 22:55:34,624 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail://messages/list?scopes=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fgmail.modify&userId=xxxxxx. Will try again at next poll. Caused by: [org.apache.camel.RuntimeCamelException - com.google.api.client.auth.oauth2.TokenResponseException: 401 Unauthorized
POST https://oauth2.googleapis.com/token]
org.apache.camel.RuntimeCamelException: com.google.api.client.auth.oauth2.TokenResponseException: 401 Unauthorized
POST https://oauth2.googleapis.com/token
	at org.apache.camel.component.google.mail.GoogleMailConsumer.doInvokeMethod(GoogleMailConsumer.java:50)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:67)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.google.api.client.auth.oauth2.TokenResponseException: 401 Unauthorized
POST https://oauth2.googleapis.com/token
	at com.google.api.client.auth.oauth2.TokenResponseException.from(TokenResponseException.java:103)
	at com.google.api.client.auth.oauth2.TokenRequest.executeUnparsed(TokenRequest.java:308)
	at com.google.api.client.auth.oauth2.TokenRequest.execute(TokenRequest.java:324)
	at com.google.api.client.auth.oauth2.Credential.executeRefreshToken(Credential.java:547)
	at com.google.api.client.googleapis.auth.oauth2.GoogleCredential.executeRefreshToken(GoogleCredential.java:352)
	at com.google.api.client.auth.oauth2.Credential.refreshToken(Credential.java:470)
	at com.google.api.client.auth.oauth2.Credential.intercept(Credential.java:201)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:880)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailConsumer.doInvokeMethod(GoogleMailConsumer.java:48)
	... 9 common frames omitted
2024-05-18 22:55:35,230 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail://messages/list?scopes=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fgmail.modify&userId=xxxxxx. Will try again at next poll. Caused by: [org.apache.camel.RuntimeCamelException - com.google.api.client.auth.oauth2.TokenResponseException: 401 Unauthorized
POST https://oauth2.googleapis.com/token]
org.apache.camel.RuntimeCamelException: com.google.api.client.auth.oauth2.TokenResponseException: 401 Unauthorized
POST https://oauth2.googleapis.com/token
	at org.apache.camel.component.google.mail.GoogleMailConsumer.doInvokeMethod(GoogleMailConsumer.java:50)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:67)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.google.api.client.auth.oauth2.TokenResponseException: 401 Unauthorized
POST https://oauth2.googleapis.com/token
	at com.google.api.client.auth.oauth2.TokenResponseException.from(TokenResponseException.java:103)
	at com.google.api.client.auth.oauth2.TokenRequest.executeUnparsed(TokenRequest.java:308)
	at com.google.api.client.auth.oauth2.TokenRequest.execute(TokenRequest.java:324)
	at com.google.api.client.auth.oauth2.Credential.executeRefreshToken(Credential.java:547)
	at com.google.api.client.googleapis.auth.oauth2.GoogleCredential.executeRefreshToken(GoogleCredential.java:352)
	at com.google.api.client.auth.oauth2.Credential.refreshToken(Credential.java:470)
	at com.google.api.client.auth.oauth2.Credential.intercept(Credential.java:201)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:880)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailConsumer.doInvokeMethod(GoogleMailConsumer.java:48)
	... 9 common frames omitted
2024-05-18 22:55:35,603 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 22:55:35,606 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:2)
2024-05-18 22:55:35,606 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route2 (direct://processMessage)
2024-05-18 22:55:35,606 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail://messages/list)
2024-05-18 22:55:35,608 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 4ms (uptime:4s)
2024-05-18 22:56:19,225 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 21932 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 22:56:19,227 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 22:56:19,962 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 22:56:19,969 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 22:56:19,970 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 22:56:20,020 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 22:56:20,021 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 761 ms
2024-05-18 22:56:20,772 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 22:56:20,864 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 22:56:20,872 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:2)
2024-05-18 22:56:20,872 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail://messages/list)
2024-05-18 22:56:20,872 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route2 (direct://processMessage)
2024-05-18 22:56:20,873 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 7ms (build:0ms init:0ms start:7ms)
2024-05-18 22:56:20,874 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 1.859 seconds (process running for 2.297)
2024-05-18 22:56:22,204 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail://messages/list?scopes=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fgmail.modify&userId=xxxxxx. Will try again at next poll. Caused by: [org.apache.camel.RuntimeCamelException - com.google.api.client.auth.oauth2.TokenResponseException: 400 Bad Request
POST https://oauth2.googleapis.com/token
{
  "error" : "invalid_grant",
  "error_description" : "Bad Request"
}]
org.apache.camel.RuntimeCamelException: com.google.api.client.auth.oauth2.TokenResponseException: 400 Bad Request
POST https://oauth2.googleapis.com/token
{
  "error" : "invalid_grant",
  "error_description" : "Bad Request"
}
	at org.apache.camel.component.google.mail.GoogleMailConsumer.doInvokeMethod(GoogleMailConsumer.java:50)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:67)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.google.api.client.auth.oauth2.TokenResponseException: 400 Bad Request
POST https://oauth2.googleapis.com/token
{
  "error" : "invalid_grant",
  "error_description" : "Bad Request"
}
	at com.google.api.client.auth.oauth2.TokenResponseException.from(TokenResponseException.java:103)
	at com.google.api.client.auth.oauth2.TokenRequest.executeUnparsed(TokenRequest.java:308)
	at com.google.api.client.auth.oauth2.TokenRequest.execute(TokenRequest.java:324)
	at com.google.api.client.auth.oauth2.Credential.executeRefreshToken(Credential.java:547)
	at com.google.api.client.googleapis.auth.oauth2.GoogleCredential.executeRefreshToken(GoogleCredential.java:352)
	at com.google.api.client.auth.oauth2.Credential.refreshToken(Credential.java:470)
	at com.google.api.client.auth.oauth2.Credential.intercept(Credential.java:201)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:880)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailConsumer.doInvokeMethod(GoogleMailConsumer.java:48)
	... 9 common frames omitted
2024-05-18 22:56:22,796 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail://messages/list?scopes=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fgmail.modify&userId=xxxxxx. Will try again at next poll. Caused by: [org.apache.camel.RuntimeCamelException - com.google.api.client.auth.oauth2.TokenResponseException: 400 Bad Request
POST https://oauth2.googleapis.com/token
{
  "error" : "invalid_grant",
  "error_description" : "Bad Request"
}]
org.apache.camel.RuntimeCamelException: com.google.api.client.auth.oauth2.TokenResponseException: 400 Bad Request
POST https://oauth2.googleapis.com/token
{
  "error" : "invalid_grant",
  "error_description" : "Bad Request"
}
	at org.apache.camel.component.google.mail.GoogleMailConsumer.doInvokeMethod(GoogleMailConsumer.java:50)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:67)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.google.api.client.auth.oauth2.TokenResponseException: 400 Bad Request
POST https://oauth2.googleapis.com/token
{
  "error" : "invalid_grant",
  "error_description" : "Bad Request"
}
	at com.google.api.client.auth.oauth2.TokenResponseException.from(TokenResponseException.java:103)
	at com.google.api.client.auth.oauth2.TokenRequest.executeUnparsed(TokenRequest.java:308)
	at com.google.api.client.auth.oauth2.TokenRequest.execute(TokenRequest.java:324)
	at com.google.api.client.auth.oauth2.Credential.executeRefreshToken(Credential.java:547)
	at com.google.api.client.googleapis.auth.oauth2.GoogleCredential.executeRefreshToken(GoogleCredential.java:352)
	at com.google.api.client.auth.oauth2.Credential.refreshToken(Credential.java:470)
	at com.google.api.client.auth.oauth2.Credential.intercept(Credential.java:201)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:880)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailConsumer.doInvokeMethod(GoogleMailConsumer.java:48)
	... 9 common frames omitted
2024-05-18 22:56:23,380 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail://messages/list?scopes=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fgmail.modify&userId=xxxxxx. Will try again at next poll. Caused by: [org.apache.camel.RuntimeCamelException - com.google.api.client.auth.oauth2.TokenResponseException: 400 Bad Request
POST https://oauth2.googleapis.com/token
{
  "error" : "invalid_grant",
  "error_description" : "Bad Request"
}]
org.apache.camel.RuntimeCamelException: com.google.api.client.auth.oauth2.TokenResponseException: 400 Bad Request
POST https://oauth2.googleapis.com/token
{
  "error" : "invalid_grant",
  "error_description" : "Bad Request"
}
	at org.apache.camel.component.google.mail.GoogleMailConsumer.doInvokeMethod(GoogleMailConsumer.java:50)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:67)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.google.api.client.auth.oauth2.TokenResponseException: 400 Bad Request
POST https://oauth2.googleapis.com/token
{
  "error" : "invalid_grant",
  "error_description" : "Bad Request"
}
	at com.google.api.client.auth.oauth2.TokenResponseException.from(TokenResponseException.java:103)
	at com.google.api.client.auth.oauth2.TokenRequest.executeUnparsed(TokenRequest.java:308)
	at com.google.api.client.auth.oauth2.TokenRequest.execute(TokenRequest.java:324)
	at com.google.api.client.auth.oauth2.Credential.executeRefreshToken(Credential.java:547)
	at com.google.api.client.googleapis.auth.oauth2.GoogleCredential.executeRefreshToken(GoogleCredential.java:352)
	at com.google.api.client.auth.oauth2.Credential.refreshToken(Credential.java:470)
	at com.google.api.client.auth.oauth2.Credential.intercept(Credential.java:201)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:880)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailConsumer.doInvokeMethod(GoogleMailConsumer.java:48)
	... 9 common frames omitted
2024-05-18 22:56:23,962 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail://messages/list?scopes=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fgmail.modify&userId=xxxxxx. Will try again at next poll. Caused by: [org.apache.camel.RuntimeCamelException - com.google.api.client.auth.oauth2.TokenResponseException: 400 Bad Request
POST https://oauth2.googleapis.com/token
{
  "error" : "invalid_grant",
  "error_description" : "Bad Request"
}]
org.apache.camel.RuntimeCamelException: com.google.api.client.auth.oauth2.TokenResponseException: 400 Bad Request
POST https://oauth2.googleapis.com/token
{
  "error" : "invalid_grant",
  "error_description" : "Bad Request"
}
	at org.apache.camel.component.google.mail.GoogleMailConsumer.doInvokeMethod(GoogleMailConsumer.java:50)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:67)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.google.api.client.auth.oauth2.TokenResponseException: 400 Bad Request
POST https://oauth2.googleapis.com/token
{
  "error" : "invalid_grant",
  "error_description" : "Bad Request"
}
	at com.google.api.client.auth.oauth2.TokenResponseException.from(TokenResponseException.java:103)
	at com.google.api.client.auth.oauth2.TokenRequest.executeUnparsed(TokenRequest.java:308)
	at com.google.api.client.auth.oauth2.TokenRequest.execute(TokenRequest.java:324)
	at com.google.api.client.auth.oauth2.Credential.executeRefreshToken(Credential.java:547)
	at com.google.api.client.googleapis.auth.oauth2.GoogleCredential.executeRefreshToken(GoogleCredential.java:352)
	at com.google.api.client.auth.oauth2.Credential.refreshToken(Credential.java:470)
	at com.google.api.client.auth.oauth2.Credential.intercept(Credential.java:201)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:880)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailConsumer.doInvokeMethod(GoogleMailConsumer.java:48)
	... 9 common frames omitted
2024-05-18 22:56:24,564 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail://messages/list?scopes=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fgmail.modify&userId=xxxxxx. Will try again at next poll. Caused by: [org.apache.camel.RuntimeCamelException - com.google.api.client.auth.oauth2.TokenResponseException: 400 Bad Request
POST https://oauth2.googleapis.com/token
{
  "error" : "invalid_grant",
  "error_description" : "Bad Request"
}]
org.apache.camel.RuntimeCamelException: com.google.api.client.auth.oauth2.TokenResponseException: 400 Bad Request
POST https://oauth2.googleapis.com/token
{
  "error" : "invalid_grant",
  "error_description" : "Bad Request"
}
	at org.apache.camel.component.google.mail.GoogleMailConsumer.doInvokeMethod(GoogleMailConsumer.java:50)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:67)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.google.api.client.auth.oauth2.TokenResponseException: 400 Bad Request
POST https://oauth2.googleapis.com/token
{
  "error" : "invalid_grant",
  "error_description" : "Bad Request"
}
	at com.google.api.client.auth.oauth2.TokenResponseException.from(TokenResponseException.java:103)
	at com.google.api.client.auth.oauth2.TokenRequest.executeUnparsed(TokenRequest.java:308)
	at com.google.api.client.auth.oauth2.TokenRequest.execute(TokenRequest.java:324)
	at com.google.api.client.auth.oauth2.Credential.executeRefreshToken(Credential.java:547)
	at com.google.api.client.googleapis.auth.oauth2.GoogleCredential.executeRefreshToken(GoogleCredential.java:352)
	at com.google.api.client.auth.oauth2.Credential.refreshToken(Credential.java:470)
	at com.google.api.client.auth.oauth2.Credential.intercept(Credential.java:201)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:880)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailConsumer.doInvokeMethod(GoogleMailConsumer.java:48)
	... 9 common frames omitted
2024-05-18 22:56:24,922 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 22:56:24,926 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:2)
2024-05-18 22:56:24,926 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route2 (direct://processMessage)
2024-05-18 22:56:24,926 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail://messages/list)
2024-05-18 22:56:24,927 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 5ms (uptime:4s)
2024-05-18 22:56:54,980 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 1884 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 22:56:54,982 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 22:56:55,759 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 22:56:55,767 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 22:56:55,767 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 22:56:55,811 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 22:56:55,812 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 794 ms
2024-05-18 22:56:56,619 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 22:56:56,691 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 22:56:56,701 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 22:56:56,701 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail://messages/list)
2024-05-18 22:56:56,701 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 9ms (build:0ms init:0ms start:9ms)
2024-05-18 22:56:56,703 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 1.948 seconds (process running for 2.414)
2024-05-18 22:56:58,043 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail://messages/list?scopes=https%3A%2F%2Fmail.google.com&userId=xxxxxx. Will try again at next poll. Caused by: [org.apache.camel.RuntimeCamelException - com.google.api.client.auth.oauth2.TokenResponseException: 400 Bad Request
POST https://oauth2.googleapis.com/token
{
  "error" : "invalid_grant",
  "error_description" : "Bad Request"
}]
org.apache.camel.RuntimeCamelException: com.google.api.client.auth.oauth2.TokenResponseException: 400 Bad Request
POST https://oauth2.googleapis.com/token
{
  "error" : "invalid_grant",
  "error_description" : "Bad Request"
}
	at org.apache.camel.component.google.mail.GoogleMailConsumer.doInvokeMethod(GoogleMailConsumer.java:50)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:67)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.google.api.client.auth.oauth2.TokenResponseException: 400 Bad Request
POST https://oauth2.googleapis.com/token
{
  "error" : "invalid_grant",
  "error_description" : "Bad Request"
}
	at com.google.api.client.auth.oauth2.TokenResponseException.from(TokenResponseException.java:103)
	at com.google.api.client.auth.oauth2.TokenRequest.executeUnparsed(TokenRequest.java:308)
	at com.google.api.client.auth.oauth2.TokenRequest.execute(TokenRequest.java:324)
	at com.google.api.client.auth.oauth2.Credential.executeRefreshToken(Credential.java:547)
	at com.google.api.client.googleapis.auth.oauth2.GoogleCredential.executeRefreshToken(GoogleCredential.java:352)
	at com.google.api.client.auth.oauth2.Credential.refreshToken(Credential.java:470)
	at com.google.api.client.auth.oauth2.Credential.intercept(Credential.java:201)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:880)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailConsumer.doInvokeMethod(GoogleMailConsumer.java:48)
	... 9 common frames omitted
2024-05-18 22:56:58,636 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail://messages/list?scopes=https%3A%2F%2Fmail.google.com&userId=xxxxxx. Will try again at next poll. Caused by: [org.apache.camel.RuntimeCamelException - com.google.api.client.auth.oauth2.TokenResponseException: 400 Bad Request
POST https://oauth2.googleapis.com/token
{
  "error" : "invalid_grant",
  "error_description" : "Bad Request"
}]
org.apache.camel.RuntimeCamelException: com.google.api.client.auth.oauth2.TokenResponseException: 400 Bad Request
POST https://oauth2.googleapis.com/token
{
  "error" : "invalid_grant",
  "error_description" : "Bad Request"
}
	at org.apache.camel.component.google.mail.GoogleMailConsumer.doInvokeMethod(GoogleMailConsumer.java:50)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:67)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.google.api.client.auth.oauth2.TokenResponseException: 400 Bad Request
POST https://oauth2.googleapis.com/token
{
  "error" : "invalid_grant",
  "error_description" : "Bad Request"
}
	at com.google.api.client.auth.oauth2.TokenResponseException.from(TokenResponseException.java:103)
	at com.google.api.client.auth.oauth2.TokenRequest.executeUnparsed(TokenRequest.java:308)
	at com.google.api.client.auth.oauth2.TokenRequest.execute(TokenRequest.java:324)
	at com.google.api.client.auth.oauth2.Credential.executeRefreshToken(Credential.java:547)
	at com.google.api.client.googleapis.auth.oauth2.GoogleCredential.executeRefreshToken(GoogleCredential.java:352)
	at com.google.api.client.auth.oauth2.Credential.refreshToken(Credential.java:470)
	at com.google.api.client.auth.oauth2.Credential.intercept(Credential.java:201)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:880)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailConsumer.doInvokeMethod(GoogleMailConsumer.java:48)
	... 9 common frames omitted
2024-05-18 22:56:59,215 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail://messages/list?scopes=https%3A%2F%2Fmail.google.com&userId=xxxxxx. Will try again at next poll. Caused by: [org.apache.camel.RuntimeCamelException - com.google.api.client.auth.oauth2.TokenResponseException: 400 Bad Request
POST https://oauth2.googleapis.com/token
{
  "error" : "invalid_grant",
  "error_description" : "Bad Request"
}]
org.apache.camel.RuntimeCamelException: com.google.api.client.auth.oauth2.TokenResponseException: 400 Bad Request
POST https://oauth2.googleapis.com/token
{
  "error" : "invalid_grant",
  "error_description" : "Bad Request"
}
	at org.apache.camel.component.google.mail.GoogleMailConsumer.doInvokeMethod(GoogleMailConsumer.java:50)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:67)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.google.api.client.auth.oauth2.TokenResponseException: 400 Bad Request
POST https://oauth2.googleapis.com/token
{
  "error" : "invalid_grant",
  "error_description" : "Bad Request"
}
	at com.google.api.client.auth.oauth2.TokenResponseException.from(TokenResponseException.java:103)
	at com.google.api.client.auth.oauth2.TokenRequest.executeUnparsed(TokenRequest.java:308)
	at com.google.api.client.auth.oauth2.TokenRequest.execute(TokenRequest.java:324)
	at com.google.api.client.auth.oauth2.Credential.executeRefreshToken(Credential.java:547)
	at com.google.api.client.googleapis.auth.oauth2.GoogleCredential.executeRefreshToken(GoogleCredential.java:352)
	at com.google.api.client.auth.oauth2.Credential.refreshToken(Credential.java:470)
	at com.google.api.client.auth.oauth2.Credential.intercept(Credential.java:201)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:880)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailConsumer.doInvokeMethod(GoogleMailConsumer.java:48)
	... 9 common frames omitted
2024-05-18 22:56:59,779 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail://messages/list?scopes=https%3A%2F%2Fmail.google.com&userId=xxxxxx. Will try again at next poll. Caused by: [org.apache.camel.RuntimeCamelException - com.google.api.client.auth.oauth2.TokenResponseException: 400 Bad Request
POST https://oauth2.googleapis.com/token
{
  "error" : "invalid_grant",
  "error_description" : "Bad Request"
}]
org.apache.camel.RuntimeCamelException: com.google.api.client.auth.oauth2.TokenResponseException: 400 Bad Request
POST https://oauth2.googleapis.com/token
{
  "error" : "invalid_grant",
  "error_description" : "Bad Request"
}
	at org.apache.camel.component.google.mail.GoogleMailConsumer.doInvokeMethod(GoogleMailConsumer.java:50)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:67)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.google.api.client.auth.oauth2.TokenResponseException: 400 Bad Request
POST https://oauth2.googleapis.com/token
{
  "error" : "invalid_grant",
  "error_description" : "Bad Request"
}
	at com.google.api.client.auth.oauth2.TokenResponseException.from(TokenResponseException.java:103)
	at com.google.api.client.auth.oauth2.TokenRequest.executeUnparsed(TokenRequest.java:308)
	at com.google.api.client.auth.oauth2.TokenRequest.execute(TokenRequest.java:324)
	at com.google.api.client.auth.oauth2.Credential.executeRefreshToken(Credential.java:547)
	at com.google.api.client.googleapis.auth.oauth2.GoogleCredential.executeRefreshToken(GoogleCredential.java:352)
	at com.google.api.client.auth.oauth2.Credential.refreshToken(Credential.java:470)
	at com.google.api.client.auth.oauth2.Credential.intercept(Credential.java:201)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:880)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailConsumer.doInvokeMethod(GoogleMailConsumer.java:48)
	... 9 common frames omitted
2024-05-18 22:57:00,373 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail://messages/list?scopes=https%3A%2F%2Fmail.google.com&userId=xxxxxx. Will try again at next poll. Caused by: [org.apache.camel.RuntimeCamelException - com.google.api.client.auth.oauth2.TokenResponseException: 400 Bad Request
POST https://oauth2.googleapis.com/token
{
  "error" : "invalid_grant",
  "error_description" : "Bad Request"
}]
org.apache.camel.RuntimeCamelException: com.google.api.client.auth.oauth2.TokenResponseException: 400 Bad Request
POST https://oauth2.googleapis.com/token
{
  "error" : "invalid_grant",
  "error_description" : "Bad Request"
}
	at org.apache.camel.component.google.mail.GoogleMailConsumer.doInvokeMethod(GoogleMailConsumer.java:50)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:67)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.google.api.client.auth.oauth2.TokenResponseException: 400 Bad Request
POST https://oauth2.googleapis.com/token
{
  "error" : "invalid_grant",
  "error_description" : "Bad Request"
}
	at com.google.api.client.auth.oauth2.TokenResponseException.from(TokenResponseException.java:103)
	at com.google.api.client.auth.oauth2.TokenRequest.executeUnparsed(TokenRequest.java:308)
	at com.google.api.client.auth.oauth2.TokenRequest.execute(TokenRequest.java:324)
	at com.google.api.client.auth.oauth2.Credential.executeRefreshToken(Credential.java:547)
	at com.google.api.client.googleapis.auth.oauth2.GoogleCredential.executeRefreshToken(GoogleCredential.java:352)
	at com.google.api.client.auth.oauth2.Credential.refreshToken(Credential.java:470)
	at com.google.api.client.auth.oauth2.Credential.intercept(Credential.java:201)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:880)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailConsumer.doInvokeMethod(GoogleMailConsumer.java:48)
	... 9 common frames omitted
2024-05-18 22:57:00,941 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail://messages/list?scopes=https%3A%2F%2Fmail.google.com&userId=xxxxxx. Will try again at next poll. Caused by: [org.apache.camel.RuntimeCamelException - com.google.api.client.auth.oauth2.TokenResponseException: 400 Bad Request
POST https://oauth2.googleapis.com/token
{
  "error" : "invalid_grant",
  "error_description" : "Bad Request"
}]
org.apache.camel.RuntimeCamelException: com.google.api.client.auth.oauth2.TokenResponseException: 400 Bad Request
POST https://oauth2.googleapis.com/token
{
  "error" : "invalid_grant",
  "error_description" : "Bad Request"
}
	at org.apache.camel.component.google.mail.GoogleMailConsumer.doInvokeMethod(GoogleMailConsumer.java:50)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:67)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.google.api.client.auth.oauth2.TokenResponseException: 400 Bad Request
POST https://oauth2.googleapis.com/token
{
  "error" : "invalid_grant",
  "error_description" : "Bad Request"
}
	at com.google.api.client.auth.oauth2.TokenResponseException.from(TokenResponseException.java:103)
	at com.google.api.client.auth.oauth2.TokenRequest.executeUnparsed(TokenRequest.java:308)
	at com.google.api.client.auth.oauth2.TokenRequest.execute(TokenRequest.java:324)
	at com.google.api.client.auth.oauth2.Credential.executeRefreshToken(Credential.java:547)
	at com.google.api.client.googleapis.auth.oauth2.GoogleCredential.executeRefreshToken(GoogleCredential.java:352)
	at com.google.api.client.auth.oauth2.Credential.refreshToken(Credential.java:470)
	at com.google.api.client.auth.oauth2.Credential.intercept(Credential.java:201)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:880)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailConsumer.doInvokeMethod(GoogleMailConsumer.java:48)
	... 9 common frames omitted
2024-05-18 22:57:01,530 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail://messages/list?scopes=https%3A%2F%2Fmail.google.com&userId=xxxxxx. Will try again at next poll. Caused by: [org.apache.camel.RuntimeCamelException - com.google.api.client.auth.oauth2.TokenResponseException: 400 Bad Request
POST https://oauth2.googleapis.com/token
{
  "error" : "invalid_grant",
  "error_description" : "Bad Request"
}]
org.apache.camel.RuntimeCamelException: com.google.api.client.auth.oauth2.TokenResponseException: 400 Bad Request
POST https://oauth2.googleapis.com/token
{
  "error" : "invalid_grant",
  "error_description" : "Bad Request"
}
	at org.apache.camel.component.google.mail.GoogleMailConsumer.doInvokeMethod(GoogleMailConsumer.java:50)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:67)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.google.api.client.auth.oauth2.TokenResponseException: 400 Bad Request
POST https://oauth2.googleapis.com/token
{
  "error" : "invalid_grant",
  "error_description" : "Bad Request"
}
	at com.google.api.client.auth.oauth2.TokenResponseException.from(TokenResponseException.java:103)
	at com.google.api.client.auth.oauth2.TokenRequest.executeUnparsed(TokenRequest.java:308)
	at com.google.api.client.auth.oauth2.TokenRequest.execute(TokenRequest.java:324)
	at com.google.api.client.auth.oauth2.Credential.executeRefreshToken(Credential.java:547)
	at com.google.api.client.googleapis.auth.oauth2.GoogleCredential.executeRefreshToken(GoogleCredential.java:352)
	at com.google.api.client.auth.oauth2.Credential.refreshToken(Credential.java:470)
	at com.google.api.client.auth.oauth2.Credential.intercept(Credential.java:201)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:880)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailConsumer.doInvokeMethod(GoogleMailConsumer.java:48)
	... 9 common frames omitted
2024-05-18 22:57:02,103 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail://messages/list?scopes=https%3A%2F%2Fmail.google.com&userId=xxxxxx. Will try again at next poll. Caused by: [org.apache.camel.RuntimeCamelException - com.google.api.client.auth.oauth2.TokenResponseException: 400 Bad Request
POST https://oauth2.googleapis.com/token
{
  "error" : "invalid_grant",
  "error_description" : "Bad Request"
}]
org.apache.camel.RuntimeCamelException: com.google.api.client.auth.oauth2.TokenResponseException: 400 Bad Request
POST https://oauth2.googleapis.com/token
{
  "error" : "invalid_grant",
  "error_description" : "Bad Request"
}
	at org.apache.camel.component.google.mail.GoogleMailConsumer.doInvokeMethod(GoogleMailConsumer.java:50)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:67)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.google.api.client.auth.oauth2.TokenResponseException: 400 Bad Request
POST https://oauth2.googleapis.com/token
{
  "error" : "invalid_grant",
  "error_description" : "Bad Request"
}
	at com.google.api.client.auth.oauth2.TokenResponseException.from(TokenResponseException.java:103)
	at com.google.api.client.auth.oauth2.TokenRequest.executeUnparsed(TokenRequest.java:308)
	at com.google.api.client.auth.oauth2.TokenRequest.execute(TokenRequest.java:324)
	at com.google.api.client.auth.oauth2.Credential.executeRefreshToken(Credential.java:547)
	at com.google.api.client.googleapis.auth.oauth2.GoogleCredential.executeRefreshToken(GoogleCredential.java:352)
	at com.google.api.client.auth.oauth2.Credential.refreshToken(Credential.java:470)
	at com.google.api.client.auth.oauth2.Credential.intercept(Credential.java:201)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:880)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailConsumer.doInvokeMethod(GoogleMailConsumer.java:48)
	... 9 common frames omitted
2024-05-18 22:57:02,690 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail://messages/list?scopes=https%3A%2F%2Fmail.google.com&userId=xxxxxx. Will try again at next poll. Caused by: [org.apache.camel.RuntimeCamelException - com.google.api.client.auth.oauth2.TokenResponseException: 400 Bad Request
POST https://oauth2.googleapis.com/token
{
  "error" : "invalid_grant",
  "error_description" : "Bad Request"
}]
org.apache.camel.RuntimeCamelException: com.google.api.client.auth.oauth2.TokenResponseException: 400 Bad Request
POST https://oauth2.googleapis.com/token
{
  "error" : "invalid_grant",
  "error_description" : "Bad Request"
}
	at org.apache.camel.component.google.mail.GoogleMailConsumer.doInvokeMethod(GoogleMailConsumer.java:50)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:67)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.google.api.client.auth.oauth2.TokenResponseException: 400 Bad Request
POST https://oauth2.googleapis.com/token
{
  "error" : "invalid_grant",
  "error_description" : "Bad Request"
}
	at com.google.api.client.auth.oauth2.TokenResponseException.from(TokenResponseException.java:103)
	at com.google.api.client.auth.oauth2.TokenRequest.executeUnparsed(TokenRequest.java:308)
	at com.google.api.client.auth.oauth2.TokenRequest.execute(TokenRequest.java:324)
	at com.google.api.client.auth.oauth2.Credential.executeRefreshToken(Credential.java:547)
	at com.google.api.client.googleapis.auth.oauth2.GoogleCredential.executeRefreshToken(GoogleCredential.java:352)
	at com.google.api.client.auth.oauth2.Credential.refreshToken(Credential.java:470)
	at com.google.api.client.auth.oauth2.Credential.intercept(Credential.java:201)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:880)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailConsumer.doInvokeMethod(GoogleMailConsumer.java:48)
	... 9 common frames omitted
2024-05-18 22:57:02,723 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 22:57:02,733 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 22:57:02,734 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail://messages/list)
2024-05-18 22:57:02,737 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 13ms (uptime:6s)
2024-05-18 22:57:26,474 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 20404 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 22:57:26,476 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 22:57:27,315 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 22:57:27,324 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 22:57:27,324 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 22:57:27,378 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 22:57:27,378 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 871 ms
2024-05-18 22:57:28,160 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 22:57:28,231 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 22:57:28,240 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 22:57:28,240 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail://messages/list)
2024-05-18 22:57:28,240 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 9ms (build:0ms init:0ms start:9ms)
2024-05-18 22:57:28,242 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 1.976 seconds (process running for 2.41)
2024-05-18 22:57:29,575 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail://messages/list?scopes=https%3A%2F%2Fmail.google.com&userId=xxxxxx. Will try again at next poll. Caused by: [org.apache.camel.RuntimeCamelException - com.google.api.client.auth.oauth2.TokenResponseException: 401 Unauthorized
POST https://oauth2.googleapis.com/token]
org.apache.camel.RuntimeCamelException: com.google.api.client.auth.oauth2.TokenResponseException: 401 Unauthorized
POST https://oauth2.googleapis.com/token
	at org.apache.camel.component.google.mail.GoogleMailConsumer.doInvokeMethod(GoogleMailConsumer.java:50)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:67)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.google.api.client.auth.oauth2.TokenResponseException: 401 Unauthorized
POST https://oauth2.googleapis.com/token
	at com.google.api.client.auth.oauth2.TokenResponseException.from(TokenResponseException.java:103)
	at com.google.api.client.auth.oauth2.TokenRequest.executeUnparsed(TokenRequest.java:308)
	at com.google.api.client.auth.oauth2.TokenRequest.execute(TokenRequest.java:324)
	at com.google.api.client.auth.oauth2.Credential.executeRefreshToken(Credential.java:547)
	at com.google.api.client.googleapis.auth.oauth2.GoogleCredential.executeRefreshToken(GoogleCredential.java:352)
	at com.google.api.client.auth.oauth2.Credential.refreshToken(Credential.java:470)
	at com.google.api.client.auth.oauth2.Credential.intercept(Credential.java:201)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:880)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailConsumer.doInvokeMethod(GoogleMailConsumer.java:48)
	... 9 common frames omitted
2024-05-18 22:57:30,192 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail://messages/list?scopes=https%3A%2F%2Fmail.google.com&userId=xxxxxx. Will try again at next poll. Caused by: [org.apache.camel.RuntimeCamelException - com.google.api.client.auth.oauth2.TokenResponseException: 401 Unauthorized
POST https://oauth2.googleapis.com/token]
org.apache.camel.RuntimeCamelException: com.google.api.client.auth.oauth2.TokenResponseException: 401 Unauthorized
POST https://oauth2.googleapis.com/token
	at org.apache.camel.component.google.mail.GoogleMailConsumer.doInvokeMethod(GoogleMailConsumer.java:50)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:67)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.google.api.client.auth.oauth2.TokenResponseException: 401 Unauthorized
POST https://oauth2.googleapis.com/token
	at com.google.api.client.auth.oauth2.TokenResponseException.from(TokenResponseException.java:103)
	at com.google.api.client.auth.oauth2.TokenRequest.executeUnparsed(TokenRequest.java:308)
	at com.google.api.client.auth.oauth2.TokenRequest.execute(TokenRequest.java:324)
	at com.google.api.client.auth.oauth2.Credential.executeRefreshToken(Credential.java:547)
	at com.google.api.client.googleapis.auth.oauth2.GoogleCredential.executeRefreshToken(GoogleCredential.java:352)
	at com.google.api.client.auth.oauth2.Credential.refreshToken(Credential.java:470)
	at com.google.api.client.auth.oauth2.Credential.intercept(Credential.java:201)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:880)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailConsumer.doInvokeMethod(GoogleMailConsumer.java:48)
	... 9 common frames omitted
2024-05-18 22:57:30,432 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 22:57:30,435 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 22:57:30,436 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail://messages/list)
2024-05-18 22:57:30,437 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 5ms (uptime:2s)
2024-05-18 22:57:41,537 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 432 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 22:57:41,539 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 22:57:42,289 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 22:57:42,296 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 22:57:42,297 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 22:57:42,337 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 22:57:42,338 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 765 ms
2024-05-18 22:57:43,114 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 22:57:43,182 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 22:57:43,193 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 22:57:43,193 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail://messages/list)
2024-05-18 22:57:43,193 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 10ms (build:0ms init:0ms start:10ms)
2024-05-18 22:57:43,195 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 1.884 seconds (process running for 2.365)
2024-05-18 22:57:52,343 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 22:57:52,347 INFO [Camel (camel-1) thread #2 - ShutdownTask] o.a.c.i.e.DefaultShutdownStrategy [DefaultShutdownStrategy.java:689] Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 45 seconds. Inflights per route: [route1 = 1]
2024-05-18 22:57:53,348 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 22:57:53,348 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail://messages/list)
2024-05-18 22:57:53,352 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 1s9ms (uptime:10s)
2024-05-18 22:58:19,868 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 26248 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 22:58:19,870 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 22:58:20,709 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 22:58:20,719 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 22:58:20,720 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 22:58:20,769 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 22:58:20,769 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 862 ms
2024-05-18 22:58:21,534 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 22:58:21,603 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 22:58:21,613 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 22:58:21,614 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail://messages/list)
2024-05-18 22:58:21,614 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 9ms (build:0ms init:0ms start:9ms)
2024-05-18 22:58:21,616 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 1.983 seconds (process running for 2.442)
2024-05-18 22:58:23,329 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: FEC9CB146AE6CF6-0000000000000000 on ExchangeId: FEC9CB146AE6CF6-0000000000000000). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          234
	...
                                         route1/process1                Processor@0x9cb927e                                           0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBodyAndHeaders(DefaultProducerTemplate.java:440)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:78)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:51)
	at org.apache.camel.support.component.AbstractApiProducer$1.run(AbstractApiProducer.java:89)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	... 3 common frames omitted
Caused by: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:49)
	... 7 common frames omitted
2024-05-18 22:58:23,331 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[FEC9CB146AE6CF6-0000000000000000]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBodyAndHeaders(DefaultProducerTemplate.java:440)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:78)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:51)
	at org.apache.camel.support.component.AbstractApiProducer$1.run(AbstractApiProducer.java:89)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	... 3 common frames omitted
Caused by: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:49)
	... 7 common frames omitted
2024-05-18 22:58:24,261 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: FEC9CB146AE6CF6-0000000000000001 on ExchangeId: FEC9CB146AE6CF6-0000000000000001). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          346
	...
                                         route1/process1                Processor@0x9cb927e                                           0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBodyAndHeaders(DefaultProducerTemplate.java:440)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:78)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:51)
	at org.apache.camel.support.component.AbstractApiProducer$1.run(AbstractApiProducer.java:89)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	... 3 common frames omitted
Caused by: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:49)
	... 7 common frames omitted
2024-05-18 22:58:24,263 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[FEC9CB146AE6CF6-0000000000000001]. Caused by: [org.apache.camel.CamelExecutionException - Exception occurred during execution on the exchange: Exchange[]]
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBodyAndHeaders(DefaultProducerTemplate.java:440)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:78)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.RuntimeCamelException: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:51)
	at org.apache.camel.support.component.AbstractApiProducer$1.run(AbstractApiProducer.java:89)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	... 3 common frames omitted
Caused by: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
GET https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/18f6316963ec7d41
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Metadata scope doesn't allow format FULL",
    "reason" : "forbidden"
  } ],
  "message" : "Metadata scope doesn't allow format FULL",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.GoogleMailProducer.doInvokeMethod(GoogleMailProducer.java:49)
	... 7 common frames omitted
2024-05-18 22:58:24,768 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 22:58:24,777 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 22:58:24,778 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail://messages/list)
2024-05-18 22:58:24,781 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 12ms (uptime:3s)
2024-05-18 23:01:18,781 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 25704 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 23:01:18,784 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 23:01:19,553 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 23:01:19,563 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 23:01:19,563 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 23:01:19,606 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 23:01:19,607 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 788 ms
2024-05-18 23:01:20,403 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 23:01:20,476 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 23:01:20,489 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 23:01:20,489 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail://messages/list)
2024-05-18 23:01:20,489 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 12ms (build:0ms init:0ms start:12ms)
2024-05-18 23:01:20,492 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 1.921 seconds (process running for 2.362)
2024-05-18 23:01:22,061 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 87AEAA191CE70EE-0000000000000000 on ExchangeId: 87AEAA191CE70EE-0000000000000000). Exhausted after delivery attempt: 1 caught: java.io.FileNotFoundException: path\to\client_secret.json (Impossibile trovare il percorso specificato)

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2           90
	...
                                         route1/process1                Processor@0x7816454d                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
java.io.FileNotFoundException: path\to\client_secret.json (Impossibile trovare il percorso specificato)
	at java.base/java.io.FileInputStream.open0(Native Method)
	at java.base/java.io.FileInputStream.open(FileInputStream.java:213)
	at java.base/java.io.FileInputStream.<init>(FileInputStream.java:152)
	at java.base/java.io.FileInputStream.<init>(FileInputStream.java:106)
	at java.base/java.io.FileReader.<init>(FileReader.java:60)
	at it.polito.communicationmanager.services.EMailRoute.getCredentials(CommunicationServiceImpl.kt:60)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:87)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 23:01:22,064 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[87AEAA191CE70EE-0000000000000000]. Caused by: [java.io.FileNotFoundException - path\to\client_secret.json (Impossibile trovare il percorso specificato)]
java.io.FileNotFoundException: path\to\client_secret.json (Impossibile trovare il percorso specificato)
	at java.base/java.io.FileInputStream.open0(Native Method)
	at java.base/java.io.FileInputStream.open(FileInputStream.java:213)
	at java.base/java.io.FileInputStream.<init>(FileInputStream.java:152)
	at java.base/java.io.FileInputStream.<init>(FileInputStream.java:106)
	at java.base/java.io.FileReader.<init>(FileReader.java:60)
	at it.polito.communicationmanager.services.EMailRoute.getCredentials(CommunicationServiceImpl.kt:60)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:87)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 23:01:22,646 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 87AEAA191CE70EE-0000000000000001 on ExchangeId: 87AEAA191CE70EE-0000000000000001). Exhausted after delivery attempt: 1 caught: java.io.FileNotFoundException: path\to\client_secret.json (Impossibile trovare il percorso specificato)

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2            1
	...
                                         route1/process1                Processor@0x7816454d                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
java.io.FileNotFoundException: path\to\client_secret.json (Impossibile trovare il percorso specificato)
	at java.base/java.io.FileInputStream.open0(Native Method)
	at java.base/java.io.FileInputStream.open(FileInputStream.java:213)
	at java.base/java.io.FileInputStream.<init>(FileInputStream.java:152)
	at java.base/java.io.FileInputStream.<init>(FileInputStream.java:106)
	at java.base/java.io.FileReader.<init>(FileReader.java:60)
	at it.polito.communicationmanager.services.EMailRoute.getCredentials(CommunicationServiceImpl.kt:60)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:87)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 23:01:22,648 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[87AEAA191CE70EE-0000000000000001]. Caused by: [java.io.FileNotFoundException - path\to\client_secret.json (Impossibile trovare il percorso specificato)]
java.io.FileNotFoundException: path\to\client_secret.json (Impossibile trovare il percorso specificato)
	at java.base/java.io.FileInputStream.open0(Native Method)
	at java.base/java.io.FileInputStream.open(FileInputStream.java:213)
	at java.base/java.io.FileInputStream.<init>(FileInputStream.java:152)
	at java.base/java.io.FileInputStream.<init>(FileInputStream.java:106)
	at java.base/java.io.FileReader.<init>(FileReader.java:60)
	at it.polito.communicationmanager.services.EMailRoute.getCredentials(CommunicationServiceImpl.kt:60)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:87)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 23:01:23,233 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 87AEAA191CE70EE-0000000000000002 on ExchangeId: 87AEAA191CE70EE-0000000000000002). Exhausted after delivery attempt: 1 caught: java.io.FileNotFoundException: path\to\client_secret.json (Impossibile trovare il percorso specificato)

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2            0
	...
                                         route1/process1                Processor@0x7816454d                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
java.io.FileNotFoundException: path\to\client_secret.json (Impossibile trovare il percorso specificato)
	at java.base/java.io.FileInputStream.open0(Native Method)
	at java.base/java.io.FileInputStream.open(FileInputStream.java:213)
	at java.base/java.io.FileInputStream.<init>(FileInputStream.java:152)
	at java.base/java.io.FileInputStream.<init>(FileInputStream.java:106)
	at java.base/java.io.FileReader.<init>(FileReader.java:60)
	at it.polito.communicationmanager.services.EMailRoute.getCredentials(CommunicationServiceImpl.kt:60)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:87)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 23:01:23,234 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[87AEAA191CE70EE-0000000000000002]. Caused by: [java.io.FileNotFoundException - path\to\client_secret.json (Impossibile trovare il percorso specificato)]
java.io.FileNotFoundException: path\to\client_secret.json (Impossibile trovare il percorso specificato)
	at java.base/java.io.FileInputStream.open0(Native Method)
	at java.base/java.io.FileInputStream.open(FileInputStream.java:213)
	at java.base/java.io.FileInputStream.<init>(FileInputStream.java:152)
	at java.base/java.io.FileInputStream.<init>(FileInputStream.java:106)
	at java.base/java.io.FileReader.<init>(FileReader.java:60)
	at it.polito.communicationmanager.services.EMailRoute.getCredentials(CommunicationServiceImpl.kt:60)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:87)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 23:01:23,809 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 87AEAA191CE70EE-0000000000000003 on ExchangeId: 87AEAA191CE70EE-0000000000000003). Exhausted after delivery attempt: 1 caught: java.io.FileNotFoundException: path\to\client_secret.json (Impossibile trovare il percorso specificato)

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2            1
	...
                                         route1/process1                Processor@0x7816454d                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
java.io.FileNotFoundException: path\to\client_secret.json (Impossibile trovare il percorso specificato)
	at java.base/java.io.FileInputStream.open0(Native Method)
	at java.base/java.io.FileInputStream.open(FileInputStream.java:213)
	at java.base/java.io.FileInputStream.<init>(FileInputStream.java:152)
	at java.base/java.io.FileInputStream.<init>(FileInputStream.java:106)
	at java.base/java.io.FileReader.<init>(FileReader.java:60)
	at it.polito.communicationmanager.services.EMailRoute.getCredentials(CommunicationServiceImpl.kt:60)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:87)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 23:01:23,809 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[87AEAA191CE70EE-0000000000000003]. Caused by: [java.io.FileNotFoundException - path\to\client_secret.json (Impossibile trovare il percorso specificato)]
java.io.FileNotFoundException: path\to\client_secret.json (Impossibile trovare il percorso specificato)
	at java.base/java.io.FileInputStream.open0(Native Method)
	at java.base/java.io.FileInputStream.open(FileInputStream.java:213)
	at java.base/java.io.FileInputStream.<init>(FileInputStream.java:152)
	at java.base/java.io.FileInputStream.<init>(FileInputStream.java:106)
	at java.base/java.io.FileReader.<init>(FileReader.java:60)
	at it.polito.communicationmanager.services.EMailRoute.getCredentials(CommunicationServiceImpl.kt:60)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:87)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 23:01:24,385 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 87AEAA191CE70EE-0000000000000004 on ExchangeId: 87AEAA191CE70EE-0000000000000004). Exhausted after delivery attempt: 1 caught: java.io.FileNotFoundException: path\to\client_secret.json (Impossibile trovare il percorso specificato)

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2            1
	...
                                         route1/process1                Processor@0x7816454d                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
java.io.FileNotFoundException: path\to\client_secret.json (Impossibile trovare il percorso specificato)
	at java.base/java.io.FileInputStream.open0(Native Method)
	at java.base/java.io.FileInputStream.open(FileInputStream.java:213)
	at java.base/java.io.FileInputStream.<init>(FileInputStream.java:152)
	at java.base/java.io.FileInputStream.<init>(FileInputStream.java:106)
	at java.base/java.io.FileReader.<init>(FileReader.java:60)
	at it.polito.communicationmanager.services.EMailRoute.getCredentials(CommunicationServiceImpl.kt:60)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:87)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 23:01:24,386 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[87AEAA191CE70EE-0000000000000004]. Caused by: [java.io.FileNotFoundException - path\to\client_secret.json (Impossibile trovare il percorso specificato)]
java.io.FileNotFoundException: path\to\client_secret.json (Impossibile trovare il percorso specificato)
	at java.base/java.io.FileInputStream.open0(Native Method)
	at java.base/java.io.FileInputStream.open(FileInputStream.java:213)
	at java.base/java.io.FileInputStream.<init>(FileInputStream.java:152)
	at java.base/java.io.FileInputStream.<init>(FileInputStream.java:106)
	at java.base/java.io.FileReader.<init>(FileReader.java:60)
	at it.polito.communicationmanager.services.EMailRoute.getCredentials(CommunicationServiceImpl.kt:60)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:87)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 23:01:24,590 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 23:01:24,593 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 23:01:24,593 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail://messages/list)
2024-05-18 23:01:24,595 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 5ms (uptime:4s)
2024-05-18 23:08:16,214 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 26824 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 23:08:16,216 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 23:08:16,954 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 23:08:16,962 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 23:08:16,962 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 23:08:17,000 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 23:08:17,001 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 748 ms
2024-05-18 23:08:17,805 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 23:08:17,894 INFO [main] o.a.c.c.f.FileEndpoint [FileEndpoint.java:132] Endpoint is configured with noop=true so forcing endpoint to be idempotent as well
2024-05-18 23:08:17,894 INFO [main] o.a.c.c.f.FileEndpoint [FileEndpoint.java:138] Using default memory based idempotent repository with cache max size: 1000
2024-05-18 23:08:17,896 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 23:08:17,908 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:2)
2024-05-18 23:08:17,909 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail://messages/list)
2024-05-18 23:08:17,909 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route2 (file://path/to/your/folder)
2024-05-18 23:08:17,909 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 12ms (build:0ms init:0ms start:12ms)
2024-05-18 23:08:17,912 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 1.915 seconds (process running for 2.36)
2024-05-18 23:08:23,956 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 23:08:23,960 INFO [Camel (camel-1) thread #3 - ShutdownTask] o.a.c.i.e.DefaultShutdownStrategy [DefaultShutdownStrategy.java:689] Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 45 seconds. Inflights per route: [route1 = 1]
2024-05-18 23:08:24,973 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:2)
2024-05-18 23:08:24,973 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route2 (file://path/to/your/folder)
2024-05-18 23:08:24,973 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail://messages/list)
2024-05-18 23:08:24,975 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 1s19ms (uptime:7s)
2024-05-18 23:10:56,944 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 1600 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 23:10:56,946 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 23:10:57,714 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 23:10:57,721 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 23:10:57,722 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 23:10:57,772 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 23:10:57,772 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 792 ms
2024-05-18 23:10:58,614 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 23:10:58,711 INFO [main] o.a.c.c.f.FileEndpoint [FileEndpoint.java:132] Endpoint is configured with noop=true so forcing endpoint to be idempotent as well
2024-05-18 23:10:58,711 INFO [main] o.a.c.c.f.FileEndpoint [FileEndpoint.java:138] Using default memory based idempotent repository with cache max size: 1000
2024-05-18 23:10:58,714 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 23:10:58,725 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 23:10:58,726 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (file://input)
2024-05-18 23:10:58,726 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 10ms (build:0ms init:0ms start:10ms)
2024-05-18 23:10:58,727 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 2.009 seconds (process running for 2.463)
2024-05-18 23:13:00,302 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 23:13:00,305 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 23:13:00,305 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (file://input)
2024-05-18 23:13:00,307 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 5ms (uptime:2m1s)
2024-05-18 23:13:02,961 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 27312 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 23:13:02,963 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 23:13:03,725 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 23:13:03,733 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 23:13:03,733 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 23:13:03,782 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 23:13:03,783 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 786 ms
2024-05-18 23:13:04,553 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 23:13:04,645 INFO [main] o.a.c.c.f.FileEndpoint [FileEndpoint.java:132] Endpoint is configured with noop=true so forcing endpoint to be idempotent as well
2024-05-18 23:13:04,645 INFO [main] o.a.c.c.f.FileEndpoint [FileEndpoint.java:138] Using default memory based idempotent repository with cache max size: 1000
2024-05-18 23:13:04,647 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 23:13:04,657 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 23:13:04,657 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (file://input)
2024-05-18 23:13:04,657 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 8ms (build:0ms init:0ms start:8ms)
2024-05-18 23:13:04,659 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 1.916 seconds (process running for 2.399)
2024-05-18 23:16:19,989 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 23:16:19,993 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 23:16:19,993 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (file://input)
2024-05-18 23:16:19,995 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 5ms (uptime:3m15s)
2024-05-18 23:16:23,817 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 23996 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 23:16:23,820 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 23:16:24,593 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 23:16:24,601 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 23:16:24,601 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 23:16:24,649 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 23:16:24,649 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 796 ms
2024-05-18 23:16:25,415 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 23:16:25,492 INFO [main] o.a.c.c.f.FileEndpoint [FileEndpoint.java:132] Endpoint is configured with noop=true so forcing endpoint to be idempotent as well
2024-05-18 23:16:25,492 INFO [main] o.a.c.c.f.FileEndpoint [FileEndpoint.java:138] Using default memory based idempotent repository with cache max size: 1000
2024-05-18 23:16:25,494 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 23:16:25,504 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 23:16:25,504 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (file://input)
2024-05-18 23:16:25,504 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 9ms (build:0ms init:0ms start:9ms)
2024-05-18 23:16:25,505 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 1.886 seconds (process running for 2.353)
2024-05-18 23:16:28,589 ERROR [Camel (camel-1) thread #1 - file://input] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 73822CE4236E7DF-0000000000000000 on ExchangeId: 73822CE4236E7DF-0000000000000000). Exhausted after delivery attempt: 1 caught: com.fasterxml.jackson.core.JsonParseException: Unrecognized token 'from': was expecting (JSON String, Number, Array, Object or token 'null', 'true' or 'false')
 at [Source: (String)"from: gagliardo9975@gmail.com
to: gagliardo9974@gmail.com
subject: ciaauuu
body: cweuiejferijeitgjeigjei"; line: 1, column: 5]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[file://input?noop=true]                                 19
	...
                                         route1/process1                Processor@0xba87c11                                           0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.fasterxml.jackson.core.JsonParseException: Unrecognized token 'from': was expecting (JSON String, Number, Array, Object or token 'null', 'true' or 'false')
 at [Source: (String)"from: gagliardo9975@gmail.com
to: gagliardo9974@gmail.com
subject: ciaauuu
body: cweuiejferijeitgjeigjei"; line: 1, column: 5]
	at com.fasterxml.jackson.core.JsonParser._constructError(JsonParser.java:2477)
	at com.fasterxml.jackson.core.base.ParserMinimalBase._reportError(ParserMinimalBase.java:760)
	at com.fasterxml.jackson.core.json.ReaderBasedJsonParser._reportInvalidToken(ReaderBasedJsonParser.java:3041)
	at com.fasterxml.jackson.core.json.ReaderBasedJsonParser._reportInvalidToken(ReaderBasedJsonParser.java:3019)
	at com.fasterxml.jackson.core.json.ReaderBasedJsonParser._matchToken(ReaderBasedJsonParser.java:2793)
	at com.fasterxml.jackson.core.json.ReaderBasedJsonParser._matchFalse(ReaderBasedJsonParser.java:2763)
	at com.fasterxml.jackson.core.json.ReaderBasedJsonParser.nextToken(ReaderBasedJsonParser.java:774)
	at com.fasterxml.jackson.databind.ObjectMapper._initForReading(ObjectMapper.java:4912)
	at com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4818)
	at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3772)
	at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3740)
	at it.polito.communicationmanager.services.FileToEmailRoute.configure$lambda$0(CommunicationServiceImpl.kt:127)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:491)
	at org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:244)
	at org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:205)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 23:16:28,591 WARN [Camel (camel-1) thread #1 - file://input] o.a.c.c.f.GenericFileOnCompletion [GenericFileOnCompletion.java:151] Rollback file strategy: org.apache.camel.component.file.strategy.GenericFileRenameProcessStrategy@8f9b4f1 for file: GenericFile[lab4.txt]
2024-05-18 23:16:29,108 ERROR [Camel (camel-1) thread #1 - file://input] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 73822CE4236E7DF-0000000000000001 on ExchangeId: 73822CE4236E7DF-0000000000000001). Exhausted after delivery attempt: 1 caught: com.fasterxml.jackson.core.JsonParseException: Unrecognized token 'from': was expecting (JSON String, Number, Array, Object or token 'null', 'true' or 'false')
 at [Source: (String)"from: gagliardo9975@gmail.com
to: gagliardo9974@gmail.com
subject: ciaauuu
body: cweuiejferijeitgjeigjei"; line: 1, column: 5]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[file://input?noop=true]                                  2
	...
                                         route1/process1                Processor@0xba87c11                                           0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.fasterxml.jackson.core.JsonParseException: Unrecognized token 'from': was expecting (JSON String, Number, Array, Object or token 'null', 'true' or 'false')
 at [Source: (String)"from: gagliardo9975@gmail.com
to: gagliardo9974@gmail.com
subject: ciaauuu
body: cweuiejferijeitgjeigjei"; line: 1, column: 5]
	at com.fasterxml.jackson.core.JsonParser._constructError(JsonParser.java:2477)
	at com.fasterxml.jackson.core.base.ParserMinimalBase._reportError(ParserMinimalBase.java:760)
	at com.fasterxml.jackson.core.json.ReaderBasedJsonParser._reportInvalidToken(ReaderBasedJsonParser.java:3041)
	at com.fasterxml.jackson.core.json.ReaderBasedJsonParser._reportInvalidToken(ReaderBasedJsonParser.java:3019)
	at com.fasterxml.jackson.core.json.ReaderBasedJsonParser._matchToken(ReaderBasedJsonParser.java:2793)
	at com.fasterxml.jackson.core.json.ReaderBasedJsonParser._matchFalse(ReaderBasedJsonParser.java:2763)
	at com.fasterxml.jackson.core.json.ReaderBasedJsonParser.nextToken(ReaderBasedJsonParser.java:774)
	at com.fasterxml.jackson.databind.ObjectMapper._initForReading(ObjectMapper.java:4912)
	at com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4818)
	at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3772)
	at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3740)
	at it.polito.communicationmanager.services.FileToEmailRoute.configure$lambda$0(CommunicationServiceImpl.kt:127)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:491)
	at org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:244)
	at org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:205)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 23:16:29,108 WARN [Camel (camel-1) thread #1 - file://input] o.a.c.c.f.GenericFileOnCompletion [GenericFileOnCompletion.java:151] Rollback file strategy: org.apache.camel.component.file.strategy.GenericFileRenameProcessStrategy@8f9b4f1 for file: GenericFile[lab4.txt]
2024-05-18 23:16:29,625 ERROR [Camel (camel-1) thread #1 - file://input] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 73822CE4236E7DF-0000000000000002 on ExchangeId: 73822CE4236E7DF-0000000000000002). Exhausted after delivery attempt: 1 caught: com.fasterxml.jackson.core.JsonParseException: Unrecognized token 'from': was expecting (JSON String, Number, Array, Object or token 'null', 'true' or 'false')
 at [Source: (String)"from: gagliardo9975@gmail.com
to: gagliardo9974@gmail.com
subject: ciaauuu
body: cweuiejferijeitgjeigjei"; line: 1, column: 5]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[file://input?noop=true]                                  1
	...
                                         route1/process1                Processor@0xba87c11                                           0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.fasterxml.jackson.core.JsonParseException: Unrecognized token 'from': was expecting (JSON String, Number, Array, Object or token 'null', 'true' or 'false')
 at [Source: (String)"from: gagliardo9975@gmail.com
to: gagliardo9974@gmail.com
subject: ciaauuu
body: cweuiejferijeitgjeigjei"; line: 1, column: 5]
	at com.fasterxml.jackson.core.JsonParser._constructError(JsonParser.java:2477)
	at com.fasterxml.jackson.core.base.ParserMinimalBase._reportError(ParserMinimalBase.java:760)
	at com.fasterxml.jackson.core.json.ReaderBasedJsonParser._reportInvalidToken(ReaderBasedJsonParser.java:3041)
	at com.fasterxml.jackson.core.json.ReaderBasedJsonParser._reportInvalidToken(ReaderBasedJsonParser.java:3019)
	at com.fasterxml.jackson.core.json.ReaderBasedJsonParser._matchToken(ReaderBasedJsonParser.java:2793)
	at com.fasterxml.jackson.core.json.ReaderBasedJsonParser._matchFalse(ReaderBasedJsonParser.java:2763)
	at com.fasterxml.jackson.core.json.ReaderBasedJsonParser.nextToken(ReaderBasedJsonParser.java:774)
	at com.fasterxml.jackson.databind.ObjectMapper._initForReading(ObjectMapper.java:4912)
	at com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4818)
	at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3772)
	at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3740)
	at it.polito.communicationmanager.services.FileToEmailRoute.configure$lambda$0(CommunicationServiceImpl.kt:127)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:491)
	at org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:244)
	at org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:205)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 23:16:29,625 WARN [Camel (camel-1) thread #1 - file://input] o.a.c.c.f.GenericFileOnCompletion [GenericFileOnCompletion.java:151] Rollback file strategy: org.apache.camel.component.file.strategy.GenericFileRenameProcessStrategy@8f9b4f1 for file: GenericFile[lab4.txt]
2024-05-18 23:16:30,127 ERROR [Camel (camel-1) thread #1 - file://input] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 73822CE4236E7DF-0000000000000003 on ExchangeId: 73822CE4236E7DF-0000000000000003). Exhausted after delivery attempt: 1 caught: com.fasterxml.jackson.core.JsonParseException: Unrecognized token 'from': was expecting (JSON String, Number, Array, Object or token 'null', 'true' or 'false')
 at [Source: (String)"from: gagliardo9975@gmail.com
to: gagliardo9974@gmail.com
subject: ciaauuu
body: cweuiejferijeitgjeigjei"; line: 1, column: 5]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[file://input?noop=true]                                  1
	...
                                         route1/process1                Processor@0xba87c11                                           0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.fasterxml.jackson.core.JsonParseException: Unrecognized token 'from': was expecting (JSON String, Number, Array, Object or token 'null', 'true' or 'false')
 at [Source: (String)"from: gagliardo9975@gmail.com
to: gagliardo9974@gmail.com
subject: ciaauuu
body: cweuiejferijeitgjeigjei"; line: 1, column: 5]
	at com.fasterxml.jackson.core.JsonParser._constructError(JsonParser.java:2477)
	at com.fasterxml.jackson.core.base.ParserMinimalBase._reportError(ParserMinimalBase.java:760)
	at com.fasterxml.jackson.core.json.ReaderBasedJsonParser._reportInvalidToken(ReaderBasedJsonParser.java:3041)
	at com.fasterxml.jackson.core.json.ReaderBasedJsonParser._reportInvalidToken(ReaderBasedJsonParser.java:3019)
	at com.fasterxml.jackson.core.json.ReaderBasedJsonParser._matchToken(ReaderBasedJsonParser.java:2793)
	at com.fasterxml.jackson.core.json.ReaderBasedJsonParser._matchFalse(ReaderBasedJsonParser.java:2763)
	at com.fasterxml.jackson.core.json.ReaderBasedJsonParser.nextToken(ReaderBasedJsonParser.java:774)
	at com.fasterxml.jackson.databind.ObjectMapper._initForReading(ObjectMapper.java:4912)
	at com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4818)
	at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3772)
	at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3740)
	at it.polito.communicationmanager.services.FileToEmailRoute.configure$lambda$0(CommunicationServiceImpl.kt:127)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:491)
	at org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:244)
	at org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:205)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 23:16:30,127 WARN [Camel (camel-1) thread #1 - file://input] o.a.c.c.f.GenericFileOnCompletion [GenericFileOnCompletion.java:151] Rollback file strategy: org.apache.camel.component.file.strategy.GenericFileRenameProcessStrategy@8f9b4f1 for file: GenericFile[lab4.txt]
2024-05-18 23:16:30,630 ERROR [Camel (camel-1) thread #1 - file://input] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 73822CE4236E7DF-0000000000000004 on ExchangeId: 73822CE4236E7DF-0000000000000004). Exhausted after delivery attempt: 1 caught: com.fasterxml.jackson.core.JsonParseException: Unrecognized token 'from': was expecting (JSON String, Number, Array, Object or token 'null', 'true' or 'false')
 at [Source: (String)"from: gagliardo9975@gmail.com
to: gagliardo9974@gmail.com
subject: ciaauuu
body: cweuiejferijeitgjeigjei"; line: 1, column: 5]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[file://input?noop=true]                                  2
	...
                                         route1/process1                Processor@0xba87c11                                           0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.fasterxml.jackson.core.JsonParseException: Unrecognized token 'from': was expecting (JSON String, Number, Array, Object or token 'null', 'true' or 'false')
 at [Source: (String)"from: gagliardo9975@gmail.com
to: gagliardo9974@gmail.com
subject: ciaauuu
body: cweuiejferijeitgjeigjei"; line: 1, column: 5]
	at com.fasterxml.jackson.core.JsonParser._constructError(JsonParser.java:2477)
	at com.fasterxml.jackson.core.base.ParserMinimalBase._reportError(ParserMinimalBase.java:760)
	at com.fasterxml.jackson.core.json.ReaderBasedJsonParser._reportInvalidToken(ReaderBasedJsonParser.java:3041)
	at com.fasterxml.jackson.core.json.ReaderBasedJsonParser._reportInvalidToken(ReaderBasedJsonParser.java:3019)
	at com.fasterxml.jackson.core.json.ReaderBasedJsonParser._matchToken(ReaderBasedJsonParser.java:2793)
	at com.fasterxml.jackson.core.json.ReaderBasedJsonParser._matchFalse(ReaderBasedJsonParser.java:2763)
	at com.fasterxml.jackson.core.json.ReaderBasedJsonParser.nextToken(ReaderBasedJsonParser.java:774)
	at com.fasterxml.jackson.databind.ObjectMapper._initForReading(ObjectMapper.java:4912)
	at com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4818)
	at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3772)
	at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3740)
	at it.polito.communicationmanager.services.FileToEmailRoute.configure$lambda$0(CommunicationServiceImpl.kt:127)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:491)
	at org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:244)
	at org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:205)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 23:16:30,631 WARN [Camel (camel-1) thread #1 - file://input] o.a.c.c.f.GenericFileOnCompletion [GenericFileOnCompletion.java:151] Rollback file strategy: org.apache.camel.component.file.strategy.GenericFileRenameProcessStrategy@8f9b4f1 for file: GenericFile[lab4.txt]
2024-05-18 23:16:31,141 ERROR [Camel (camel-1) thread #1 - file://input] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 73822CE4236E7DF-0000000000000005 on ExchangeId: 73822CE4236E7DF-0000000000000005). Exhausted after delivery attempt: 1 caught: com.fasterxml.jackson.core.JsonParseException: Unrecognized token 'from': was expecting (JSON String, Number, Array, Object or token 'null', 'true' or 'false')
 at [Source: (String)"from: gagliardo9975@gmail.com
to: gagliardo9974@gmail.com
subject: ciaauuu
body: cweuiejferijeitgjeigjei"; line: 1, column: 5]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[file://input?noop=true]                                  1
	...
                                         route1/process1                Processor@0xba87c11                                           0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.fasterxml.jackson.core.JsonParseException: Unrecognized token 'from': was expecting (JSON String, Number, Array, Object or token 'null', 'true' or 'false')
 at [Source: (String)"from: gagliardo9975@gmail.com
to: gagliardo9974@gmail.com
subject: ciaauuu
body: cweuiejferijeitgjeigjei"; line: 1, column: 5]
	at com.fasterxml.jackson.core.JsonParser._constructError(JsonParser.java:2477)
	at com.fasterxml.jackson.core.base.ParserMinimalBase._reportError(ParserMinimalBase.java:760)
	at com.fasterxml.jackson.core.json.ReaderBasedJsonParser._reportInvalidToken(ReaderBasedJsonParser.java:3041)
	at com.fasterxml.jackson.core.json.ReaderBasedJsonParser._reportInvalidToken(ReaderBasedJsonParser.java:3019)
	at com.fasterxml.jackson.core.json.ReaderBasedJsonParser._matchToken(ReaderBasedJsonParser.java:2793)
	at com.fasterxml.jackson.core.json.ReaderBasedJsonParser._matchFalse(ReaderBasedJsonParser.java:2763)
	at com.fasterxml.jackson.core.json.ReaderBasedJsonParser.nextToken(ReaderBasedJsonParser.java:774)
	at com.fasterxml.jackson.databind.ObjectMapper._initForReading(ObjectMapper.java:4912)
	at com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4818)
	at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3772)
	at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3740)
	at it.polito.communicationmanager.services.FileToEmailRoute.configure$lambda$0(CommunicationServiceImpl.kt:127)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:491)
	at org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:244)
	at org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:205)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 23:16:31,142 WARN [Camel (camel-1) thread #1 - file://input] o.a.c.c.f.GenericFileOnCompletion [GenericFileOnCompletion.java:151] Rollback file strategy: org.apache.camel.component.file.strategy.GenericFileRenameProcessStrategy@8f9b4f1 for file: GenericFile[lab4.txt]
2024-05-18 23:16:31,658 ERROR [Camel (camel-1) thread #1 - file://input] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 73822CE4236E7DF-0000000000000006 on ExchangeId: 73822CE4236E7DF-0000000000000006). Exhausted after delivery attempt: 1 caught: com.fasterxml.jackson.core.JsonParseException: Unrecognized token 'from': was expecting (JSON String, Number, Array, Object or token 'null', 'true' or 'false')
 at [Source: (String)"from: gagliardo9975@gmail.com
to: gagliardo9974@gmail.com
subject: ciaauuu
body: cweuiejferijeitgjeigjei"; line: 1, column: 5]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[file://input?noop=true]                                  1
	...
                                         route1/process1                Processor@0xba87c11                                           0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.fasterxml.jackson.core.JsonParseException: Unrecognized token 'from': was expecting (JSON String, Number, Array, Object or token 'null', 'true' or 'false')
 at [Source: (String)"from: gagliardo9975@gmail.com
to: gagliardo9974@gmail.com
subject: ciaauuu
body: cweuiejferijeitgjeigjei"; line: 1, column: 5]
	at com.fasterxml.jackson.core.JsonParser._constructError(JsonParser.java:2477)
	at com.fasterxml.jackson.core.base.ParserMinimalBase._reportError(ParserMinimalBase.java:760)
	at com.fasterxml.jackson.core.json.ReaderBasedJsonParser._reportInvalidToken(ReaderBasedJsonParser.java:3041)
	at com.fasterxml.jackson.core.json.ReaderBasedJsonParser._reportInvalidToken(ReaderBasedJsonParser.java:3019)
	at com.fasterxml.jackson.core.json.ReaderBasedJsonParser._matchToken(ReaderBasedJsonParser.java:2793)
	at com.fasterxml.jackson.core.json.ReaderBasedJsonParser._matchFalse(ReaderBasedJsonParser.java:2763)
	at com.fasterxml.jackson.core.json.ReaderBasedJsonParser.nextToken(ReaderBasedJsonParser.java:774)
	at com.fasterxml.jackson.databind.ObjectMapper._initForReading(ObjectMapper.java:4912)
	at com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4818)
	at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3772)
	at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3740)
	at it.polito.communicationmanager.services.FileToEmailRoute.configure$lambda$0(CommunicationServiceImpl.kt:127)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:491)
	at org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:244)
	at org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:205)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 23:16:31,659 WARN [Camel (camel-1) thread #1 - file://input] o.a.c.c.f.GenericFileOnCompletion [GenericFileOnCompletion.java:151] Rollback file strategy: org.apache.camel.component.file.strategy.GenericFileRenameProcessStrategy@8f9b4f1 for file: GenericFile[lab4.txt]
2024-05-18 23:16:32,172 ERROR [Camel (camel-1) thread #1 - file://input] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 73822CE4236E7DF-0000000000000007 on ExchangeId: 73822CE4236E7DF-0000000000000007). Exhausted after delivery attempt: 1 caught: com.fasterxml.jackson.core.JsonParseException: Unrecognized token 'from': was expecting (JSON String, Number, Array, Object or token 'null', 'true' or 'false')
 at [Source: (String)"from: gagliardo9975@gmail.com
to: gagliardo9974@gmail.com
subject: ciaauuu
body: cweuiejferijeitgjeigjei"; line: 1, column: 5]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[file://input?noop=true]                                  1
	...
                                         route1/process1                Processor@0xba87c11                                           0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.fasterxml.jackson.core.JsonParseException: Unrecognized token 'from': was expecting (JSON String, Number, Array, Object or token 'null', 'true' or 'false')
 at [Source: (String)"from: gagliardo9975@gmail.com
to: gagliardo9974@gmail.com
subject: ciaauuu
body: cweuiejferijeitgjeigjei"; line: 1, column: 5]
	at com.fasterxml.jackson.core.JsonParser._constructError(JsonParser.java:2477)
	at com.fasterxml.jackson.core.base.ParserMinimalBase._reportError(ParserMinimalBase.java:760)
	at com.fasterxml.jackson.core.json.ReaderBasedJsonParser._reportInvalidToken(ReaderBasedJsonParser.java:3041)
	at com.fasterxml.jackson.core.json.ReaderBasedJsonParser._reportInvalidToken(ReaderBasedJsonParser.java:3019)
	at com.fasterxml.jackson.core.json.ReaderBasedJsonParser._matchToken(ReaderBasedJsonParser.java:2793)
	at com.fasterxml.jackson.core.json.ReaderBasedJsonParser._matchFalse(ReaderBasedJsonParser.java:2763)
	at com.fasterxml.jackson.core.json.ReaderBasedJsonParser.nextToken(ReaderBasedJsonParser.java:774)
	at com.fasterxml.jackson.databind.ObjectMapper._initForReading(ObjectMapper.java:4912)
	at com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4818)
	at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3772)
	at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3740)
	at it.polito.communicationmanager.services.FileToEmailRoute.configure$lambda$0(CommunicationServiceImpl.kt:127)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:491)
	at org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:244)
	at org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:205)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 23:16:32,173 WARN [Camel (camel-1) thread #1 - file://input] o.a.c.c.f.GenericFileOnCompletion [GenericFileOnCompletion.java:151] Rollback file strategy: org.apache.camel.component.file.strategy.GenericFileRenameProcessStrategy@8f9b4f1 for file: GenericFile[lab4.txt]
2024-05-18 23:16:32,691 ERROR [Camel (camel-1) thread #1 - file://input] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 73822CE4236E7DF-0000000000000008 on ExchangeId: 73822CE4236E7DF-0000000000000008). Exhausted after delivery attempt: 1 caught: com.fasterxml.jackson.core.JsonParseException: Unrecognized token 'from': was expecting (JSON String, Number, Array, Object or token 'null', 'true' or 'false')
 at [Source: (String)"from: gagliardo9975@gmail.com
to: gagliardo9974@gmail.com
subject: ciaauuu
body: cweuiejferijeitgjeigjei"; line: 1, column: 5]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[file://input?noop=true]                                  1
	...
                                         route1/process1                Processor@0xba87c11                                           0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.fasterxml.jackson.core.JsonParseException: Unrecognized token 'from': was expecting (JSON String, Number, Array, Object or token 'null', 'true' or 'false')
 at [Source: (String)"from: gagliardo9975@gmail.com
to: gagliardo9974@gmail.com
subject: ciaauuu
body: cweuiejferijeitgjeigjei"; line: 1, column: 5]
	at com.fasterxml.jackson.core.JsonParser._constructError(JsonParser.java:2477)
	at com.fasterxml.jackson.core.base.ParserMinimalBase._reportError(ParserMinimalBase.java:760)
	at com.fasterxml.jackson.core.json.ReaderBasedJsonParser._reportInvalidToken(ReaderBasedJsonParser.java:3041)
	at com.fasterxml.jackson.core.json.ReaderBasedJsonParser._reportInvalidToken(ReaderBasedJsonParser.java:3019)
	at com.fasterxml.jackson.core.json.ReaderBasedJsonParser._matchToken(ReaderBasedJsonParser.java:2793)
	at com.fasterxml.jackson.core.json.ReaderBasedJsonParser._matchFalse(ReaderBasedJsonParser.java:2763)
	at com.fasterxml.jackson.core.json.ReaderBasedJsonParser.nextToken(ReaderBasedJsonParser.java:774)
	at com.fasterxml.jackson.databind.ObjectMapper._initForReading(ObjectMapper.java:4912)
	at com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4818)
	at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3772)
	at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3740)
	at it.polito.communicationmanager.services.FileToEmailRoute.configure$lambda$0(CommunicationServiceImpl.kt:127)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:491)
	at org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:244)
	at org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:205)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 23:16:32,691 WARN [Camel (camel-1) thread #1 - file://input] o.a.c.c.f.GenericFileOnCompletion [GenericFileOnCompletion.java:151] Rollback file strategy: org.apache.camel.component.file.strategy.GenericFileRenameProcessStrategy@8f9b4f1 for file: GenericFile[lab4.txt]
2024-05-18 23:16:32,942 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 23:16:32,945 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 23:16:32,945 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (file://input)
2024-05-18 23:16:32,947 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 5ms (uptime:7s)
2024-05-18 23:18:02,070 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 25456 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 23:18:02,072 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 23:18:02,828 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 23:18:02,836 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 23:18:02,837 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 23:18:02,885 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 23:18:02,886 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 781 ms
2024-05-18 23:18:03,642 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 23:18:03,720 INFO [main] o.a.c.c.f.FileEndpoint [FileEndpoint.java:132] Endpoint is configured with noop=true so forcing endpoint to be idempotent as well
2024-05-18 23:18:03,720 INFO [main] o.a.c.c.f.FileEndpoint [FileEndpoint.java:138] Using default memory based idempotent repository with cache max size: 1000
2024-05-18 23:18:03,723 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 23:18:03,731 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 23:18:03,732 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (file://input)
2024-05-18 23:18:03,732 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 8ms (build:0ms init:0ms start:8ms)
2024-05-18 23:18:03,734 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 1.868 seconds (process running for 2.301)
2024-05-18 23:18:39,055 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 23:18:39,059 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 23:18:39,060 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (file://input)
2024-05-18 23:18:39,062 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 7ms (uptime:35s)
2024-05-18 23:19:53,500 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 8428 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 23:19:53,501 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 23:19:54,282 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 23:19:54,290 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 23:19:54,290 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 23:19:54,334 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 23:19:54,335 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 798 ms
2024-05-18 23:19:55,087 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 23:19:55,167 INFO [main] o.a.c.c.f.FileEndpoint [FileEndpoint.java:132] Endpoint is configured with noop=true so forcing endpoint to be idempotent as well
2024-05-18 23:19:55,167 INFO [main] o.a.c.c.f.FileEndpoint [FileEndpoint.java:138] Using default memory based idempotent repository with cache max size: 1000
2024-05-18 23:19:55,169 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 23:19:55,179 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 23:19:55,180 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (file://input)
2024-05-18 23:19:55,180 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 9ms (build:0ms init:0ms start:9ms)
2024-05-18 23:19:55,181 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 1.906 seconds (process running for 2.361)
2024-05-18 23:20:04,676 ERROR [Camel (camel-1) thread #1 - file://input] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: B94A7047DF8943E-0000000000000000 on ExchangeId: B94A7047DF8943E-0000000000000000). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
POST https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/send
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Recipient address required",
    "reason" : "invalidArgument"
  } ],
  "message" : "Recipient address required",
  "status" : "INVALID_ARGUMENT"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[file://input?noop=true]                                841
	...
                                         route1/process1                Processor@0x6032622                                           0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
POST https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/send
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Recipient address required",
    "reason" : "invalidArgument"
  } ],
  "message" : "Recipient address required",
  "status" : "INVALID_ARGUMENT"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.FileToEmailRoute.configure$lambda$0(CommunicationServiceImpl.kt:134)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:491)
	at org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:244)
	at org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:205)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 23:20:04,678 WARN [Camel (camel-1) thread #1 - file://input] o.a.c.c.f.GenericFileOnCompletion [GenericFileOnCompletion.java:151] Rollback file strategy: org.apache.camel.component.file.strategy.GenericFileRenameProcessStrategy@15d4eda9 for file: GenericFile[lab4.json]
2024-05-18 23:20:05,384 ERROR [Camel (camel-1) thread #1 - file://input] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: B94A7047DF8943E-0000000000000001 on ExchangeId: B94A7047DF8943E-0000000000000001). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
POST https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/send
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Recipient address required",
    "reason" : "invalidArgument"
  } ],
  "message" : "Recipient address required",
  "status" : "INVALID_ARGUMENT"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[file://input?noop=true]                                199
	...
                                         route1/process1                Processor@0x6032622                                           0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
POST https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/send
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Recipient address required",
    "reason" : "invalidArgument"
  } ],
  "message" : "Recipient address required",
  "status" : "INVALID_ARGUMENT"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.FileToEmailRoute.configure$lambda$0(CommunicationServiceImpl.kt:134)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:491)
	at org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:244)
	at org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:205)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 23:20:05,385 WARN [Camel (camel-1) thread #1 - file://input] o.a.c.c.f.GenericFileOnCompletion [GenericFileOnCompletion.java:151] Rollback file strategy: org.apache.camel.component.file.strategy.GenericFileRenameProcessStrategy@15d4eda9 for file: GenericFile[lab4.json]
2024-05-18 23:20:06,087 ERROR [Camel (camel-1) thread #1 - file://input] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: B94A7047DF8943E-0000000000000002 on ExchangeId: B94A7047DF8943E-0000000000000002). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
POST https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/send
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Recipient address required",
    "reason" : "invalidArgument"
  } ],
  "message" : "Recipient address required",
  "status" : "INVALID_ARGUMENT"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[file://input?noop=true]                                197
	...
                                         route1/process1                Processor@0x6032622                                           0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
POST https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/send
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Recipient address required",
    "reason" : "invalidArgument"
  } ],
  "message" : "Recipient address required",
  "status" : "INVALID_ARGUMENT"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.FileToEmailRoute.configure$lambda$0(CommunicationServiceImpl.kt:134)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:491)
	at org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:244)
	at org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:205)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 23:20:06,087 WARN [Camel (camel-1) thread #1 - file://input] o.a.c.c.f.GenericFileOnCompletion [GenericFileOnCompletion.java:151] Rollback file strategy: org.apache.camel.component.file.strategy.GenericFileRenameProcessStrategy@15d4eda9 for file: GenericFile[lab4.json]
2024-05-18 23:20:06,796 ERROR [Camel (camel-1) thread #1 - file://input] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: B94A7047DF8943E-0000000000000003 on ExchangeId: B94A7047DF8943E-0000000000000003). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
POST https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/send
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Recipient address required",
    "reason" : "invalidArgument"
  } ],
  "message" : "Recipient address required",
  "status" : "INVALID_ARGUMENT"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[file://input?noop=true]                                198
	...
                                         route1/process1                Processor@0x6032622                                           0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
POST https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/send
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Recipient address required",
    "reason" : "invalidArgument"
  } ],
  "message" : "Recipient address required",
  "status" : "INVALID_ARGUMENT"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.FileToEmailRoute.configure$lambda$0(CommunicationServiceImpl.kt:134)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:491)
	at org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:244)
	at org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:205)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 23:20:06,798 WARN [Camel (camel-1) thread #1 - file://input] o.a.c.c.f.GenericFileOnCompletion [GenericFileOnCompletion.java:151] Rollback file strategy: org.apache.camel.component.file.strategy.GenericFileRenameProcessStrategy@15d4eda9 for file: GenericFile[lab4.json]
2024-05-18 23:20:07,319 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 23:20:07,330 INFO [Camel (camel-1) thread #2 - ShutdownTask] o.a.c.i.e.DefaultShutdownStrategy [DefaultShutdownStrategy.java:689] Waiting as there are still 2 inflight and pending exchanges to complete, timeout in 45 seconds. Inflights per route: [route1 = 2]
2024-05-18 23:20:07,505 ERROR [Camel (camel-1) thread #1 - file://input] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: B94A7047DF8943E-0000000000000004 on ExchangeId: B94A7047DF8943E-0000000000000004). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
POST https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/send
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Recipient address required",
    "reason" : "invalidArgument"
  } ],
  "message" : "Recipient address required",
  "status" : "INVALID_ARGUMENT"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[file://input?noop=true]                                195
	...
                                         route1/process1                Processor@0x6032622                                           0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
POST https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/send
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Recipient address required",
    "reason" : "invalidArgument"
  } ],
  "message" : "Recipient address required",
  "status" : "INVALID_ARGUMENT"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.FileToEmailRoute.configure$lambda$0(CommunicationServiceImpl.kt:134)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:491)
	at org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:244)
	at org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:205)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 23:20:07,506 WARN [Camel (camel-1) thread #1 - file://input] o.a.c.c.f.GenericFileOnCompletion [GenericFileOnCompletion.java:151] Rollback file strategy: org.apache.camel.component.file.strategy.GenericFileRenameProcessStrategy@15d4eda9 for file: GenericFile[lab4.json]
2024-05-18 23:20:08,332 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 23:20:08,333 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (file://input)
2024-05-18 23:20:08,335 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 1s15ms (uptime:13s)
2024-05-18 23:22:09,751 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 27208 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 23:22:09,752 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 23:22:10,471 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 23:22:10,479 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 23:22:10,479 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 23:22:10,519 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 23:22:10,519 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 734 ms
2024-05-18 23:22:11,268 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 23:22:11,352 INFO [main] o.a.c.c.f.FileEndpoint [FileEndpoint.java:132] Endpoint is configured with noop=true so forcing endpoint to be idempotent as well
2024-05-18 23:22:11,352 INFO [main] o.a.c.c.f.FileEndpoint [FileEndpoint.java:138] Using default memory based idempotent repository with cache max size: 1000
2024-05-18 23:22:11,355 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 23:22:11,363 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 23:22:11,364 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (file://input)
2024-05-18 23:22:11,364 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 8ms (build:0ms init:0ms start:8ms)
2024-05-18 23:22:11,365 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 1.808 seconds (process running for 2.239)
2024-05-18 23:22:16,582 ERROR [Camel (camel-1) thread #1 - file://input] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 69D21AAAF4BE396-0000000000000000 on ExchangeId: 69D21AAAF4BE396-0000000000000000). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
POST https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/send
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Recipient address required",
    "reason" : "invalidArgument"
  } ],
  "message" : "Recipient address required",
  "status" : "INVALID_ARGUMENT"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[file://input?noop=true]                                650
	...
                                         route1/process1                Processor@0xc7673ae                                           0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
POST https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/send
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Recipient address required",
    "reason" : "invalidArgument"
  } ],
  "message" : "Recipient address required",
  "status" : "INVALID_ARGUMENT"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.FileToEmailRoute.configure$lambda$1(CommunicationServiceImpl.kt:136)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:491)
	at org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:244)
	at org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:205)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 23:22:16,584 WARN [Camel (camel-1) thread #1 - file://input] o.a.c.c.f.GenericFileOnCompletion [GenericFileOnCompletion.java:151] Rollback file strategy: org.apache.camel.component.file.strategy.GenericFileRenameProcessStrategy@2b67b980 for file: GenericFile[lab4.json]
2024-05-18 23:22:17,290 ERROR [Camel (camel-1) thread #1 - file://input] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 69D21AAAF4BE396-0000000000000001 on ExchangeId: 69D21AAAF4BE396-0000000000000001). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
POST https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/send
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Recipient address required",
    "reason" : "invalidArgument"
  } ],
  "message" : "Recipient address required",
  "status" : "INVALID_ARGUMENT"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[file://input?noop=true]                                197
	...
                                         route1/process1                Processor@0xc7673ae                                           0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
POST https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/send
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Recipient address required",
    "reason" : "invalidArgument"
  } ],
  "message" : "Recipient address required",
  "status" : "INVALID_ARGUMENT"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.FileToEmailRoute.configure$lambda$1(CommunicationServiceImpl.kt:136)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:491)
	at org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:244)
	at org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:205)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 23:22:17,291 WARN [Camel (camel-1) thread #1 - file://input] o.a.c.c.f.GenericFileOnCompletion [GenericFileOnCompletion.java:151] Rollback file strategy: org.apache.camel.component.file.strategy.GenericFileRenameProcessStrategy@2b67b980 for file: GenericFile[lab4.json]
2024-05-18 23:22:17,998 ERROR [Camel (camel-1) thread #1 - file://input] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 69D21AAAF4BE396-0000000000000002 on ExchangeId: 69D21AAAF4BE396-0000000000000002). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
POST https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/send
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Recipient address required",
    "reason" : "invalidArgument"
  } ],
  "message" : "Recipient address required",
  "status" : "INVALID_ARGUMENT"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[file://input?noop=true]                                197
	...
                                         route1/process1                Processor@0xc7673ae                                           0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
POST https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/send
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Recipient address required",
    "reason" : "invalidArgument"
  } ],
  "message" : "Recipient address required",
  "status" : "INVALID_ARGUMENT"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.FileToEmailRoute.configure$lambda$1(CommunicationServiceImpl.kt:136)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:491)
	at org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:244)
	at org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:205)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 23:22:17,998 WARN [Camel (camel-1) thread #1 - file://input] o.a.c.c.f.GenericFileOnCompletion [GenericFileOnCompletion.java:151] Rollback file strategy: org.apache.camel.component.file.strategy.GenericFileRenameProcessStrategy@2b67b980 for file: GenericFile[lab4.json]
2024-05-18 23:22:18,521 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 23:22:18,526 INFO [Camel (camel-1) thread #2 - ShutdownTask] o.a.c.i.e.DefaultShutdownStrategy [DefaultShutdownStrategy.java:689] Waiting as there are still 2 inflight and pending exchanges to complete, timeout in 45 seconds. Inflights per route: [route1 = 2]
2024-05-18 23:22:18,702 ERROR [Camel (camel-1) thread #1 - file://input] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 69D21AAAF4BE396-0000000000000003 on ExchangeId: 69D21AAAF4BE396-0000000000000003). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
POST https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/send
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Recipient address required",
    "reason" : "invalidArgument"
  } ],
  "message" : "Recipient address required",
  "status" : "INVALID_ARGUMENT"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[file://input?noop=true]                                194
	...
                                         route1/process1                Processor@0xc7673ae                                           0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
POST https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/send
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Recipient address required",
    "reason" : "invalidArgument"
  } ],
  "message" : "Recipient address required",
  "status" : "INVALID_ARGUMENT"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.FileToEmailRoute.configure$lambda$1(CommunicationServiceImpl.kt:136)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:491)
	at org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:244)
	at org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:205)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 23:22:18,702 WARN [Camel (camel-1) thread #1 - file://input] o.a.c.c.f.GenericFileOnCompletion [GenericFileOnCompletion.java:151] Rollback file strategy: org.apache.camel.component.file.strategy.GenericFileRenameProcessStrategy@2b67b980 for file: GenericFile[lab4.json]
2024-05-18 23:22:19,539 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 23:22:19,539 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (file://input)
2024-05-18 23:22:19,541 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 1s20ms (uptime:8s)
2024-05-18 23:23:31,694 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 2768 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 23:23:31,696 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 23:23:32,423 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 23:23:32,431 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 23:23:32,431 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 23:23:32,470 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 23:23:32,470 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 735 ms
2024-05-18 23:23:33,223 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 23:23:33,301 INFO [main] o.a.c.c.f.FileEndpoint [FileEndpoint.java:132] Endpoint is configured with noop=true so forcing endpoint to be idempotent as well
2024-05-18 23:23:33,302 INFO [main] o.a.c.c.f.FileEndpoint [FileEndpoint.java:138] Using default memory based idempotent repository with cache max size: 1000
2024-05-18 23:23:33,304 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 23:23:33,313 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 23:23:33,314 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (file://input)
2024-05-18 23:23:33,314 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 9ms (build:0ms init:0ms start:9ms)
2024-05-18 23:23:33,315 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 1.836 seconds (process running for 2.29)
2024-05-18 23:23:38,072 ERROR [Camel (camel-1) thread #1 - file://input] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: EF06F8D92638E50-0000000000000000 on ExchangeId: EF06F8D92638E50-0000000000000000). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
POST https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/send
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Recipient address required",
    "reason" : "invalidArgument"
  } ],
  "message" : "Recipient address required",
  "status" : "INVALID_ARGUMENT"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[file://input?noop=true]                                664
	...
                                         route1/process1                Processor@0x54970127                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
POST https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/send
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Recipient address required",
    "reason" : "invalidArgument"
  } ],
  "message" : "Recipient address required",
  "status" : "INVALID_ARGUMENT"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.FileToEmailRoute.configure$lambda$1(CommunicationServiceImpl.kt:136)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:491)
	at org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:244)
	at org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:205)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 23:23:38,073 WARN [Camel (camel-1) thread #1 - file://input] o.a.c.c.f.GenericFileOnCompletion [GenericFileOnCompletion.java:151] Rollback file strategy: org.apache.camel.component.file.strategy.GenericFileRenameProcessStrategy@4a26da9 for file: GenericFile[lab4.json]
2024-05-18 23:23:38,783 ERROR [Camel (camel-1) thread #1 - file://input] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: EF06F8D92638E50-0000000000000001 on ExchangeId: EF06F8D92638E50-0000000000000001). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
POST https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/send
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Recipient address required",
    "reason" : "invalidArgument"
  } ],
  "message" : "Recipient address required",
  "status" : "INVALID_ARGUMENT"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[file://input?noop=true]                                201
	...
                                         route1/process1                Processor@0x54970127                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
POST https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/send
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Recipient address required",
    "reason" : "invalidArgument"
  } ],
  "message" : "Recipient address required",
  "status" : "INVALID_ARGUMENT"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.FileToEmailRoute.configure$lambda$1(CommunicationServiceImpl.kt:136)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:491)
	at org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:244)
	at org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:205)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 23:23:38,783 WARN [Camel (camel-1) thread #1 - file://input] o.a.c.c.f.GenericFileOnCompletion [GenericFileOnCompletion.java:151] Rollback file strategy: org.apache.camel.component.file.strategy.GenericFileRenameProcessStrategy@4a26da9 for file: GenericFile[lab4.json]
2024-05-18 23:23:39,488 ERROR [Camel (camel-1) thread #1 - file://input] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: EF06F8D92638E50-0000000000000002 on ExchangeId: EF06F8D92638E50-0000000000000002). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
POST https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/send
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Recipient address required",
    "reason" : "invalidArgument"
  } ],
  "message" : "Recipient address required",
  "status" : "INVALID_ARGUMENT"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[file://input?noop=true]                                204
	...
                                         route1/process1                Processor@0x54970127                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
POST https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/send
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Recipient address required",
    "reason" : "invalidArgument"
  } ],
  "message" : "Recipient address required",
  "status" : "INVALID_ARGUMENT"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.FileToEmailRoute.configure$lambda$1(CommunicationServiceImpl.kt:136)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:491)
	at org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:244)
	at org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:205)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 23:23:39,489 WARN [Camel (camel-1) thread #1 - file://input] o.a.c.c.f.GenericFileOnCompletion [GenericFileOnCompletion.java:151] Rollback file strategy: org.apache.camel.component.file.strategy.GenericFileRenameProcessStrategy@4a26da9 for file: GenericFile[lab4.json]
2024-05-18 23:23:40,218 ERROR [Camel (camel-1) thread #1 - file://input] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: EF06F8D92638E50-0000000000000003 on ExchangeId: EF06F8D92638E50-0000000000000003). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
POST https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/send
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Recipient address required",
    "reason" : "invalidArgument"
  } ],
  "message" : "Recipient address required",
  "status" : "INVALID_ARGUMENT"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[file://input?noop=true]                                216
	...
                                         route1/process1                Processor@0x54970127                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
POST https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/send
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Recipient address required",
    "reason" : "invalidArgument"
  } ],
  "message" : "Recipient address required",
  "status" : "INVALID_ARGUMENT"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.FileToEmailRoute.configure$lambda$1(CommunicationServiceImpl.kt:136)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:491)
	at org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:244)
	at org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:205)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 23:23:40,219 WARN [Camel (camel-1) thread #1 - file://input] o.a.c.c.f.GenericFileOnCompletion [GenericFileOnCompletion.java:151] Rollback file strategy: org.apache.camel.component.file.strategy.GenericFileRenameProcessStrategy@4a26da9 for file: GenericFile[lab4.json]
2024-05-18 23:23:40,564 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 23:23:40,569 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 23:23:40,569 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (file://input)
2024-05-18 23:23:40,572 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 7ms (uptime:7s)
2024-05-18 23:25:14,235 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 21532 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 23:25:14,237 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 23:25:15,005 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 23:25:15,013 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 23:25:15,013 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 23:25:15,052 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 23:25:15,052 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 780 ms
2024-05-18 23:25:15,834 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 23:25:15,920 INFO [main] o.a.c.c.f.FileEndpoint [FileEndpoint.java:132] Endpoint is configured with noop=true so forcing endpoint to be idempotent as well
2024-05-18 23:25:15,920 INFO [main] o.a.c.c.f.FileEndpoint [FileEndpoint.java:138] Using default memory based idempotent repository with cache max size: 1000
2024-05-18 23:25:15,922 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 23:25:15,930 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 23:25:15,930 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (file://input)
2024-05-18 23:25:15,930 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 7ms (build:0ms init:0ms start:7ms)
2024-05-18 23:25:15,932 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 1.899 seconds (process running for 2.35)
2024-05-18 23:25:17,617 ERROR [Camel (camel-1) thread #1 - file://input] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: C41D8FF3882BDDC-0000000000000000 on ExchangeId: C41D8FF3882BDDC-0000000000000000). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
POST https://gmail.googleapis.com/gmail/v1/users/gagliardo9974@gmail.com/messages/send
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Delegation denied for aw2g52024@gmail.com",
    "reason" : "forbidden"
  } ],
  "message" : "Delegation denied for aw2g52024@gmail.com",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[file://input?noop=true]                                672
	...
                                         route1/process1                Processor@0x7d47b021                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
POST https://gmail.googleapis.com/gmail/v1/users/gagliardo9974@gmail.com/messages/send
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Delegation denied for aw2g52024@gmail.com",
    "reason" : "forbidden"
  } ],
  "message" : "Delegation denied for aw2g52024@gmail.com",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.FileToEmailRoute.configure$lambda$1(CommunicationServiceImpl.kt:136)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:491)
	at org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:244)
	at org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:205)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 23:25:17,620 WARN [Camel (camel-1) thread #1 - file://input] o.a.c.c.f.GenericFileOnCompletion [GenericFileOnCompletion.java:151] Rollback file strategy: org.apache.camel.component.file.strategy.GenericFileRenameProcessStrategy@10b72fc6 for file: GenericFile[lab4.json]
2024-05-18 23:25:18,314 ERROR [Camel (camel-1) thread #1 - file://input] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: C41D8FF3882BDDC-0000000000000001 on ExchangeId: C41D8FF3882BDDC-0000000000000001). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
POST https://gmail.googleapis.com/gmail/v1/users/gagliardo9974@gmail.com/messages/send
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Delegation denied for aw2g52024@gmail.com",
    "reason" : "forbidden"
  } ],
  "message" : "Delegation denied for aw2g52024@gmail.com",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[file://input?noop=true]                                190
	...
                                         route1/process1                Processor@0x7d47b021                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
POST https://gmail.googleapis.com/gmail/v1/users/gagliardo9974@gmail.com/messages/send
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Delegation denied for aw2g52024@gmail.com",
    "reason" : "forbidden"
  } ],
  "message" : "Delegation denied for aw2g52024@gmail.com",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.FileToEmailRoute.configure$lambda$1(CommunicationServiceImpl.kt:136)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:491)
	at org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:244)
	at org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:205)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 23:25:18,315 WARN [Camel (camel-1) thread #1 - file://input] o.a.c.c.f.GenericFileOnCompletion [GenericFileOnCompletion.java:151] Rollback file strategy: org.apache.camel.component.file.strategy.GenericFileRenameProcessStrategy@10b72fc6 for file: GenericFile[lab4.json]
2024-05-18 23:25:19,020 ERROR [Camel (camel-1) thread #1 - file://input] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: C41D8FF3882BDDC-0000000000000002 on ExchangeId: C41D8FF3882BDDC-0000000000000002). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
POST https://gmail.googleapis.com/gmail/v1/users/gagliardo9974@gmail.com/messages/send
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Delegation denied for aw2g52024@gmail.com",
    "reason" : "forbidden"
  } ],
  "message" : "Delegation denied for aw2g52024@gmail.com",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[file://input?noop=true]                                193
	...
                                         route1/process1                Processor@0x7d47b021                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
POST https://gmail.googleapis.com/gmail/v1/users/gagliardo9974@gmail.com/messages/send
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Delegation denied for aw2g52024@gmail.com",
    "reason" : "forbidden"
  } ],
  "message" : "Delegation denied for aw2g52024@gmail.com",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.FileToEmailRoute.configure$lambda$1(CommunicationServiceImpl.kt:136)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:491)
	at org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:244)
	at org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:205)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 23:25:19,021 WARN [Camel (camel-1) thread #1 - file://input] o.a.c.c.f.GenericFileOnCompletion [GenericFileOnCompletion.java:151] Rollback file strategy: org.apache.camel.component.file.strategy.GenericFileRenameProcessStrategy@10b72fc6 for file: GenericFile[lab4.json]
2024-05-18 23:25:19,716 ERROR [Camel (camel-1) thread #1 - file://input] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: C41D8FF3882BDDC-0000000000000003 on ExchangeId: C41D8FF3882BDDC-0000000000000003). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
POST https://gmail.googleapis.com/gmail/v1/users/gagliardo9974@gmail.com/messages/send
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Delegation denied for aw2g52024@gmail.com",
    "reason" : "forbidden"
  } ],
  "message" : "Delegation denied for aw2g52024@gmail.com",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[file://input?noop=true]                                187
	...
                                         route1/process1                Processor@0x7d47b021                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
POST https://gmail.googleapis.com/gmail/v1/users/gagliardo9974@gmail.com/messages/send
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Delegation denied for aw2g52024@gmail.com",
    "reason" : "forbidden"
  } ],
  "message" : "Delegation denied for aw2g52024@gmail.com",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.FileToEmailRoute.configure$lambda$1(CommunicationServiceImpl.kt:136)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:491)
	at org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:244)
	at org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:205)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 23:25:19,718 WARN [Camel (camel-1) thread #1 - file://input] o.a.c.c.f.GenericFileOnCompletion [GenericFileOnCompletion.java:151] Rollback file strategy: org.apache.camel.component.file.strategy.GenericFileRenameProcessStrategy@10b72fc6 for file: GenericFile[lab4.json]
2024-05-18 23:25:20,420 ERROR [Camel (camel-1) thread #1 - file://input] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: C41D8FF3882BDDC-0000000000000004 on ExchangeId: C41D8FF3882BDDC-0000000000000004). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
POST https://gmail.googleapis.com/gmail/v1/users/gagliardo9974@gmail.com/messages/send
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Delegation denied for aw2g52024@gmail.com",
    "reason" : "forbidden"
  } ],
  "message" : "Delegation denied for aw2g52024@gmail.com",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[file://input?noop=true]                                191
	...
                                         route1/process1                Processor@0x7d47b021                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
POST https://gmail.googleapis.com/gmail/v1/users/gagliardo9974@gmail.com/messages/send
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Delegation denied for aw2g52024@gmail.com",
    "reason" : "forbidden"
  } ],
  "message" : "Delegation denied for aw2g52024@gmail.com",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.FileToEmailRoute.configure$lambda$1(CommunicationServiceImpl.kt:136)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:491)
	at org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:244)
	at org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:205)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 23:25:20,422 WARN [Camel (camel-1) thread #1 - file://input] o.a.c.c.f.GenericFileOnCompletion [GenericFileOnCompletion.java:151] Rollback file strategy: org.apache.camel.component.file.strategy.GenericFileRenameProcessStrategy@10b72fc6 for file: GenericFile[lab4.json]
2024-05-18 23:25:21,129 ERROR [Camel (camel-1) thread #1 - file://input] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: C41D8FF3882BDDC-0000000000000005 on ExchangeId: C41D8FF3882BDDC-0000000000000005). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
POST https://gmail.googleapis.com/gmail/v1/users/gagliardo9974@gmail.com/messages/send
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Delegation denied for aw2g52024@gmail.com",
    "reason" : "forbidden"
  } ],
  "message" : "Delegation denied for aw2g52024@gmail.com",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[file://input?noop=true]                                194
	...
                                         route1/process1                Processor@0x7d47b021                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
POST https://gmail.googleapis.com/gmail/v1/users/gagliardo9974@gmail.com/messages/send
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Delegation denied for aw2g52024@gmail.com",
    "reason" : "forbidden"
  } ],
  "message" : "Delegation denied for aw2g52024@gmail.com",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.FileToEmailRoute.configure$lambda$1(CommunicationServiceImpl.kt:136)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:491)
	at org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:244)
	at org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:205)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 23:25:21,129 WARN [Camel (camel-1) thread #1 - file://input] o.a.c.c.f.GenericFileOnCompletion [GenericFileOnCompletion.java:151] Rollback file strategy: org.apache.camel.component.file.strategy.GenericFileRenameProcessStrategy@10b72fc6 for file: GenericFile[lab4.json]
2024-05-18 23:25:21,822 ERROR [Camel (camel-1) thread #1 - file://input] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: C41D8FF3882BDDC-0000000000000006 on ExchangeId: C41D8FF3882BDDC-0000000000000006). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
POST https://gmail.googleapis.com/gmail/v1/users/gagliardo9974@gmail.com/messages/send
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Delegation denied for aw2g52024@gmail.com",
    "reason" : "forbidden"
  } ],
  "message" : "Delegation denied for aw2g52024@gmail.com",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[file://input?noop=true]                                186
	...
                                         route1/process1                Processor@0x7d47b021                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
POST https://gmail.googleapis.com/gmail/v1/users/gagliardo9974@gmail.com/messages/send
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Delegation denied for aw2g52024@gmail.com",
    "reason" : "forbidden"
  } ],
  "message" : "Delegation denied for aw2g52024@gmail.com",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.FileToEmailRoute.configure$lambda$1(CommunicationServiceImpl.kt:136)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:491)
	at org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:244)
	at org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:205)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 23:25:21,823 WARN [Camel (camel-1) thread #1 - file://input] o.a.c.c.f.GenericFileOnCompletion [GenericFileOnCompletion.java:151] Rollback file strategy: org.apache.camel.component.file.strategy.GenericFileRenameProcessStrategy@10b72fc6 for file: GenericFile[lab4.json]
2024-05-18 23:25:22,511 ERROR [Camel (camel-1) thread #1 - file://input] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: C41D8FF3882BDDC-0000000000000007 on ExchangeId: C41D8FF3882BDDC-0000000000000007). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
POST https://gmail.googleapis.com/gmail/v1/users/gagliardo9974@gmail.com/messages/send
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Delegation denied for aw2g52024@gmail.com",
    "reason" : "forbidden"
  } ],
  "message" : "Delegation denied for aw2g52024@gmail.com",
  "status" : "PERMISSION_DENIED"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[file://input?noop=true]                                186
	...
                                         route1/process1                Processor@0x7d47b021                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden
POST https://gmail.googleapis.com/gmail/v1/users/gagliardo9974@gmail.com/messages/send
{
  "code" : 403,
  "errors" : [ {
    "domain" : "global",
    "message" : "Delegation denied for aw2g52024@gmail.com",
    "reason" : "forbidden"
  } ],
  "message" : "Delegation denied for aw2g52024@gmail.com",
  "status" : "PERMISSION_DENIED"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.FileToEmailRoute.configure$lambda$1(CommunicationServiceImpl.kt:136)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:491)
	at org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:244)
	at org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:205)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 23:25:22,512 WARN [Camel (camel-1) thread #1 - file://input] o.a.c.c.f.GenericFileOnCompletion [GenericFileOnCompletion.java:151] Rollback file strategy: org.apache.camel.component.file.strategy.GenericFileRenameProcessStrategy@10b72fc6 for file: GenericFile[lab4.json]
2024-05-18 23:25:22,565 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 23:25:22,569 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 23:25:22,569 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (file://input)
2024-05-18 23:25:22,571 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 5ms (uptime:6s)
2024-05-18 23:26:19,534 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 23576 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 23:26:19,536 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 23:26:20,249 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 23:26:20,262 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 23:26:20,263 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 23:26:20,308 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 23:26:20,309 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 739 ms
2024-05-18 23:26:21,044 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 23:26:21,126 INFO [main] o.a.c.c.f.FileEndpoint [FileEndpoint.java:132] Endpoint is configured with noop=true so forcing endpoint to be idempotent as well
2024-05-18 23:26:21,126 INFO [main] o.a.c.c.f.FileEndpoint [FileEndpoint.java:138] Using default memory based idempotent repository with cache max size: 1000
2024-05-18 23:26:21,128 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 23:26:21,137 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 23:26:21,137 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (file://input)
2024-05-18 23:26:21,137 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 8ms (build:0ms init:0ms start:8ms)
2024-05-18 23:26:21,139 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 1.814 seconds (process running for 2.25)
2024-05-18 23:26:28,389 ERROR [Camel (camel-1) thread #1 - file://input] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 38C1BA86A196A6E-0000000000000000 on ExchangeId: 38C1BA86A196A6E-0000000000000000). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
POST https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/send
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Recipient address required",
    "reason" : "invalidArgument"
  } ],
  "message" : "Recipient address required",
  "status" : "INVALID_ARGUMENT"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[file://input?noop=true]                                657
	...
                                         route1/process1                Processor@0xc7673ae                                           0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
POST https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/send
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Recipient address required",
    "reason" : "invalidArgument"
  } ],
  "message" : "Recipient address required",
  "status" : "INVALID_ARGUMENT"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.FileToEmailRoute.configure$lambda$1(CommunicationServiceImpl.kt:136)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:491)
	at org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:244)
	at org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:205)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 23:26:28,391 WARN [Camel (camel-1) thread #1 - file://input] o.a.c.c.f.GenericFileOnCompletion [GenericFileOnCompletion.java:151] Rollback file strategy: org.apache.camel.component.file.strategy.GenericFileRenameProcessStrategy@d88581a for file: GenericFile[lab4.json]
2024-05-18 23:26:29,097 ERROR [Camel (camel-1) thread #1 - file://input] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 38C1BA86A196A6E-0000000000000001 on ExchangeId: 38C1BA86A196A6E-0000000000000001). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
POST https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/send
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Recipient address required",
    "reason" : "invalidArgument"
  } ],
  "message" : "Recipient address required",
  "status" : "INVALID_ARGUMENT"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[file://input?noop=true]                                199
	...
                                         route1/process1                Processor@0xc7673ae                                           0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
POST https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/send
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Recipient address required",
    "reason" : "invalidArgument"
  } ],
  "message" : "Recipient address required",
  "status" : "INVALID_ARGUMENT"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.FileToEmailRoute.configure$lambda$1(CommunicationServiceImpl.kt:136)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:491)
	at org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:244)
	at org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:205)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 23:26:29,097 WARN [Camel (camel-1) thread #1 - file://input] o.a.c.c.f.GenericFileOnCompletion [GenericFileOnCompletion.java:151] Rollback file strategy: org.apache.camel.component.file.strategy.GenericFileRenameProcessStrategy@d88581a for file: GenericFile[lab4.json]
2024-05-18 23:26:29,851 ERROR [Camel (camel-1) thread #1 - file://input] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 38C1BA86A196A6E-0000000000000002 on ExchangeId: 38C1BA86A196A6E-0000000000000002). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
POST https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/send
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Recipient address required",
    "reason" : "invalidArgument"
  } ],
  "message" : "Recipient address required",
  "status" : "INVALID_ARGUMENT"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[file://input?noop=true]                                252
	...
                                         route1/process1                Processor@0xc7673ae                                           0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
POST https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/send
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Recipient address required",
    "reason" : "invalidArgument"
  } ],
  "message" : "Recipient address required",
  "status" : "INVALID_ARGUMENT"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.FileToEmailRoute.configure$lambda$1(CommunicationServiceImpl.kt:136)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:491)
	at org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:244)
	at org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:205)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 23:26:29,852 WARN [Camel (camel-1) thread #1 - file://input] o.a.c.c.f.GenericFileOnCompletion [GenericFileOnCompletion.java:151] Rollback file strategy: org.apache.camel.component.file.strategy.GenericFileRenameProcessStrategy@d88581a for file: GenericFile[lab4.json]
2024-05-18 23:26:30,557 ERROR [Camel (camel-1) thread #1 - file://input] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: 38C1BA86A196A6E-0000000000000003 on ExchangeId: 38C1BA86A196A6E-0000000000000003). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
POST https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/send
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Recipient address required",
    "reason" : "invalidArgument"
  } ],
  "message" : "Recipient address required",
  "status" : "INVALID_ARGUMENT"
}

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[file://input?noop=true]                                198
	...
                                         route1/process1                Processor@0xc7673ae                                           0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
POST https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/send
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Recipient address required",
    "reason" : "invalidArgument"
  } ],
  "message" : "Recipient address required",
  "status" : "INVALID_ARGUMENT"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.FileToEmailRoute.configure$lambda$1(CommunicationServiceImpl.kt:136)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:491)
	at org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:244)
	at org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:205)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 23:26:30,558 WARN [Camel (camel-1) thread #1 - file://input] o.a.c.c.f.GenericFileOnCompletion [GenericFileOnCompletion.java:151] Rollback file strategy: org.apache.camel.component.file.strategy.GenericFileRenameProcessStrategy@d88581a for file: GenericFile[lab4.json]
2024-05-18 23:26:30,705 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 23:26:30,710 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 23:26:30,711 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (file://input)
2024-05-18 23:26:30,715 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 9ms (uptime:9s)
2024-05-18 23:29:55,898 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 6028 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 23:29:55,900 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 23:29:56,646 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 23:29:56,653 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 23:29:56,653 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 23:29:56,694 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 23:29:56,695 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 757 ms
2024-05-18 23:29:57,089 WARN [main] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext [AbstractApplicationContext.java:632] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'fileToEmailRoute' defined in file [C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main\it\polito\communicationmanager\services\FileToEmailRoute.class]: Unsatisfied dependency expressed through constructor parameter 1: No qualifying bean of type 'com.google.api.services.gmail.Gmail' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
2024-05-18 23:29:57,090 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Stopping service [Tomcat]
2024-05-18 23:29:57,098 INFO [main] o.s.b.a.l.ConditionEvaluationReportLogger [ConditionEvaluationReportLogger.java:82] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-05-18 23:29:57,112 ERROR [main] o.s.b.d.LoggingFailureAnalysisReporter [LoggingFailureAnalysisReporter.java:40] 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 1 of constructor in it.polito.communicationmanager.services.FileToEmailRoute required a bean of type 'com.google.api.services.gmail.Gmail' that could not be found.


Action:

Consider defining a bean of type 'com.google.api.services.gmail.Gmail' in your configuration.

2024-05-18 23:30:09,954 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 8812 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 23:30:09,956 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 23:30:10,758 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 23:30:10,766 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 23:30:10,766 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 23:30:10,808 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 23:30:10,809 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 816 ms
2024-05-18 23:30:11,195 WARN [main] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext [AbstractApplicationContext.java:632] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'fileToEmailRoute' defined in file [C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main\it\polito\communicationmanager\services\FileToEmailRoute.class]: Unsatisfied dependency expressed through constructor parameter 1: No qualifying bean of type 'com.google.api.services.gmail.Gmail' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
2024-05-18 23:30:11,197 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Stopping service [Tomcat]
2024-05-18 23:30:11,205 INFO [main] o.s.b.a.l.ConditionEvaluationReportLogger [ConditionEvaluationReportLogger.java:82] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-05-18 23:30:11,218 ERROR [main] o.s.b.d.LoggingFailureAnalysisReporter [LoggingFailureAnalysisReporter.java:40] 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 1 of constructor in it.polito.communicationmanager.services.FileToEmailRoute required a bean of type 'com.google.api.services.gmail.Gmail' that could not be found.


Action:

Consider defining a bean of type 'com.google.api.services.gmail.Gmail' in your configuration.

2024-05-18 23:32:28,387 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 10624 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 23:32:28,390 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 23:32:29,139 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 23:32:29,147 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 23:32:29,147 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 23:32:29,190 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 23:32:29,191 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 756 ms
2024-05-18 23:32:29,576 WARN [main] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext [AbstractApplicationContext.java:632] Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'fileToEmailRoute' defined in file [C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main\it\polito\communicationmanager\services\FileToEmailRoute.class]: Unsatisfied dependency expressed through constructor parameter 1: No qualifying bean of type 'com.google.api.services.gmail.Gmail' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
2024-05-18 23:32:29,577 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Stopping service [Tomcat]
2024-05-18 23:32:29,585 INFO [main] o.s.b.a.l.ConditionEvaluationReportLogger [ConditionEvaluationReportLogger.java:82] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-05-18 23:32:29,598 ERROR [main] o.s.b.d.LoggingFailureAnalysisReporter [LoggingFailureAnalysisReporter.java:40] 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 1 of constructor in it.polito.communicationmanager.services.FileToEmailRoute required a bean of type 'com.google.api.services.gmail.Gmail' that could not be found.


Action:

Consider defining a bean of type 'com.google.api.services.gmail.Gmail' in your configuration.

2024-05-18 23:35:56,246 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 19480 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 23:35:56,248 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 23:35:56,994 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 23:35:57,001 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 23:35:57,001 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 23:35:57,043 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 23:35:57,043 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 762 ms
2024-05-18 23:35:57,928 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 23:35:58,015 INFO [main] o.a.c.c.f.FileEndpoint [FileEndpoint.java:132] Endpoint is configured with noop=true so forcing endpoint to be idempotent as well
2024-05-18 23:35:58,016 INFO [main] o.a.c.c.f.FileEndpoint [FileEndpoint.java:138] Using default memory based idempotent repository with cache max size: 1000
2024-05-18 23:35:58,017 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 23:35:58,026 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 23:35:58,026 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (file://input)
2024-05-18 23:35:58,027 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 8ms (build:0ms init:0ms start:8ms)
2024-05-18 23:35:58,029 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 1.999 seconds (process running for 2.486)
2024-05-18 23:36:02,944 ERROR [Camel (camel-1) thread #1 - file://input] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: B3358D0378ABA08-0000000000000000 on ExchangeId: B3358D0378ABA08-0000000000000000). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 401 Unauthorized
POST https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/send

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[file://input?noop=true]                                310
	...
                                         route1/process1                Processor@0x253b1cbd                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 401 Unauthorized
POST https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/send
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.FileToEmailRoute.configure$lambda$0(CommunicationServiceImpl.kt:149)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:491)
	at org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:244)
	at org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:205)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 23:36:02,946 WARN [Camel (camel-1) thread #1 - file://input] o.a.c.c.f.GenericFileOnCompletion [GenericFileOnCompletion.java:151] Rollback file strategy: org.apache.camel.component.file.strategy.GenericFileRenameProcessStrategy@1c8e3f0f for file: GenericFile[lab4.json]
2024-05-18 23:36:03,547 ERROR [Camel (camel-1) thread #1 - file://input] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: B3358D0378ABA08-0000000000000001 on ExchangeId: B3358D0378ABA08-0000000000000001). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 401 Unauthorized
POST https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/send

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[file://input?noop=true]                                 91
	...
                                         route1/process1                Processor@0x253b1cbd                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 401 Unauthorized
POST https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/send
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.FileToEmailRoute.configure$lambda$0(CommunicationServiceImpl.kt:149)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:491)
	at org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:244)
	at org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:205)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 23:36:03,547 WARN [Camel (camel-1) thread #1 - file://input] o.a.c.c.f.GenericFileOnCompletion [GenericFileOnCompletion.java:151] Rollback file strategy: org.apache.camel.component.file.strategy.GenericFileRenameProcessStrategy@1c8e3f0f for file: GenericFile[lab4.json]
2024-05-18 23:36:04,134 ERROR [Camel (camel-1) thread #1 - file://input] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: B3358D0378ABA08-0000000000000002 on ExchangeId: B3358D0378ABA08-0000000000000002). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 401 Unauthorized
POST https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/send

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[file://input?noop=true]                                 82
	...
                                         route1/process1                Processor@0x253b1cbd                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 401 Unauthorized
POST https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/send
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.FileToEmailRoute.configure$lambda$0(CommunicationServiceImpl.kt:149)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:491)
	at org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:244)
	at org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:205)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 23:36:04,134 WARN [Camel (camel-1) thread #1 - file://input] o.a.c.c.f.GenericFileOnCompletion [GenericFileOnCompletion.java:151] Rollback file strategy: org.apache.camel.component.file.strategy.GenericFileRenameProcessStrategy@1c8e3f0f for file: GenericFile[lab4.json]
2024-05-18 23:36:04,738 ERROR [Camel (camel-1) thread #1 - file://input] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: B3358D0378ABA08-0000000000000003 on ExchangeId: B3358D0378ABA08-0000000000000003). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 401 Unauthorized
POST https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/send

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[file://input?noop=true]                                 89
	...
                                         route1/process1                Processor@0x253b1cbd                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 401 Unauthorized
POST https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/send
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.FileToEmailRoute.configure$lambda$0(CommunicationServiceImpl.kt:149)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:491)
	at org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:244)
	at org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:205)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 23:36:04,739 WARN [Camel (camel-1) thread #1 - file://input] o.a.c.c.f.GenericFileOnCompletion [GenericFileOnCompletion.java:151] Rollback file strategy: org.apache.camel.component.file.strategy.GenericFileRenameProcessStrategy@1c8e3f0f for file: GenericFile[lab4.json]
2024-05-18 23:36:04,789 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 23:36:04,793 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 23:36:04,793 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (file://input)
2024-05-18 23:36:04,795 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 5ms (uptime:6s)
2024-05-18 23:37:44,729 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 23932 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 23:37:44,731 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 23:37:45,493 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 23:37:45,501 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 23:37:45,501 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 23:37:45,542 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 23:37:45,543 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 774 ms
2024-05-18 23:37:46,473 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 23:37:46,561 INFO [main] o.a.c.c.f.FileEndpoint [FileEndpoint.java:132] Endpoint is configured with noop=true so forcing endpoint to be idempotent as well
2024-05-18 23:37:46,561 INFO [main] o.a.c.c.f.FileEndpoint [FileEndpoint.java:138] Using default memory based idempotent repository with cache max size: 1000
2024-05-18 23:37:46,564 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 23:37:46,575 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 23:37:46,575 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (file://input)
2024-05-18 23:37:46,575 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 10ms (build:0ms init:0ms start:10ms)
2024-05-18 23:37:46,577 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 2.064 seconds (process running for 2.503)
2024-05-18 23:37:50,927 ERROR [Camel (camel-1) thread #1 - file://input] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: E8B12C97D201404-0000000000000000 on ExchangeId: E8B12C97D201404-0000000000000000). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 401 Unauthorized
POST https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/send

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[file://input?noop=true]                                291
	...
                                         route1/process1                Processor@0x28c7fd9d                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 401 Unauthorized
POST https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/send
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.FileToEmailRoute.configure$lambda$0(CommunicationServiceImpl.kt:149)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:491)
	at org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:244)
	at org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:205)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 23:37:50,929 WARN [Camel (camel-1) thread #1 - file://input] o.a.c.c.f.GenericFileOnCompletion [GenericFileOnCompletion.java:151] Rollback file strategy: org.apache.camel.component.file.strategy.GenericFileRenameProcessStrategy@77fe2b07 for file: GenericFile[lab4.json]
2024-05-18 23:37:51,524 ERROR [Camel (camel-1) thread #1 - file://input] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: E8B12C97D201404-0000000000000001 on ExchangeId: E8B12C97D201404-0000000000000001). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 401 Unauthorized
POST https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/send

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[file://input?noop=true]                                 89
	...
                                         route1/process1                Processor@0x28c7fd9d                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 401 Unauthorized
POST https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/send
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.FileToEmailRoute.configure$lambda$0(CommunicationServiceImpl.kt:149)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:491)
	at org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:244)
	at org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:205)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 23:37:51,524 WARN [Camel (camel-1) thread #1 - file://input] o.a.c.c.f.GenericFileOnCompletion [GenericFileOnCompletion.java:151] Rollback file strategy: org.apache.camel.component.file.strategy.GenericFileRenameProcessStrategy@77fe2b07 for file: GenericFile[lab4.json]
2024-05-18 23:37:52,113 ERROR [Camel (camel-1) thread #1 - file://input] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: E8B12C97D201404-0000000000000002 on ExchangeId: E8B12C97D201404-0000000000000002). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 401 Unauthorized
POST https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/send

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[file://input?noop=true]                                 85
	...
                                         route1/process1                Processor@0x28c7fd9d                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 401 Unauthorized
POST https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/send
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.FileToEmailRoute.configure$lambda$0(CommunicationServiceImpl.kt:149)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:491)
	at org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:244)
	at org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:205)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 23:37:52,114 WARN [Camel (camel-1) thread #1 - file://input] o.a.c.c.f.GenericFileOnCompletion [GenericFileOnCompletion.java:151] Rollback file strategy: org.apache.camel.component.file.strategy.GenericFileRenameProcessStrategy@77fe2b07 for file: GenericFile[lab4.json]
2024-05-18 23:37:52,712 ERROR [Camel (camel-1) thread #1 - file://input] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: E8B12C97D201404-0000000000000003 on ExchangeId: E8B12C97D201404-0000000000000003). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 401 Unauthorized
POST https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/send

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[file://input?noop=true]                                 84
	...
                                         route1/process1                Processor@0x28c7fd9d                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 401 Unauthorized
POST https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/send
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.FileToEmailRoute.configure$lambda$0(CommunicationServiceImpl.kt:149)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:491)
	at org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:244)
	at org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:205)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 23:37:52,713 WARN [Camel (camel-1) thread #1 - file://input] o.a.c.c.f.GenericFileOnCompletion [GenericFileOnCompletion.java:151] Rollback file strategy: org.apache.camel.component.file.strategy.GenericFileRenameProcessStrategy@77fe2b07 for file: GenericFile[lab4.json]
2024-05-18 23:37:52,923 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 23:37:52,928 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 23:37:52,929 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (file://input)
2024-05-18 23:37:52,932 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 8ms (uptime:6s)
2024-05-18 23:41:01,087 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 26792 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 23:41:01,089 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 23:41:01,875 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 23:41:01,884 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 23:41:01,885 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 23:41:01,931 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 23:41:01,931 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 807 ms
2024-05-18 23:41:02,858 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 23:41:02,941 INFO [main] o.a.c.c.f.FileEndpoint [FileEndpoint.java:132] Endpoint is configured with noop=true so forcing endpoint to be idempotent as well
2024-05-18 23:41:02,942 INFO [main] o.a.c.c.f.FileEndpoint [FileEndpoint.java:138] Using default memory based idempotent repository with cache max size: 1000
2024-05-18 23:41:02,944 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 23:41:02,954 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 23:41:02,954 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (file://input)
2024-05-18 23:41:02,954 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 9ms (build:0ms init:0ms start:9ms)
2024-05-18 23:41:02,956 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 2.105 seconds (process running for 2.603)
2024-05-18 23:41:04,305 ERROR [Camel (camel-1) thread #1 - file://input] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: D7CD72CF89A08B3-0000000000000000 on ExchangeId: D7CD72CF89A08B3-0000000000000000). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 401 Unauthorized
POST https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/send

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[file://input?noop=true]                                334
	...
                                         route1/process1                Processor@0x788a0513                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 401 Unauthorized
POST https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/send
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.FileToEmailRoute.configure$lambda$0(CommunicationServiceImpl.kt:149)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:491)
	at org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:244)
	at org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:205)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 23:41:04,307 WARN [Camel (camel-1) thread #1 - file://input] o.a.c.c.f.GenericFileOnCompletion [GenericFileOnCompletion.java:151] Rollback file strategy: org.apache.camel.component.file.strategy.GenericFileRenameProcessStrategy@2d791b64 for file: GenericFile[lab4.json]
2024-05-18 23:41:04,916 ERROR [Camel (camel-1) thread #1 - file://input] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: D7CD72CF89A08B3-0000000000000001 on ExchangeId: D7CD72CF89A08B3-0000000000000001). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 401 Unauthorized
POST https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/send

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[file://input?noop=true]                                104
	...
                                         route1/process1                Processor@0x788a0513                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 401 Unauthorized
POST https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/send
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.FileToEmailRoute.configure$lambda$0(CommunicationServiceImpl.kt:149)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:491)
	at org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:244)
	at org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:205)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 23:41:04,916 WARN [Camel (camel-1) thread #1 - file://input] o.a.c.c.f.GenericFileOnCompletion [GenericFileOnCompletion.java:151] Rollback file strategy: org.apache.camel.component.file.strategy.GenericFileRenameProcessStrategy@2d791b64 for file: GenericFile[lab4.json]
2024-05-18 23:41:05,540 ERROR [Camel (camel-1) thread #1 - file://input] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: D7CD72CF89A08B3-0000000000000002 on ExchangeId: D7CD72CF89A08B3-0000000000000002). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 401 Unauthorized
POST https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/send

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[file://input?noop=true]                                106
	...
                                         route1/process1                Processor@0x788a0513                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 401 Unauthorized
POST https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/send
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.FileToEmailRoute.configure$lambda$0(CommunicationServiceImpl.kt:149)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:491)
	at org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:244)
	at org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:205)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 23:41:05,541 WARN [Camel (camel-1) thread #1 - file://input] o.a.c.c.f.GenericFileOnCompletion [GenericFileOnCompletion.java:151] Rollback file strategy: org.apache.camel.component.file.strategy.GenericFileRenameProcessStrategy@2d791b64 for file: GenericFile[lab4.json]
2024-05-18 23:41:06,149 ERROR [Camel (camel-1) thread #1 - file://input] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: D7CD72CF89A08B3-0000000000000003 on ExchangeId: D7CD72CF89A08B3-0000000000000003). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 401 Unauthorized
POST https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/send

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[file://input?noop=true]                                 93
	...
                                         route1/process1                Processor@0x788a0513                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 401 Unauthorized
POST https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/send
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.FileToEmailRoute.configure$lambda$0(CommunicationServiceImpl.kt:149)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:491)
	at org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:244)
	at org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:205)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 23:41:06,150 WARN [Camel (camel-1) thread #1 - file://input] o.a.c.c.f.GenericFileOnCompletion [GenericFileOnCompletion.java:151] Rollback file strategy: org.apache.camel.component.file.strategy.GenericFileRenameProcessStrategy@2d791b64 for file: GenericFile[lab4.json]
2024-05-18 23:41:06,761 ERROR [Camel (camel-1) thread #1 - file://input] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: D7CD72CF89A08B3-0000000000000004 on ExchangeId: D7CD72CF89A08B3-0000000000000004). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 401 Unauthorized
POST https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/send

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[file://input?noop=true]                                 97
	...
                                         route1/process1                Processor@0x788a0513                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 401 Unauthorized
POST https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/send
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.FileToEmailRoute.configure$lambda$0(CommunicationServiceImpl.kt:149)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:491)
	at org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:244)
	at org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:205)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 23:41:06,763 WARN [Camel (camel-1) thread #1 - file://input] o.a.c.c.f.GenericFileOnCompletion [GenericFileOnCompletion.java:151] Rollback file strategy: org.apache.camel.component.file.strategy.GenericFileRenameProcessStrategy@2d791b64 for file: GenericFile[lab4.json]
2024-05-18 23:41:07,367 ERROR [Camel (camel-1) thread #1 - file://input] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: D7CD72CF89A08B3-0000000000000005 on ExchangeId: D7CD72CF89A08B3-0000000000000005). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 401 Unauthorized
POST https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/send

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[file://input?noop=true]                                 92
	...
                                         route1/process1                Processor@0x788a0513                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 401 Unauthorized
POST https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/send
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.FileToEmailRoute.configure$lambda$0(CommunicationServiceImpl.kt:149)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:491)
	at org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:244)
	at org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:205)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 23:41:07,368 WARN [Camel (camel-1) thread #1 - file://input] o.a.c.c.f.GenericFileOnCompletion [GenericFileOnCompletion.java:151] Rollback file strategy: org.apache.camel.component.file.strategy.GenericFileRenameProcessStrategy@2d791b64 for file: GenericFile[lab4.json]
2024-05-18 23:41:07,967 ERROR [Camel (camel-1) thread #1 - file://input] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: D7CD72CF89A08B3-0000000000000006 on ExchangeId: D7CD72CF89A08B3-0000000000000006). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 401 Unauthorized
POST https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/send

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[file://input?noop=true]                                 96
	...
                                         route1/process1                Processor@0x788a0513                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 401 Unauthorized
POST https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/send
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.FileToEmailRoute.configure$lambda$0(CommunicationServiceImpl.kt:149)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:491)
	at org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:244)
	at org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:205)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 23:41:07,969 WARN [Camel (camel-1) thread #1 - file://input] o.a.c.c.f.GenericFileOnCompletion [GenericFileOnCompletion.java:151] Rollback file strategy: org.apache.camel.component.file.strategy.GenericFileRenameProcessStrategy@2d791b64 for file: GenericFile[lab4.json]
2024-05-18 23:41:08,565 ERROR [Camel (camel-1) thread #1 - file://input] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: D7CD72CF89A08B3-0000000000000007 on ExchangeId: D7CD72CF89A08B3-0000000000000007). Exhausted after delivery attempt: 1 caught: com.google.api.client.googleapis.json.GoogleJsonResponseException: 401 Unauthorized
POST https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/send

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[file://input?noop=true]                                 87
	...
                                         route1/process1                Processor@0x788a0513                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
com.google.api.client.googleapis.json.GoogleJsonResponseException: 401 Unauthorized
POST https://gmail.googleapis.com/gmail/v1/users/aw2g52024@gmail.com/messages/send
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at it.polito.communicationmanager.services.FileToEmailRoute.configure$lambda$0(CommunicationServiceImpl.kt:149)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:491)
	at org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:244)
	at org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:205)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-18 23:41:08,566 WARN [Camel (camel-1) thread #1 - file://input] o.a.c.c.f.GenericFileOnCompletion [GenericFileOnCompletion.java:151] Rollback file strategy: org.apache.camel.component.file.strategy.GenericFileRenameProcessStrategy@2d791b64 for file: GenericFile[lab4.json]
2024-05-18 23:41:08,864 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 23:41:08,869 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 23:41:08,869 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (file://input)
2024-05-18 23:41:08,872 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 7ms (uptime:5s)
2024-05-18 23:47:18,873 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 10832 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 23:47:18,876 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 23:47:19,634 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 23:47:19,641 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 23:47:19,642 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 23:47:19,688 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 23:47:19,689 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 780 ms
2024-05-18 23:47:20,574 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 23:47:20,655 INFO [main] o.a.c.c.f.FileEndpoint [FileEndpoint.java:132] Endpoint is configured with noop=true so forcing endpoint to be idempotent as well
2024-05-18 23:47:20,656 INFO [main] o.a.c.c.f.FileEndpoint [FileEndpoint.java:138] Using default memory based idempotent repository with cache max size: 1000
2024-05-18 23:47:20,658 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 23:47:20,667 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 23:47:20,668 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (file://input)
2024-05-18 23:47:20,668 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 8ms (build:0ms init:0ms start:8ms)
2024-05-18 23:47:20,670 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 2.008 seconds (process running for 2.463)
2024-05-18 23:48:24,633 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 23:48:24,636 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 23:48:24,636 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (file://input)
2024-05-18 23:48:24,637 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 4ms (uptime:1m3s)
2024-05-18 23:48:26,696 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 9140 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 23:48:26,698 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 23:48:27,471 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 23:48:27,479 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 23:48:27,479 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 23:48:27,521 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 23:48:27,521 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 784 ms
2024-05-18 23:48:28,428 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 23:48:28,507 INFO [main] o.a.c.c.f.FileEndpoint [FileEndpoint.java:132] Endpoint is configured with noop=true so forcing endpoint to be idempotent as well
2024-05-18 23:48:28,507 INFO [main] o.a.c.c.f.FileEndpoint [FileEndpoint.java:138] Using default memory based idempotent repository with cache max size: 1000
2024-05-18 23:48:28,510 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 23:48:28,520 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 23:48:28,520 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (file://input)
2024-05-18 23:48:28,520 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 9ms (build:0ms init:0ms start:9ms)
2024-05-18 23:48:28,522 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 2.043 seconds (process running for 2.53)
2024-05-18 23:50:52,391 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 23:50:52,396 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 23:50:52,396 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (file://input)
2024-05-18 23:50:52,398 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 7ms (uptime:2m23s)
2024-05-18 23:52:52,568 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 26304 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 23:52:52,570 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 23:52:53,336 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 23:52:53,343 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 23:52:53,343 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 23:52:53,396 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 23:52:53,397 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 786 ms
2024-05-18 23:52:54,365 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 23:52:54,454 INFO [main] o.a.c.c.f.FileEndpoint [FileEndpoint.java:132] Endpoint is configured with noop=true so forcing endpoint to be idempotent as well
2024-05-18 23:52:54,454 INFO [main] o.a.c.c.f.FileEndpoint [FileEndpoint.java:138] Using default memory based idempotent repository with cache max size: 1000
2024-05-18 23:52:54,457 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 23:52:54,467 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 23:52:54,467 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (file://emailsToSend)
2024-05-18 23:52:54,467 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 9ms (build:0ms init:0ms start:9ms)
2024-05-18 23:52:54,469 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 2.123 seconds (process running for 2.596)
2024-05-18 23:56:11,614 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 23:56:11,620 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 23:56:11,620 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (file://emailsToSend)
2024-05-18 23:56:11,623 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 9ms (uptime:3m17s)
2024-05-18 23:56:14,542 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 12452 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-18 23:56:14,545 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-18 23:56:15,290 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-18 23:56:15,296 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-18 23:56:15,296 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-18 23:56:15,342 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-18 23:56:15,342 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 765 ms
2024-05-18 23:56:16,247 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-18 23:56:16,330 INFO [main] o.a.c.c.f.FileEndpoint [FileEndpoint.java:132] Endpoint is configured with noop=true so forcing endpoint to be idempotent as well
2024-05-18 23:56:16,331 INFO [main] o.a.c.c.f.FileEndpoint [FileEndpoint.java:138] Using default memory based idempotent repository with cache max size: 1000
2024-05-18 23:56:16,333 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-18 23:56:16,343 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-18 23:56:16,344 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (file://emailsToSend)
2024-05-18 23:56:16,344 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 9ms (build:0ms init:0ms start:9ms)
2024-05-18 23:56:16,345 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 2.025 seconds (process running for 2.484)
2024-05-18 23:56:29,847 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-18 23:56:29,856 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-18 23:56:29,857 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (file://emailsToSend)
2024-05-18 23:56:29,859 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 11ms (uptime:13s)
2024-05-19 00:01:39,768 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 23836 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-19 00:01:39,771 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-19 00:01:40,526 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-19 00:01:40,533 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-19 00:01:40,533 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-19 00:01:40,570 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-19 00:01:40,571 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 762 ms
2024-05-19 00:01:41,453 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-19 00:01:41,537 INFO [main] o.a.c.c.f.FileEndpoint [FileEndpoint.java:132] Endpoint is configured with noop=true so forcing endpoint to be idempotent as well
2024-05-19 00:01:41,538 INFO [main] o.a.c.c.f.FileEndpoint [FileEndpoint.java:138] Using default memory based idempotent repository with cache max size: 1000
2024-05-19 00:01:41,540 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-19 00:01:41,549 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-19 00:01:41,550 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (file://emailsToSend)
2024-05-19 00:01:41,550 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 9ms (build:0ms init:0ms start:9ms)
2024-05-19 00:01:41,552 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 2.0 seconds (process running for 2.478)
2024-05-19 00:01:52,960 INFO [http-nio-8081-exec-1] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-05-19 00:01:52,960 INFO [http-nio-8081-exec-1] o.s.w.s.DispatcherServlet [FrameworkServlet.java:532] Initializing Servlet 'dispatcherServlet'
2024-05-19 00:01:52,961 INFO [http-nio-8081-exec-1] o.s.w.s.DispatcherServlet [FrameworkServlet.java:554] Completed initialization in 1 ms
2024-05-19 00:01:53,119 ERROR [http-nio-8081-exec-1] o.a.c.c.C.[.[.[.[dispatcherServlet] [DirectJDKLog.java:175] Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception
java.io.FileNotFoundException: \emailsToSend\emailf03ad6f0-3d12-4ae5-9a31-7e181028448f.json (Impossibile trovare il percorso specificato)
	at java.base/java.io.FileOutputStream.open0(Native Method)
	at java.base/java.io.FileOutputStream.open(FileOutputStream.java:289)
	at java.base/java.io.FileOutputStream.<init>(FileOutputStream.java:230)
	at java.base/java.io.FileOutputStream.<init>(FileOutputStream.java:179)
	at kotlin.io.FilesKt__FileReadWriteKt.writeBytes(FileReadWrite.kt:108)
	at kotlin.io.FilesKt__FileReadWriteKt.writeText(FileReadWrite.kt:134)
	at kotlin.io.FilesKt__FileReadWriteKt.writeText$default(FileReadWrite.kt:134)
	at it.polito.communicationmanager.services.CommunicationServiceImpl.sendEmail(CommunicationServiceImpl.kt:46)
	at it.polito.communicationmanager.controllers.CommunicationController.addContactEmail(CommunicationController.kt:22)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at kotlin.reflect.jvm.internal.calls.CallerImpl$Method.callMethod(CallerImpl.kt:97)
	at kotlin.reflect.jvm.internal.calls.CallerImpl$Method$Instance.call(CallerImpl.kt:113)
	at kotlin.reflect.jvm.internal.KCallableImpl.callDefaultMethod$kotlin_reflection(KCallableImpl.kt:207)
	at kotlin.reflect.jvm.internal.KCallableImpl.callBy(KCallableImpl.kt:112)
	at org.springframework.web.method.support.InvocableHandlerMethod$KotlinDelegate.invokeFunction(InvocableHandlerMethod.java:334)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:252)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:150)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:175)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:150)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:175)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:150)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:175)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:150)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:175)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:150)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1736)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-19 00:03:05,253 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-19 00:03:05,257 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-19 00:03:05,258 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (file://emailsToSend)
2024-05-19 00:03:05,260 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 6ms (uptime:1m23s)
2024-05-19 00:03:08,090 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 3532 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-19 00:03:08,092 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-19 00:03:08,857 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-19 00:03:08,865 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-19 00:03:08,866 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-19 00:03:08,912 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-19 00:03:08,913 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 787 ms
2024-05-19 00:03:09,835 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-19 00:03:09,917 INFO [main] o.a.c.c.f.FileEndpoint [FileEndpoint.java:132] Endpoint is configured with noop=true so forcing endpoint to be idempotent as well
2024-05-19 00:03:09,917 INFO [main] o.a.c.c.f.FileEndpoint [FileEndpoint.java:138] Using default memory based idempotent repository with cache max size: 1000
2024-05-19 00:03:09,920 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-19 00:03:09,929 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-19 00:03:09,930 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (file://emailsToSend)
2024-05-19 00:03:09,930 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 9ms (build:0ms init:0ms start:9ms)
2024-05-19 00:03:09,932 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 2.084 seconds (process running for 2.549)
2024-05-19 00:03:11,677 INFO [http-nio-8081-exec-1] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-05-19 00:03:11,677 INFO [http-nio-8081-exec-1] o.s.w.s.DispatcherServlet [FrameworkServlet.java:532] Initializing Servlet 'dispatcherServlet'
2024-05-19 00:03:11,679 INFO [http-nio-8081-exec-1] o.s.w.s.DispatcherServlet [FrameworkServlet.java:554] Completed initialization in 2 ms
2024-05-19 00:06:44,762 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-19 00:06:44,767 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-19 00:06:44,767 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (file://emailsToSend)
2024-05-19 00:06:44,768 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 5ms (uptime:3m34s)
2024-05-19 00:06:47,566 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 26140 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-19 00:06:47,568 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-19 00:06:48,370 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-19 00:06:48,378 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-19 00:06:48,379 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-19 00:06:48,422 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-19 00:06:48,422 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 824 ms
2024-05-19 00:06:49,377 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-19 00:06:49,464 INFO [main] o.a.c.c.f.FileEndpoint [FileEndpoint.java:132] Endpoint is configured with noop=true so forcing endpoint to be idempotent as well
2024-05-19 00:06:49,465 INFO [main] o.a.c.c.f.FileEndpoint [FileEndpoint.java:138] Using default memory based idempotent repository with cache max size: 1000
2024-05-19 00:06:49,468 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-19 00:06:49,482 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-19 00:06:49,482 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (file://emailsToSend)
2024-05-19 00:06:49,482 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 13ms (build:0ms init:0ms start:13ms)
2024-05-19 00:06:49,486 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 2.13 seconds (process running for 2.687)
2024-05-19 00:07:24,681 INFO [http-nio-8081-exec-2] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-05-19 00:07:24,681 INFO [http-nio-8081-exec-2] o.s.w.s.DispatcherServlet [FrameworkServlet.java:532] Initializing Servlet 'dispatcherServlet'
2024-05-19 00:07:24,684 INFO [http-nio-8081-exec-2] o.s.w.s.DispatcherServlet [FrameworkServlet.java:554] Completed initialization in 3 ms
2024-05-19 00:07:24,808 INFO [http-nio-8081-exec-2] i.p.c.c.CommunicationController [CommunicationServiceImpl.kt:47] Email stored into email5f71da23-54d8-4ea3-af72-1b776b51a0b8.json
2024-05-19 00:15:43,830 INFO [http-nio-8081-exec-3] i.p.c.c.CommunicationController [CommunicationServiceImpl.kt:47] Email stored into emailaf60c399-8169-4d11-a161-a0894117f0a5.json
2024-05-19 00:35:11,113 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-19 00:35:11,124 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-19 00:35:11,124 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (file://emailsToSend)
2024-05-19 00:35:11,127 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 14ms (uptime:28m21s)
2024-05-19 00:35:31,259 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 24100 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-19 00:35:31,261 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-19 00:35:32,038 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-19 00:35:32,046 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-19 00:35:32,046 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-19 00:35:32,089 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-19 00:35:32,090 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 790 ms
2024-05-19 00:35:32,928 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-19 00:35:33,056 INFO [main] o.a.c.c.f.FileEndpoint [FileEndpoint.java:132] Endpoint is configured with noop=true so forcing endpoint to be idempotent as well
2024-05-19 00:35:33,056 INFO [main] o.a.c.c.f.FileEndpoint [FileEndpoint.java:138] Using default memory based idempotent repository with cache max size: 1000
2024-05-19 00:35:33,058 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-19 00:35:33,069 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-19 00:35:33,069 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (file://emailsToSend)
2024-05-19 00:35:33,069 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 11ms (build:0ms init:0ms start:11ms)
2024-05-19 00:35:33,071 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 2.05 seconds (process running for 2.978)
2024-05-19 00:35:55,850 INFO [http-nio-8081-exec-1] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-05-19 00:35:55,850 INFO [http-nio-8081-exec-1] o.s.w.s.DispatcherServlet [FrameworkServlet.java:532] Initializing Servlet 'dispatcherServlet'
2024-05-19 00:35:55,851 INFO [http-nio-8081-exec-1] o.s.w.s.DispatcherServlet [FrameworkServlet.java:554] Completed initialization in 0 ms
2024-05-19 00:36:26,127 INFO [http-nio-8081-exec-4] i.p.c.c.CommunicationController [CommunicationServiceImpl.kt:50] Email stored into emaile180b5a8-8692-4428-ab41-f391dec3f51c.json
2024-05-19 00:39:48,839 INFO [http-nio-8081-exec-6] i.p.c.c.CommunicationController [CommunicationServiceImpl.kt:50] Email stored into email3b16200c-886d-40e7-a4d6-074180832b6e.json
2024-05-19 00:41:12,815 INFO [http-nio-8081-exec-1] i.p.c.c.CommunicationController [CommunicationServiceImpl.kt:50] Email stored into email1ce0affc-db52-4fca-9355-7a83cb6fd339.json
2024-05-19 00:41:46,831 INFO [http-nio-8081-exec-4] i.p.c.c.CommunicationController [CommunicationServiceImpl.kt:50] Email stored into email0a12a483-ab3d-41d9-a0a3-012ca6788a73.json
2024-05-19 00:42:24,059 INFO [http-nio-8081-exec-3] i.p.c.c.CommunicationController [CommunicationServiceImpl.kt:50] Email stored into email3473bd91-9bb8-411e-97c9-349e37803bbc.json
2024-05-19 00:42:45,307 INFO [http-nio-8081-exec-6] i.p.c.c.CommunicationController [CommunicationServiceImpl.kt:50] Email stored into emailff7373b5-7fea-4298-9332-26f20ae00244.json
2024-05-19 00:45:49,602 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-19 00:45:49,607 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-19 00:45:49,607 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (file://emailsToSend)
2024-05-19 00:45:49,610 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 7ms (uptime:10m16s)
2024-05-19 11:40:43,495 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 19020 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-19 11:40:43,498 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-19 11:40:44,755 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-19 11:40:44,768 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-19 11:40:44,768 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-19 11:40:44,825 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-19 11:40:44,825 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 1270 ms
2024-05-19 11:40:45,926 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-19 11:40:46,112 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-19 11:40:46,127 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-19 11:40:46,127 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (file://emailsToSend)
2024-05-19 11:40:46,127 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 13ms (build:0ms init:0ms start:13ms)
2024-05-19 11:40:46,130 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 2.893 seconds (process running for 3.417)
2024-05-19 11:41:02,822 INFO [http-nio-8081-exec-1] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-05-19 11:41:02,822 INFO [http-nio-8081-exec-1] o.s.w.s.DispatcherServlet [FrameworkServlet.java:532] Initializing Servlet 'dispatcherServlet'
2024-05-19 11:41:02,823 INFO [http-nio-8081-exec-1] o.s.w.s.DispatcherServlet [FrameworkServlet.java:554] Completed initialization in 1 ms
2024-05-19 11:41:47,047 INFO [http-nio-8081-exec-5] i.p.c.c.CommunicationController [CommunicationServiceImpl.kt:55] Email stored into email474b6c5e-34c4-48fd-b2c9-7ef9aba83b87.json
2024-05-19 11:42:29,586 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-19 11:42:29,590 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-19 11:42:29,590 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (file://emailsToSend)
2024-05-19 11:42:29,592 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 5ms (uptime:1m43s)
2024-05-19 11:42:33,437 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 19276 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-19 11:42:33,439 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-19 11:42:34,223 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-19 11:42:34,231 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-19 11:42:34,232 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-19 11:42:34,275 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-19 11:42:34,276 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 805 ms
2024-05-19 11:42:35,101 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-19 11:42:35,213 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-19 11:42:35,223 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-19 11:42:35,224 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (file://emailsToSend)
2024-05-19 11:42:35,224 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 10ms (build:0ms init:0ms start:10ms)
2024-05-19 11:42:35,226 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 1.995 seconds (process running for 2.438)
2024-05-19 11:42:48,572 INFO [http-nio-8081-exec-1] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-05-19 11:42:48,573 INFO [http-nio-8081-exec-1] o.s.w.s.DispatcherServlet [FrameworkServlet.java:532] Initializing Servlet 'dispatcherServlet'
2024-05-19 11:42:48,574 INFO [http-nio-8081-exec-1] o.s.w.s.DispatcherServlet [FrameworkServlet.java:554] Completed initialization in 1 ms
2024-05-19 11:42:48,720 INFO [http-nio-8081-exec-1] i.p.c.c.CommunicationController [CommunicationServiceImpl.kt:55] Email stored into email27057a20-dbff-4747-9130-2e193df6d00d.json
2024-05-19 11:43:14,760 INFO [http-nio-8081-exec-2] i.p.c.c.CommunicationController [CommunicationServiceImpl.kt:55] Email stored into email09a3d51e-73ac-4781-a27b-4c664adb0eaa.json
2024-05-19 11:43:31,908 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-19 11:43:31,912 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-19 11:43:31,912 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (file://emailsToSend)
2024-05-19 11:43:31,914 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 5ms (uptime:56s)
2024-05-19 11:43:35,349 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 27580 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-19 11:43:35,351 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-19 11:43:36,097 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-19 11:43:36,105 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-19 11:43:36,106 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-19 11:43:36,148 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-19 11:43:36,148 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 762 ms
2024-05-19 11:43:36,951 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-19 11:43:37,068 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-19 11:43:37,078 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-19 11:43:37,078 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (file://emailsToSend)
2024-05-19 11:43:37,079 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 9ms (build:0ms init:0ms start:9ms)
2024-05-19 11:43:37,080 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 1.948 seconds (process running for 2.402)
2024-05-19 11:43:52,976 INFO [http-nio-8081-exec-4] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-05-19 11:43:52,976 INFO [http-nio-8081-exec-4] o.s.w.s.DispatcherServlet [FrameworkServlet.java:532] Initializing Servlet 'dispatcherServlet'
2024-05-19 11:43:52,977 INFO [http-nio-8081-exec-4] o.s.w.s.DispatcherServlet [FrameworkServlet.java:554] Completed initialization in 1 ms
2024-05-19 11:43:53,146 INFO [http-nio-8081-exec-4] i.p.c.c.CommunicationController [CommunicationServiceImpl.kt:55] Email stored into email0e898fc7-44e3-41a6-bbbb-03adf4ba9920.json
2024-05-19 11:46:51,107 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-19 11:46:51,117 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-19 11:46:51,117 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (file://emailsToSend)
2024-05-19 11:46:51,120 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 13ms (uptime:3m14s)
2024-05-19 11:46:53,489 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 6744 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-19 11:46:53,491 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-19 11:46:54,292 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-19 11:46:54,309 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-19 11:46:54,310 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-19 11:46:54,356 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-19 11:46:54,357 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 834 ms
2024-05-19 11:46:55,161 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-19 11:46:55,286 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-19 11:46:55,297 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-19 11:46:55,297 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (file://emailsToSend)
2024-05-19 11:46:55,298 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 10ms (build:0ms init:0ms start:10ms)
2024-05-19 11:46:55,299 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 2.091 seconds (process running for 2.541)
2024-05-19 11:47:05,411 INFO [http-nio-8081-exec-10] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-05-19 11:47:05,411 INFO [http-nio-8081-exec-10] o.s.w.s.DispatcherServlet [FrameworkServlet.java:532] Initializing Servlet 'dispatcherServlet'
2024-05-19 11:47:05,412 INFO [http-nio-8081-exec-10] o.s.w.s.DispatcherServlet [FrameworkServlet.java:554] Completed initialization in 0 ms
2024-05-19 11:47:05,592 INFO [http-nio-8081-exec-10] i.p.c.c.CommunicationController [CommunicationServiceImpl.kt:55] Email stored into email308d7ff8-a5e2-42d4-bd12-8400431e3a0b.json
2024-05-19 11:47:32,189 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-19 11:47:32,197 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-19 11:47:32,198 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (file://emailsToSend)
2024-05-19 11:47:32,200 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 10ms (uptime:36s)
2024-05-19 11:47:34,529 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 14260 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-19 11:47:34,531 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-19 11:47:35,243 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-19 11:47:35,250 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-19 11:47:35,250 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-19 11:47:35,291 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-19 11:47:35,291 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 725 ms
2024-05-19 11:47:36,097 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-19 11:47:36,220 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-19 11:47:36,230 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-19 11:47:36,230 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (file://emailsToSend)
2024-05-19 11:47:36,230 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 9ms (build:0ms init:0ms start:9ms)
2024-05-19 11:47:36,232 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 1.925 seconds (process running for 2.436)
2024-05-19 11:48:43,733 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-19 11:48:43,737 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-19 11:48:43,737 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (file://emailsToSend)
2024-05-19 11:48:43,739 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 5ms (uptime:1m7s)
2024-05-19 11:48:45,918 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 23852 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-19 11:48:45,920 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-19 11:48:46,661 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-19 11:48:46,669 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-19 11:48:46,669 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-19 11:48:46,712 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-19 11:48:46,713 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 753 ms
2024-05-19 11:48:47,525 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-19 11:48:47,644 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-19 11:48:47,654 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-19 11:48:47,655 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (file://emailsToSend)
2024-05-19 11:48:47,655 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 9ms (build:0ms init:0ms start:9ms)
2024-05-19 11:48:47,657 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 1.954 seconds (process running for 2.402)
2024-05-19 11:48:58,940 INFO [http-nio-8081-exec-1] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-05-19 11:48:58,940 INFO [http-nio-8081-exec-1] o.s.w.s.DispatcherServlet [FrameworkServlet.java:532] Initializing Servlet 'dispatcherServlet'
2024-05-19 11:48:58,941 INFO [http-nio-8081-exec-1] o.s.w.s.DispatcherServlet [FrameworkServlet.java:554] Completed initialization in 1 ms
2024-05-19 11:48:59,096 INFO [http-nio-8081-exec-1] i.p.c.c.CommunicationController [CommunicationServiceImpl.kt:55] Email stored into email61f0b9a2-f788-47ab-b680-face5e9b4a41.json
2024-05-19 11:49:39,622 INFO [http-nio-8081-exec-6] i.p.c.c.CommunicationController [CommunicationServiceImpl.kt:55] Email stored into emaild83176f7-711a-4710-94d4-90b76460b427.json
2024-05-19 11:50:23,079 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-19 11:50:23,082 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-19 11:50:23,082 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (file://emailsToSend)
2024-05-19 11:50:23,084 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 5ms (uptime:1m35s)
2024-05-20 16:20:29,714 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 21232 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-20 16:20:29,719 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-20 16:20:30,599 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-20 16:20:30,609 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-20 16:20:30,609 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-20 16:20:30,660 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-20 16:20:30,660 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 900 ms
2024-05-20 16:20:31,704 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-20 16:20:31,823 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-20 16:20:31,835 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:2)
2024-05-20 16:20:31,835 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail://messages/list)
2024-05-20 16:20:31,836 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route2 (file://emailsToSend)
2024-05-20 16:20:31,836 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 11ms (build:0ms init:0ms start:11ms)
2024-05-20 16:20:31,837 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 2.351 seconds (process running for 3.232)
2024-05-20 16:20:33,755 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: BA94F3D5BCC2E6A-0000000000000000 on ExchangeId: BA94F3D5BCC2E6A-0000000000000000). Exhausted after delivery attempt: 1 caught: java.lang.NullPointerException: Cannot invoke "com.google.api.services.gmail.model.MessagePart.getHeaders()" because the return value of "com.google.api.services.gmail.model.Message.getPayload()" is null

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          278
	...
                                         route1/process1                Processor@0x379b4e86                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
java.lang.NullPointerException: Cannot invoke "com.google.api.services.gmail.model.MessagePart.getHeaders()" because the return value of "com.google.api.services.gmail.model.Message.getPayload()" is null
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:82)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-20 16:20:33,764 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[BA94F3D5BCC2E6A-0000000000000000]. Caused by: [java.lang.NullPointerException - Cannot invoke "com.google.api.services.gmail.model.MessagePart.getHeaders()" because the return value of "com.google.api.services.gmail.model.Message.getPayload()" is null]
java.lang.NullPointerException: Cannot invoke "com.google.api.services.gmail.model.MessagePart.getHeaders()" because the return value of "com.google.api.services.gmail.model.Message.getPayload()" is null
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:82)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-20 16:20:34,555 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: BA94F3D5BCC2E6A-0000000000000001 on ExchangeId: BA94F3D5BCC2E6A-0000000000000001). Exhausted after delivery attempt: 1 caught: java.lang.NullPointerException: Cannot invoke "com.google.api.services.gmail.model.MessagePart.getHeaders()" because the return value of "com.google.api.services.gmail.model.Message.getPayload()" is null

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          185
	...
                                         route1/process1                Processor@0x379b4e86                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
java.lang.NullPointerException: Cannot invoke "com.google.api.services.gmail.model.MessagePart.getHeaders()" because the return value of "com.google.api.services.gmail.model.Message.getPayload()" is null
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:82)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-20 16:20:34,557 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[BA94F3D5BCC2E6A-0000000000000001]. Caused by: [java.lang.NullPointerException - Cannot invoke "com.google.api.services.gmail.model.MessagePart.getHeaders()" because the return value of "com.google.api.services.gmail.model.Message.getPayload()" is null]
java.lang.NullPointerException: Cannot invoke "com.google.api.services.gmail.model.MessagePart.getHeaders()" because the return value of "com.google.api.services.gmail.model.Message.getPayload()" is null
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:82)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-20 16:20:35,339 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: BA94F3D5BCC2E6A-0000000000000002 on ExchangeId: BA94F3D5BCC2E6A-0000000000000002). Exhausted after delivery attempt: 1 caught: java.lang.NullPointerException: Cannot invoke "com.google.api.services.gmail.model.MessagePart.getHeaders()" because the return value of "com.google.api.services.gmail.model.Message.getPayload()" is null

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          200
	...
                                         route1/process1                Processor@0x379b4e86                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
java.lang.NullPointerException: Cannot invoke "com.google.api.services.gmail.model.MessagePart.getHeaders()" because the return value of "com.google.api.services.gmail.model.Message.getPayload()" is null
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:82)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-20 16:20:35,339 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[BA94F3D5BCC2E6A-0000000000000002]. Caused by: [java.lang.NullPointerException - Cannot invoke "com.google.api.services.gmail.model.MessagePart.getHeaders()" because the return value of "com.google.api.services.gmail.model.Message.getPayload()" is null]
java.lang.NullPointerException: Cannot invoke "com.google.api.services.gmail.model.MessagePart.getHeaders()" because the return value of "com.google.api.services.gmail.model.Message.getPayload()" is null
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:82)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-20 16:20:36,139 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-20 16:20:36,143 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:2)
2024-05-20 16:20:36,143 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route2 (file://emailsToSend)
2024-05-20 16:20:36,143 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail://messages/list)
2024-05-20 16:20:36,145 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 5ms (uptime:4s)
2024-05-20 16:20:50,922 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 23164 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-20 16:20:50,924 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-20 16:20:51,680 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-20 16:20:51,687 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-20 16:20:51,688 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-20 16:20:51,730 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-20 16:20:51,730 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 774 ms
2024-05-20 16:20:52,619 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-20 16:20:52,713 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-20 16:20:52,723 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:2)
2024-05-20 16:20:52,723 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail://messages/list)
2024-05-20 16:20:52,723 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route2 (file://emailsToSend)
2024-05-20 16:20:52,723 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 9ms (build:0ms init:0ms start:9ms)
2024-05-20 16:20:52,726 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 2.01 seconds (process running for 2.463)
2024-05-20 16:20:55,056 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: CCED16953E5DDB7-0000000000000000 on ExchangeId: CCED16953E5DDB7-0000000000000000). Exhausted after delivery attempt: 1 caught: java.lang.NullPointerException: Cannot invoke "com.google.api.services.gmail.model.MessagePart.getHeaders()" because the return value of "com.google.api.services.gmail.model.Message.getPayload()" is null

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          887
	...
                                         route1/process1                Processor@0x56fa0ef                                           0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
java.lang.NullPointerException: Cannot invoke "com.google.api.services.gmail.model.MessagePart.getHeaders()" because the return value of "com.google.api.services.gmail.model.Message.getPayload()" is null
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:82)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-20 16:20:55,061 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[CCED16953E5DDB7-0000000000000000]. Caused by: [java.lang.NullPointerException - Cannot invoke "com.google.api.services.gmail.model.MessagePart.getHeaders()" because the return value of "com.google.api.services.gmail.model.Message.getPayload()" is null]
java.lang.NullPointerException: Cannot invoke "com.google.api.services.gmail.model.MessagePart.getHeaders()" because the return value of "com.google.api.services.gmail.model.Message.getPayload()" is null
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:82)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-20 16:20:55,805 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: CCED16953E5DDB7-0000000000000001 on ExchangeId: CCED16953E5DDB7-0000000000000001). Exhausted after delivery attempt: 1 caught: java.lang.NullPointerException: Cannot invoke "com.google.api.services.gmail.model.MessagePart.getHeaders()" because the return value of "com.google.api.services.gmail.model.Message.getPayload()" is null

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          139
	...
                                         route1/process1                Processor@0x56fa0ef                                           0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
java.lang.NullPointerException: Cannot invoke "com.google.api.services.gmail.model.MessagePart.getHeaders()" because the return value of "com.google.api.services.gmail.model.Message.getPayload()" is null
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:82)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-20 16:20:55,806 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[CCED16953E5DDB7-0000000000000001]. Caused by: [java.lang.NullPointerException - Cannot invoke "com.google.api.services.gmail.model.MessagePart.getHeaders()" because the return value of "com.google.api.services.gmail.model.Message.getPayload()" is null]
java.lang.NullPointerException: Cannot invoke "com.google.api.services.gmail.model.MessagePart.getHeaders()" because the return value of "com.google.api.services.gmail.model.Message.getPayload()" is null
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:82)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-20 16:20:56,536 ERROR [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: CCED16953E5DDB7-0000000000000002 on ExchangeId: CCED16953E5DDB7-0000000000000002). Exhausted after delivery attempt: 1 caught: java.lang.NullPointerException: Cannot invoke "com.google.api.services.gmail.model.MessagePart.getHeaders()" because the return value of "com.google.api.services.gmail.model.Message.getPayload()" is null

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail://messages/list?scopes=https%3A%2          137
	...
                                         route1/process1                Processor@0x56fa0ef                                           0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
java.lang.NullPointerException: Cannot invoke "com.google.api.services.gmail.model.MessagePart.getHeaders()" because the return value of "com.google.api.services.gmail.model.Message.getPayload()" is null
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:82)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-20 16:20:56,537 WARN [Camel (camel-1) thread #1 - google-mail://messages/list] o.a.c.c.g.m.GoogleMailConsumer [CamelLogger.java:214] Error processing exchange. Exchange[CCED16953E5DDB7-0000000000000002]. Caused by: [java.lang.NullPointerException - Cannot invoke "com.google.api.services.gmail.model.MessagePart.getHeaders()" because the return value of "com.google.api.services.gmail.model.Message.getPayload()" is null]
java.lang.NullPointerException: Cannot invoke "com.google.api.services.gmail.model.MessagePart.getHeaders()" because the return value of "com.google.api.services.gmail.model.Message.getPayload()" is null
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$3(CommunicationServiceImpl.kt:82)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:32)
	at org.apache.camel.support.component.ApiConsumerHelper.processResult(ApiConsumerHelper.java:147)
	at org.apache.camel.support.component.ApiConsumerHelper.getResultsProcessed(ApiConsumerHelper.java:134)
	at org.apache.camel.support.component.AbstractApiConsumer.poll(AbstractApiConsumer.java:72)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-20 16:20:56,792 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-20 16:20:56,797 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:2)
2024-05-20 16:20:56,797 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route2 (file://emailsToSend)
2024-05-20 16:20:56,797 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail://messages/list)
2024-05-20 16:20:56,802 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 9ms (uptime:4s)
2024-05-20 16:21:48,896 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 12744 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-20 16:21:48,898 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-20 16:21:49,657 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-20 16:21:49,664 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-20 16:21:49,665 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-20 16:21:49,710 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-20 16:21:49,710 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 775 ms
2024-05-20 16:21:50,598 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-20 16:21:50,689 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-20 16:21:50,699 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:2)
2024-05-20 16:21:50,699 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail://messages/list)
2024-05-20 16:21:50,700 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route2 (file://emailsToSend)
2024-05-20 16:21:50,700 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 9ms (build:0ms init:0ms start:9ms)
2024-05-20 16:21:50,701 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 2.028 seconds (process running for 2.519)
2024-05-20 16:21:55,150 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-20 16:21:55,154 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:2)
2024-05-20 16:21:55,154 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route2 (file://emailsToSend)
2024-05-20 16:21:55,154 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail://messages/list)
2024-05-20 16:21:55,158 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 7ms (uptime:4s)
2024-05-20 16:47:36,121 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 10268 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-20 16:47:36,123 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-20 16:47:36,886 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-20 16:47:36,903 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-20 16:47:36,904 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-20 16:47:36,962 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-20 16:47:36,963 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 809 ms
2024-05-20 16:47:37,880 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-20 16:47:37,981 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-20 16:47:37,992 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:2)
2024-05-20 16:47:37,992 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail://messages/list)
2024-05-20 16:47:37,992 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route2 (file://emailsToSend)
2024-05-20 16:47:37,992 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 9ms (build:0ms init:0ms start:9ms)
2024-05-20 16:47:37,994 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 2.08 seconds (process running for 2.556)
2024-05-20 16:47:47,809 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-20 16:47:47,820 INFO [Camel (camel-1) thread #3 - ShutdownTask] o.a.c.i.e.DefaultShutdownStrategy [DefaultShutdownStrategy.java:689] Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 45 seconds. Inflights per route: [route1 = 1]
2024-05-20 16:47:48,835 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:2)
2024-05-20 16:47:48,835 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route2 (file://emailsToSend)
2024-05-20 16:47:48,835 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail://messages/list)
2024-05-20 16:47:48,841 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 1s32ms (uptime:10s)
2024-05-20 16:56:57,133 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 27580 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-20 16:56:57,135 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-20 16:56:57,882 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-20 16:56:57,896 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-20 16:56:57,896 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-20 16:56:57,941 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-20 16:56:57,941 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 771 ms
2024-05-20 16:56:58,809 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-20 16:56:58,897 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-20 16:56:58,907 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:2)
2024-05-20 16:56:58,907 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail://messages/list)
2024-05-20 16:56:58,907 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route2 (file://emailsToSend)
2024-05-20 16:56:58,907 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 9ms (build:0ms init:0ms start:9ms)
2024-05-20 16:56:58,909 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 1.991 seconds (process running for 2.473)
2024-05-20 16:57:03,208 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-20 16:57:03,212 INFO [Camel (camel-1) thread #3 - ShutdownTask] o.a.c.i.e.DefaultShutdownStrategy [DefaultShutdownStrategy.java:689] Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 45 seconds. Inflights per route: [route1 = 1]
2024-05-20 16:57:04,226 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:2)
2024-05-20 16:57:04,227 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route2 (file://emailsToSend)
2024-05-20 16:57:04,227 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail://messages/list)
2024-05-20 16:57:04,230 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 1s22ms (uptime:5s)
2024-05-20 17:05:08,219 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 22776 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-20 17:05:08,221 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-20 17:05:08,978 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-20 17:05:08,985 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-20 17:05:08,985 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-20 17:05:09,028 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-20 17:05:09,028 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 768 ms
2024-05-20 17:05:09,921 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-20 17:05:09,993 WARN [main] o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext [AbstractApplicationContext.java:632] Exception encountered during context initialization - cancelling refresh attempt: org.apache.camel.FailedToCreateRouteException: Failed to create route route1: Route(route1)[From[google-mail-stream://messages/list?userId... because of Failed to resolve endpoint: google-mail-stream://messages/list?scopes=https%3A%2F%2Fmail.google.com&userId=xxxxxx due to: Failed to resolve endpoint: google-mail-stream://messages/list?scopes=https%3A%2F%2Fmail.google.com&userId=xxxxxx due to: There are 1 parameters that couldn't be set on the endpoint. Check the uri if the parameters are spelt correctly and that they are properties of the endpoint. Unknown parameters=[{userId=aw2g52024@gmail.com}]
2024-05-20 17:05:09,999 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Stopping service [Tomcat]
2024-05-20 17:05:10,003 INFO [main] o.s.b.a.l.ConditionEvaluationReportLogger [ConditionEvaluationReportLogger.java:82] 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-05-20 17:05:10,017 ERROR [main] o.s.b.SpringApplication [SpringApplication.java:851] Application run failed
org.apache.camel.FailedToCreateRouteException: Failed to create route route1: Route(route1)[From[google-mail-stream://messages/list?userId... because of Failed to resolve endpoint: google-mail-stream://messages/list?scopes=https%3A%2F%2Fmail.google.com&userId=xxxxxx due to: Failed to resolve endpoint: google-mail-stream://messages/list?scopes=https%3A%2F%2Fmail.google.com&userId=xxxxxx due to: There are 1 parameters that couldn't be set on the endpoint. Check the uri if the parameters are spelt correctly and that they are properties of the endpoint. Unknown parameters=[{userId=aw2g52024@gmail.com}]
	at org.apache.camel.reifier.RouteReifier.createRoute(RouteReifier.java:85)
	at org.apache.camel.impl.DefaultModelReifierFactory.createRoute(DefaultModelReifierFactory.java:49)
	at org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:728)
	at org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:594)
	at org.apache.camel.impl.engine.AbstractCamelContext.doInit(AbstractCamelContext.java:2391)
	at org.apache.camel.support.service.BaseService.init(BaseService.java:78)
	at org.apache.camel.impl.engine.AbstractCamelContext.init(AbstractCamelContext.java:2027)
	at org.apache.camel.support.service.BaseService.start(BaseService.java:105)
	at org.apache.camel.impl.engine.AbstractCamelContext.start(AbstractCamelContext.java:2046)
	at org.apache.camel.impl.DefaultCamelContext.start(DefaultCamelContext.java:212)
	at org.apache.camel.spring.SpringCamelContext.start(SpringCamelContext.java:119)
	at org.apache.camel.spring.SpringCamelContext.onApplicationEvent(SpringCamelContext.java:151)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:451)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:384)
	at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:984)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
	at it.polito.communicationmanager.CommunicationManagerApplicationKt.main(CommunicationManagerApplication.kt:13)
Caused by: org.apache.camel.ResolveEndpointFailedException: Failed to resolve endpoint: google-mail-stream://messages/list?scopes=https%3A%2F%2Fmail.google.com&userId=xxxxxx due to: Failed to resolve endpoint: google-mail-stream://messages/list?scopes=https%3A%2F%2Fmail.google.com&userId=xxxxxx due to: There are 1 parameters that couldn't be set on the endpoint. Check the uri if the parameters are spelt correctly and that they are properties of the endpoint. Unknown parameters=[{userId=aw2g52024@gmail.com}]
	at org.apache.camel.impl.engine.AbstractCamelContext.doGetEndpoint(AbstractCamelContext.java:831)
	at org.apache.camel.impl.engine.AbstractCamelContext.getEndpoint(AbstractCamelContext.java:731)
	at org.apache.camel.support.CamelContextHelper.getMandatoryEndpoint(CamelContextHelper.java:66)
	at org.apache.camel.reifier.AbstractReifier.resolveEndpoint(AbstractReifier.java:195)
	at org.apache.camel.reifier.RouteReifier.doCreateRoute(RouteReifier.java:99)
	at org.apache.camel.reifier.RouteReifier.createRoute(RouteReifier.java:79)
	... 25 common frames omitted
Caused by: org.apache.camel.ResolveEndpointFailedException: Failed to resolve endpoint: google-mail-stream://messages/list?scopes=https%3A%2F%2Fmail.google.com&userId=xxxxxx due to: There are 1 parameters that couldn't be set on the endpoint. Check the uri if the parameters are spelt correctly and that they are properties of the endpoint. Unknown parameters=[{userId=aw2g52024@gmail.com}]
	at org.apache.camel.support.DefaultComponent.validateParameters(DefaultComponent.java:302)
	at org.apache.camel.support.DefaultComponent.createEndpoint(DefaultComponent.java:191)
	at org.apache.camel.impl.engine.AbstractCamelContext.doGetEndpoint(AbstractCamelContext.java:797)
	... 30 common frames omitted
2024-05-20 17:06:39,577 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 13116 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-20 17:06:39,579 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-20 17:06:40,349 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-20 17:06:40,357 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-20 17:06:40,358 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-20 17:06:40,408 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-20 17:06:40,408 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 795 ms
2024-05-20 17:06:41,305 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-20 17:06:43,260 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-20 17:06:43,274 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-20 17:06:43,274 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail-stream://0)
2024-05-20 17:06:43,274 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 12ms (build:0ms init:0ms start:12ms)
2024-05-20 17:06:43,277 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 3.918 seconds (process running for 4.372)
2024-05-20 17:09:08,086 INFO [http-nio-8081-exec-1] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-05-20 17:09:08,086 INFO [http-nio-8081-exec-1] o.s.w.s.DispatcherServlet [FrameworkServlet.java:532] Initializing Servlet 'dispatcherServlet'
2024-05-20 17:09:08,087 INFO [http-nio-8081-exec-1] o.s.w.s.DispatcherServlet [FrameworkServlet.java:554] Completed initialization in 1 ms
2024-05-20 17:09:08,626 INFO [http-nio-8081-exec-1] i.p.c.c.CommunicationController [CommunicationServiceImpl.kt:48] Email sended.
2024-05-20 17:12:38,563 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-20 17:12:38,569 INFO [Camel (camel-1) thread #2 - ShutdownTask] o.a.c.i.e.DefaultShutdownStrategy [DefaultShutdownStrategy.java:689] Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 45 seconds. Inflights per route: [route1 = 1]
2024-05-20 17:12:39,577 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-20 17:12:39,578 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail-stream://0)
2024-05-20 17:12:39,582 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 1s18ms (uptime:5m56s)
2024-05-20 17:12:42,818 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 15876 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-20 17:12:42,819 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-20 17:12:43,555 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-20 17:12:43,564 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-20 17:12:43,564 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-20 17:12:43,607 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-20 17:12:43,607 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 755 ms
2024-05-20 17:12:44,481 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-20 17:12:47,424 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-20 17:12:47,435 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-20 17:12:47,435 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail-stream://0)
2024-05-20 17:12:47,436 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 10ms (build:0ms init:0ms start:10ms)
2024-05-20 17:12:47,438 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 4.849 seconds (process running for 5.303)
2024-05-20 17:21:56,579 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-20 17:21:56,585 INFO [Camel (camel-1) thread #2 - ShutdownTask] o.a.c.i.e.DefaultShutdownStrategy [DefaultShutdownStrategy.java:689] Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 45 seconds. Inflights per route: [route1 = 1]
2024-05-20 17:21:57,589 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-20 17:21:57,589 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail-stream://0)
2024-05-20 17:21:57,592 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 1s12ms (uptime:9m10s)
2024-05-20 17:22:00,575 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 11136 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-20 17:22:00,577 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-20 17:22:01,348 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-20 17:22:01,356 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-20 17:22:01,357 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-20 17:22:01,399 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-20 17:22:01,399 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 785 ms
2024-05-20 17:22:02,297 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-20 17:22:04,242 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-20 17:22:04,253 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-20 17:22:04,253 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail-stream://0)
2024-05-20 17:22:04,253 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 10ms (build:0ms init:0ms start:10ms)
2024-05-20 17:22:04,255 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 3.909 seconds (process running for 4.402)
2024-05-20 17:22:16,600 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-20 17:22:16,609 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-20 17:22:16,609 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail-stream://0)
2024-05-20 17:22:16,612 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 13ms (uptime:12s)
2024-05-20 17:22:19,538 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 10916 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-20 17:22:19,541 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-20 17:22:20,279 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-20 17:22:20,287 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-20 17:22:20,287 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-20 17:22:20,336 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-20 17:22:20,336 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 758 ms
2024-05-20 17:22:21,223 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-20 17:22:23,204 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-20 17:22:23,215 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-20 17:22:23,215 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail-stream://0)
2024-05-20 17:22:23,215 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 9ms (build:0ms init:0ms start:9ms)
2024-05-20 17:22:23,217 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 3.898 seconds (process running for 4.353)
2024-05-20 17:24:35,746 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-20 17:24:35,750 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-20 17:24:35,750 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail-stream://0)
2024-05-20 17:24:35,752 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 5ms (uptime:2m12s)
2024-05-20 17:24:38,808 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 3592 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-20 17:24:38,810 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-20 17:24:39,575 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-20 17:24:39,583 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-20 17:24:39,583 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-20 17:24:39,633 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-20 17:24:39,634 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 787 ms
2024-05-20 17:24:40,527 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-20 17:24:44,406 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-20 17:24:44,418 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-20 17:24:44,419 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail-stream://0)
2024-05-20 17:24:44,419 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 11ms (build:0ms init:0ms start:11ms)
2024-05-20 17:24:44,421 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 5.826 seconds (process running for 6.281)
2024-05-20 17:32:38,916 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [com.google.api.client.googleapis.json.GoogleJsonResponseException - 400 Bad Request
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Precondition check failed.",
    "reason" : "failedPrecondition"
  } ],
  "message" : "Precondition check failed.",
  "status" : "FAILED_PRECONDITION"
}]
com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request
GET https://gmail.googleapis.com/gmail/v1/users/me/messages?maxResults=10&q=is:unread
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Precondition check failed.",
    "reason" : "failedPrecondition"
  } ],
  "message" : "Precondition check failed.",
  "status" : "FAILED_PRECONDITION"
}
	at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)
	at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:466)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-20 17:34:34,856 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-20 17:34:34,861 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-20 17:34:34,861 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail-stream://0)
2024-05-20 17:34:34,863 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 6ms (uptime:9m50s)
2024-05-20 17:35:02,238 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 13008 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-20 17:35:02,241 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-20 17:35:02,997 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-20 17:35:03,005 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-20 17:35:03,006 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-20 17:35:03,051 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-20 17:35:03,052 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 779 ms
2024-05-20 17:35:04,019 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-20 17:35:05,610 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-20 17:35:05,620 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-20 17:35:05,621 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail-stream://0)
2024-05-20 17:35:05,621 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 9ms (build:0ms init:0ms start:9ms)
2024-05-20 17:35:05,622 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 3.616 seconds (process running for 4.603)
2024-05-20 17:45:53,744 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-20 17:45:53,749 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-20 17:45:53,750 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail-stream://0)
2024-05-20 17:45:53,754 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 8ms (uptime:10m48s)
2024-05-20 17:45:57,019 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 13284 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-20 17:45:57,022 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-20 17:45:57,800 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-20 17:45:57,808 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-20 17:45:57,808 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-20 17:45:57,858 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-20 17:45:57,858 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 805 ms
2024-05-20 17:45:58,778 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-20 17:46:00,432 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-20 17:46:00,447 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-20 17:46:00,448 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail-stream://0)
2024-05-20 17:46:00,448 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 12ms (build:0ms init:0ms start:12ms)
2024-05-20 17:46:00,450 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 3.645 seconds (process running for 4.096)
2024-05-20 17:54:50,085 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-20 17:54:50,089 INFO [Camel (camel-1) thread #2 - ShutdownTask] o.a.c.i.e.DefaultShutdownStrategy [DefaultShutdownStrategy.java:689] Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 45 seconds. Inflights per route: [route1 = 1]
2024-05-20 17:54:51,101 INFO [Camel (camel-1) thread #2 - ShutdownTask] o.a.c.i.e.DefaultShutdownStrategy [DefaultShutdownStrategy.java:689] Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 44 seconds. Inflights per route: [route1 = 1]
2024-05-20 17:54:52,115 INFO [Camel (camel-1) thread #2 - ShutdownTask] o.a.c.i.e.DefaultShutdownStrategy [DefaultShutdownStrategy.java:689] Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 43 seconds. Inflights per route: [route1 = 1]
2024-05-20 17:54:53,129 INFO [Camel (camel-1) thread #2 - ShutdownTask] o.a.c.i.e.DefaultShutdownStrategy [DefaultShutdownStrategy.java:689] Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 42 seconds. Inflights per route: [route1 = 1]
2024-05-20 17:54:54,138 INFO [Camel (camel-1) thread #2 - ShutdownTask] o.a.c.i.e.DefaultShutdownStrategy [DefaultShutdownStrategy.java:689] Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 41 seconds. Inflights per route: [route1 = 1]
2024-05-20 17:54:55,154 INFO [Camel (camel-1) thread #2 - ShutdownTask] o.a.c.i.e.DefaultShutdownStrategy [DefaultShutdownStrategy.java:689] Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 40 seconds. Inflights per route: [route1 = 1]
2024-05-20 17:54:56,170 INFO [Camel (camel-1) thread #2 - ShutdownTask] o.a.c.i.e.DefaultShutdownStrategy [DefaultShutdownStrategy.java:689] Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 39 seconds. Inflights per route: [route1 = 1]
2024-05-20 17:54:57,181 INFO [Camel (camel-1) thread #2 - ShutdownTask] o.a.c.i.e.DefaultShutdownStrategy [DefaultShutdownStrategy.java:689] Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 38 seconds. Inflights per route: [route1 = 1]
2024-05-20 17:54:58,183 INFO [Camel (camel-1) thread #2 - ShutdownTask] o.a.c.i.e.DefaultShutdownStrategy [DefaultShutdownStrategy.java:689] Waiting as there are still 1 inflight and pending exchanges to complete, timeout in 37 seconds. Inflights per route: [route1 = 1]
2024-05-20 17:54:58,515 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [CamelLogger.java:214] Failed polling endpoint: google-mail-stream://0?markAsRead=true&scopes=https://mail.google.com. Will try again at next poll. Caused by: [java.net.SocketTimeoutException - Read timed out]
java.net.SocketTimeoutException: Read timed out
	at java.base/sun.nio.ch.NioSocketImpl.timedRead(NioSocketImpl.java:278)
	at java.base/sun.nio.ch.NioSocketImpl.implRead(NioSocketImpl.java:304)
	at java.base/sun.nio.ch.NioSocketImpl.read(NioSocketImpl.java:346)
	at java.base/sun.nio.ch.NioSocketImpl$1.read(NioSocketImpl.java:796)
	at java.base/java.net.Socket$SocketInputStream.read(Socket.java:1099)
	at java.base/sun.security.ssl.SSLSocketInputRecord.read(SSLSocketInputRecord.java:489)
	at java.base/sun.security.ssl.SSLSocketInputRecord.readHeader(SSLSocketInputRecord.java:483)
	at java.base/sun.security.ssl.SSLSocketInputRecord.bytesInCompletePacket(SSLSocketInputRecord.java:70)
	at java.base/sun.security.ssl.SSLSocketImpl.readApplicationRecord(SSLSocketImpl.java:1461)
	at java.base/sun.security.ssl.SSLSocketImpl$AppInputStream.read(SSLSocketImpl.java:1066)
	at java.base/java.io.BufferedInputStream.fill(BufferedInputStream.java:291)
	at java.base/java.io.BufferedInputStream.read1(BufferedInputStream.java:347)
	at java.base/java.io.BufferedInputStream.implRead(BufferedInputStream.java:420)
	at java.base/java.io.BufferedInputStream.read(BufferedInputStream.java:399)
	at java.base/sun.net.www.http.HttpClient.parseHTTPHeader(HttpClient.java:827)
	at java.base/sun.net.www.http.HttpClient.parseHTTP(HttpClient.java:759)
	at java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream0(HttpURLConnection.java:1690)
	at java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1599)
	at java.base/java.net.HttpURLConnection.getResponseCode(HttpURLConnection.java:531)
	at java.base/sun.net.www.protocol.https.HttpsURLConnectionImpl.getResponseCode(HttpsURLConnectionImpl.java:307)
	at com.google.api.client.http.javanet.NetHttpResponse.<init>(NetHttpResponse.java:36)
	at com.google.api.client.http.javanet.NetHttpRequest.execute(NetHttpRequest.java:152)
	at com.google.api.client.http.javanet.NetHttpRequest.execute(NetHttpRequest.java:84)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1012)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:552)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:493)
	at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:603)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:88)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2024-05-20 17:54:59,189 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-20 17:54:59,192 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail-stream://0)
2024-05-20 17:54:59,196 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 9s111ms (uptime:8m58s)
2024-05-20 17:55:02,400 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 10820 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-20 17:55:02,402 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-20 17:55:03,162 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-20 17:55:03,169 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-20 17:55:03,170 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-20 17:55:03,209 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-20 17:55:03,210 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 774 ms
2024-05-20 17:55:04,115 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-20 17:55:06,362 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-20 17:55:06,373 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-20 17:55:06,373 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail-stream://0)
2024-05-20 17:55:06,374 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 10ms (build:0ms init:0ms start:10ms)
2024-05-20 17:55:06,375 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 4.198 seconds (process running for 4.669)
2024-05-20 18:01:23,459 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-20 18:01:23,463 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-20 18:01:23,464 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail-stream://0)
2024-05-20 18:01:23,467 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 7ms (uptime:6m17s)
2024-05-20 18:01:28,231 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 18816 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-20 18:01:28,233 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-20 18:01:29,043 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-20 18:01:29,061 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-20 18:01:29,061 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-20 18:01:29,105 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-20 18:01:29,105 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 832 ms
2024-05-20 18:01:30,032 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-20 18:01:32,023 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-20 18:01:32,038 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-20 18:01:32,039 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail-stream://0)
2024-05-20 18:01:32,039 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 14ms (build:0ms init:0ms start:14ms)
2024-05-20 18:01:32,043 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 4.029 seconds (process running for 4.505)
2024-05-20 18:01:44,568 ERROR [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: FF5A7440396926C-0000000000000000 on ExchangeId: FF5A7440396926C-0000000000000000). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail-stream://0?markAsRead=true&scopes          927
	...
                                         route1/process1                Processor@0x379b4e86                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:124)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.processBatch(GoogleMailStreamConsumer.java:135)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:101)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 500
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 23 common frames omitted
2024-05-20 18:01:44,572 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [GoogleMailStreamConsumer.java:171] Exchange failed, so rolling back mail Exchange[FF5A7440396926C-0000000000000000] to un UNREAD
2024-05-20 18:01:47,391 ERROR [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: FF5A7440396926C-0000000000000001 on ExchangeId: FF5A7440396926C-0000000000000001). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail-stream://0?markAsRead=true&scopes          178
	...
                                         route1/process1                Processor@0x379b4e86                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:124)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.processBatch(GoogleMailStreamConsumer.java:135)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:101)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 500
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 23 common frames omitted
2024-05-20 18:01:47,392 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [GoogleMailStreamConsumer.java:171] Exchange failed, so rolling back mail Exchange[FF5A7440396926C-0000000000000001] to un UNREAD
2024-05-20 18:01:49,037 ERROR [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: FF5A7440396926C-0000000000000002 on ExchangeId: FF5A7440396926C-0000000000000002). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail-stream://0?markAsRead=true&scopes          183
	...
                                         route1/process1                Processor@0x379b4e86                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:124)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.processBatch(GoogleMailStreamConsumer.java:135)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:101)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 500
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 23 common frames omitted
2024-05-20 18:01:49,038 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [GoogleMailStreamConsumer.java:171] Exchange failed, so rolling back mail Exchange[FF5A7440396926C-0000000000000002] to un UNREAD
2024-05-20 18:01:50,175 ERROR [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: FF5A7440396926C-0000000000000003 on ExchangeId: FF5A7440396926C-0000000000000003). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail-stream://0?markAsRead=true&scopes          190
	...
                                         route1/process1                Processor@0x379b4e86                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:124)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.processBatch(GoogleMailStreamConsumer.java:135)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:101)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 500
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 23 common frames omitted
2024-05-20 18:01:50,176 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [GoogleMailStreamConsumer.java:171] Exchange failed, so rolling back mail Exchange[FF5A7440396926C-0000000000000003] to un UNREAD
2024-05-20 18:01:51,353 ERROR [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: FF5A7440396926C-0000000000000004 on ExchangeId: FF5A7440396926C-0000000000000004). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail-stream://0?markAsRead=true&scopes          176
	...
                                         route1/process1                Processor@0x379b4e86                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:124)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.processBatch(GoogleMailStreamConsumer.java:135)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:101)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 500
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 23 common frames omitted
2024-05-20 18:01:51,353 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [GoogleMailStreamConsumer.java:171] Exchange failed, so rolling back mail Exchange[FF5A7440396926C-0000000000000004] to un UNREAD
2024-05-20 18:01:52,460 ERROR [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: FF5A7440396926C-0000000000000005 on ExchangeId: FF5A7440396926C-0000000000000005). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail-stream://0?markAsRead=true&scopes          168
	...
                                         route1/process1                Processor@0x379b4e86                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:124)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.processBatch(GoogleMailStreamConsumer.java:135)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:101)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 500
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 23 common frames omitted
2024-05-20 18:01:52,461 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [GoogleMailStreamConsumer.java:171] Exchange failed, so rolling back mail Exchange[FF5A7440396926C-0000000000000005] to un UNREAD
2024-05-20 18:01:53,847 ERROR [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: FF5A7440396926C-0000000000000006 on ExchangeId: FF5A7440396926C-0000000000000006). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail-stream://0?markAsRead=true&scopes          173
	...
                                         route1/process1                Processor@0x379b4e86                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:124)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.processBatch(GoogleMailStreamConsumer.java:135)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:101)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 500
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 23 common frames omitted
2024-05-20 18:01:53,848 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [GoogleMailStreamConsumer.java:171] Exchange failed, so rolling back mail Exchange[FF5A7440396926C-0000000000000006] to un UNREAD
2024-05-20 18:01:55,043 ERROR [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: FF5A7440396926C-0000000000000007 on ExchangeId: FF5A7440396926C-0000000000000007). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail-stream://0?markAsRead=true&scopes          184
	...
                                         route1/process1                Processor@0x379b4e86                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:124)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.processBatch(GoogleMailStreamConsumer.java:135)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:101)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 500
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 23 common frames omitted
2024-05-20 18:01:55,044 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [GoogleMailStreamConsumer.java:171] Exchange failed, so rolling back mail Exchange[FF5A7440396926C-0000000000000007] to un UNREAD
2024-05-20 18:01:56,425 ERROR [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: FF5A7440396926C-0000000000000008 on ExchangeId: FF5A7440396926C-0000000000000008). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail-stream://0?markAsRead=true&scopes          158
	...
                                         route1/process1                Processor@0x379b4e86                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:124)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.processBatch(GoogleMailStreamConsumer.java:135)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:101)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 500
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 23 common frames omitted
2024-05-20 18:01:56,425 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [GoogleMailStreamConsumer.java:171] Exchange failed, so rolling back mail Exchange[FF5A7440396926C-0000000000000008] to un UNREAD
2024-05-20 18:01:57,734 ERROR [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: FF5A7440396926C-0000000000000009 on ExchangeId: FF5A7440396926C-0000000000000009). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail-stream://0?markAsRead=true&scopes          361
	...
                                         route1/process1                Processor@0x379b4e86                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:124)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.processBatch(GoogleMailStreamConsumer.java:135)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:101)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 500
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 23 common frames omitted
2024-05-20 18:01:57,735 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [GoogleMailStreamConsumer.java:171] Exchange failed, so rolling back mail Exchange[FF5A7440396926C-0000000000000009] to un UNREAD
2024-05-20 18:01:58,848 ERROR [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: FF5A7440396926C-000000000000000A on ExchangeId: FF5A7440396926C-000000000000000A). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail-stream://0?markAsRead=true&scopes          160
	...
                                         route1/process1                Processor@0x379b4e86                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:124)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.processBatch(GoogleMailStreamConsumer.java:135)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:101)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 500
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 23 common frames omitted
2024-05-20 18:01:58,849 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [GoogleMailStreamConsumer.java:171] Exchange failed, so rolling back mail Exchange[FF5A7440396926C-000000000000000A] to un UNREAD
2024-05-20 18:01:59,953 ERROR [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: FF5A7440396926C-000000000000000B on ExchangeId: FF5A7440396926C-000000000000000B). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail-stream://0?markAsRead=true&scopes          158
	...
                                         route1/process1                Processor@0x379b4e86                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:124)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.processBatch(GoogleMailStreamConsumer.java:135)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:101)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 500
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 23 common frames omitted
2024-05-20 18:01:59,953 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [GoogleMailStreamConsumer.java:171] Exchange failed, so rolling back mail Exchange[FF5A7440396926C-000000000000000B] to un UNREAD
2024-05-20 18:02:01,114 ERROR [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: FF5A7440396926C-000000000000000C on ExchangeId: FF5A7440396926C-000000000000000C). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail-stream://0?markAsRead=true&scopes          182
	...
                                         route1/process1                Processor@0x379b4e86                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:124)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.processBatch(GoogleMailStreamConsumer.java:135)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:101)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 500
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 23 common frames omitted
2024-05-20 18:02:01,116 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [GoogleMailStreamConsumer.java:171] Exchange failed, so rolling back mail Exchange[FF5A7440396926C-000000000000000C] to un UNREAD
2024-05-20 18:02:02,825 ERROR [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: FF5A7440396926C-000000000000000D on ExchangeId: FF5A7440396926C-000000000000000D). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail-stream://0?markAsRead=true&scopes          146
	...
                                         route1/process1                Processor@0x379b4e86                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:124)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.processBatch(GoogleMailStreamConsumer.java:135)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:101)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 500
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 23 common frames omitted
2024-05-20 18:02:02,825 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [GoogleMailStreamConsumer.java:171] Exchange failed, so rolling back mail Exchange[FF5A7440396926C-000000000000000D] to un UNREAD
2024-05-20 18:02:03,976 ERROR [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: FF5A7440396926C-000000000000000E on ExchangeId: FF5A7440396926C-000000000000000E). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail-stream://0?markAsRead=true&scopes          168
	...
                                         route1/process1                Processor@0x379b4e86                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:124)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.processBatch(GoogleMailStreamConsumer.java:135)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:101)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 500
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 23 common frames omitted
2024-05-20 18:02:03,977 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [GoogleMailStreamConsumer.java:171] Exchange failed, so rolling back mail Exchange[FF5A7440396926C-000000000000000E] to un UNREAD
2024-05-20 18:02:05,519 ERROR [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: FF5A7440396926C-000000000000000F on ExchangeId: FF5A7440396926C-000000000000000F). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail-stream://0?markAsRead=true&scopes          402
	...
                                         route1/process1                Processor@0x379b4e86                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:124)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.processBatch(GoogleMailStreamConsumer.java:135)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:101)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 500
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 23 common frames omitted
2024-05-20 18:02:05,520 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [GoogleMailStreamConsumer.java:171] Exchange failed, so rolling back mail Exchange[FF5A7440396926C-000000000000000F] to un UNREAD
2024-05-20 18:02:06,671 ERROR [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: FF5A7440396926C-0000000000000010 on ExchangeId: FF5A7440396926C-0000000000000010). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail-stream://0?markAsRead=true&scopes          173
	...
                                         route1/process1                Processor@0x379b4e86                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:124)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.processBatch(GoogleMailStreamConsumer.java:135)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:101)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 500
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 23 common frames omitted
2024-05-20 18:02:06,671 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [GoogleMailStreamConsumer.java:171] Exchange failed, so rolling back mail Exchange[FF5A7440396926C-0000000000000010] to un UNREAD
2024-05-20 18:02:07,908 ERROR [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: FF5A7440396926C-0000000000000011 on ExchangeId: FF5A7440396926C-0000000000000011). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail-stream://0?markAsRead=true&scopes          184
	...
                                         route1/process1                Processor@0x379b4e86                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:124)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.processBatch(GoogleMailStreamConsumer.java:135)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:101)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 500
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 23 common frames omitted
2024-05-20 18:02:07,909 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [GoogleMailStreamConsumer.java:171] Exchange failed, so rolling back mail Exchange[FF5A7440396926C-0000000000000011] to un UNREAD
2024-05-20 18:02:09,239 ERROR [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: FF5A7440396926C-0000000000000012 on ExchangeId: FF5A7440396926C-0000000000000012). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail-stream://0?markAsRead=true&scopes          221
	...
                                         route1/process1                Processor@0x379b4e86                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:124)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.processBatch(GoogleMailStreamConsumer.java:135)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:101)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 500
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 23 common frames omitted
2024-05-20 18:02:09,240 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [GoogleMailStreamConsumer.java:171] Exchange failed, so rolling back mail Exchange[FF5A7440396926C-0000000000000012] to un UNREAD
2024-05-20 18:02:10,837 ERROR [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: FF5A7440396926C-0000000000000013 on ExchangeId: FF5A7440396926C-0000000000000013). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail-stream://0?markAsRead=true&scopes          538
	...
                                         route1/process1                Processor@0x379b4e86                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:124)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.processBatch(GoogleMailStreamConsumer.java:135)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:101)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 500
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 23 common frames omitted
2024-05-20 18:02:10,837 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [GoogleMailStreamConsumer.java:171] Exchange failed, so rolling back mail Exchange[FF5A7440396926C-0000000000000013] to un UNREAD
2024-05-20 18:02:11,967 ERROR [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: FF5A7440396926C-0000000000000014 on ExchangeId: FF5A7440396926C-0000000000000014). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail-stream://0?markAsRead=true&scopes          182
	...
                                         route1/process1                Processor@0x379b4e86                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:124)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.processBatch(GoogleMailStreamConsumer.java:135)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:101)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 500
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 23 common frames omitted
2024-05-20 18:02:11,967 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [GoogleMailStreamConsumer.java:171] Exchange failed, so rolling back mail Exchange[FF5A7440396926C-0000000000000014] to un UNREAD
2024-05-20 18:02:13,391 ERROR [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: FF5A7440396926C-0000000000000015 on ExchangeId: FF5A7440396926C-0000000000000015). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail-stream://0?markAsRead=true&scopes          481
	...
                                         route1/process1                Processor@0x379b4e86                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:124)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.processBatch(GoogleMailStreamConsumer.java:135)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:101)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 500
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 23 common frames omitted
2024-05-20 18:02:13,393 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [GoogleMailStreamConsumer.java:171] Exchange failed, so rolling back mail Exchange[FF5A7440396926C-0000000000000015] to un UNREAD
2024-05-20 18:02:14,602 ERROR [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: FF5A7440396926C-0000000000000016 on ExchangeId: FF5A7440396926C-0000000000000016). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail-stream://0?markAsRead=true&scopes          164
	...
                                         route1/process1                Processor@0x379b4e86                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:124)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.processBatch(GoogleMailStreamConsumer.java:135)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:101)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 500
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 23 common frames omitted
2024-05-20 18:02:14,602 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [GoogleMailStreamConsumer.java:171] Exchange failed, so rolling back mail Exchange[FF5A7440396926C-0000000000000016] to un UNREAD
2024-05-20 18:02:15,677 ERROR [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: FF5A7440396926C-0000000000000017 on ExchangeId: FF5A7440396926C-0000000000000017). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail-stream://0?markAsRead=true&scopes          156
	...
                                         route1/process1                Processor@0x379b4e86                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:124)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.processBatch(GoogleMailStreamConsumer.java:135)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:101)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 500
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 23 common frames omitted
2024-05-20 18:02:15,677 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [GoogleMailStreamConsumer.java:171] Exchange failed, so rolling back mail Exchange[FF5A7440396926C-0000000000000017] to un UNREAD
2024-05-20 18:02:16,991 ERROR [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: FF5A7440396926C-0000000000000018 on ExchangeId: FF5A7440396926C-0000000000000018). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail-stream://0?markAsRead=true&scopes          350
	...
                                         route1/process1                Processor@0x379b4e86                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:124)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.processBatch(GoogleMailStreamConsumer.java:135)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:101)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 500
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 23 common frames omitted
2024-05-20 18:02:16,991 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [GoogleMailStreamConsumer.java:171] Exchange failed, so rolling back mail Exchange[FF5A7440396926C-0000000000000018] to un UNREAD
2024-05-20 18:02:18,200 ERROR [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: FF5A7440396926C-0000000000000019 on ExchangeId: FF5A7440396926C-0000000000000019). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail-stream://0?markAsRead=true&scopes          198
	...
                                         route1/process1                Processor@0x379b4e86                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:124)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.processBatch(GoogleMailStreamConsumer.java:135)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:101)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 500
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 23 common frames omitted
2024-05-20 18:02:18,201 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [GoogleMailStreamConsumer.java:171] Exchange failed, so rolling back mail Exchange[FF5A7440396926C-0000000000000019] to un UNREAD
2024-05-20 18:02:19,486 ERROR [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: FF5A7440396926C-000000000000001A on ExchangeId: FF5A7440396926C-000000000000001A). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail-stream://0?markAsRead=true&scopes          171
	...
                                         route1/process1                Processor@0x379b4e86                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:124)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.processBatch(GoogleMailStreamConsumer.java:135)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:101)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 500
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 23 common frames omitted
2024-05-20 18:02:19,486 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [GoogleMailStreamConsumer.java:171] Exchange failed, so rolling back mail Exchange[FF5A7440396926C-000000000000001A] to un UNREAD
2024-05-20 18:02:20,955 ERROR [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: FF5A7440396926C-000000000000001B on ExchangeId: FF5A7440396926C-000000000000001B). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail-stream://0?markAsRead=true&scopes          338
	...
                                         route1/process1                Processor@0x379b4e86                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:124)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.processBatch(GoogleMailStreamConsumer.java:135)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:101)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 500
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 23 common frames omitted
2024-05-20 18:02:20,955 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [GoogleMailStreamConsumer.java:171] Exchange failed, so rolling back mail Exchange[FF5A7440396926C-000000000000001B] to un UNREAD
2024-05-20 18:02:22,235 ERROR [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: FF5A7440396926C-000000000000001C on ExchangeId: FF5A7440396926C-000000000000001C). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail-stream://0?markAsRead=true&scopes          197
	...
                                         route1/process1                Processor@0x379b4e86                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:124)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.processBatch(GoogleMailStreamConsumer.java:135)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:101)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 500
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 23 common frames omitted
2024-05-20 18:02:22,235 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [GoogleMailStreamConsumer.java:171] Exchange failed, so rolling back mail Exchange[FF5A7440396926C-000000000000001C] to un UNREAD
2024-05-20 18:02:23,445 ERROR [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: FF5A7440396926C-000000000000001D on ExchangeId: FF5A7440396926C-000000000000001D). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail-stream://0?markAsRead=true&scopes          155
	...
                                         route1/process1                Processor@0x379b4e86                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:124)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.processBatch(GoogleMailStreamConsumer.java:135)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:101)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 500
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 23 common frames omitted
2024-05-20 18:02:23,446 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [GoogleMailStreamConsumer.java:171] Exchange failed, so rolling back mail Exchange[FF5A7440396926C-000000000000001D] to un UNREAD
2024-05-20 18:02:24,543 ERROR [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: FF5A7440396926C-000000000000001E on ExchangeId: FF5A7440396926C-000000000000001E). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail-stream://0?markAsRead=true&scopes          160
	...
                                         route1/process1                Processor@0x379b4e86                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:124)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.processBatch(GoogleMailStreamConsumer.java:135)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:101)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 500
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 23 common frames omitted
2024-05-20 18:02:24,543 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [GoogleMailStreamConsumer.java:171] Exchange failed, so rolling back mail Exchange[FF5A7440396926C-000000000000001E] to un UNREAD
2024-05-20 18:02:25,770 ERROR [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: FF5A7440396926C-000000000000001F on ExchangeId: FF5A7440396926C-000000000000001F). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail-stream://0?markAsRead=true&scopes          147
	...
                                         route1/process1                Processor@0x379b4e86                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:124)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.processBatch(GoogleMailStreamConsumer.java:135)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:101)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 500
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 23 common frames omitted
2024-05-20 18:02:25,771 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [GoogleMailStreamConsumer.java:171] Exchange failed, so rolling back mail Exchange[FF5A7440396926C-000000000000001F] to un UNREAD
2024-05-20 18:02:27,041 ERROR [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: FF5A7440396926C-0000000000000020 on ExchangeId: FF5A7440396926C-0000000000000020). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail-stream://0?markAsRead=true&scopes          152
	...
                                         route1/process1                Processor@0x379b4e86                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:124)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.processBatch(GoogleMailStreamConsumer.java:135)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:101)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 500
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 23 common frames omitted
2024-05-20 18:02:27,041 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [GoogleMailStreamConsumer.java:171] Exchange failed, so rolling back mail Exchange[FF5A7440396926C-0000000000000020] to un UNREAD
2024-05-20 18:02:28,164 ERROR [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: FF5A7440396926C-0000000000000021 on ExchangeId: FF5A7440396926C-0000000000000021). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail-stream://0?markAsRead=true&scopes          163
	...
                                         route1/process1                Processor@0x379b4e86                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:124)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.processBatch(GoogleMailStreamConsumer.java:135)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:101)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 500
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 23 common frames omitted
2024-05-20 18:02:28,164 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [GoogleMailStreamConsumer.java:171] Exchange failed, so rolling back mail Exchange[FF5A7440396926C-0000000000000021] to un UNREAD
2024-05-20 18:02:29,316 ERROR [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: FF5A7440396926C-0000000000000022 on ExchangeId: FF5A7440396926C-0000000000000022). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail-stream://0?markAsRead=true&scopes          167
	...
                                         route1/process1                Processor@0x379b4e86                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:124)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.processBatch(GoogleMailStreamConsumer.java:135)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:101)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 500
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 23 common frames omitted
2024-05-20 18:02:29,317 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [GoogleMailStreamConsumer.java:171] Exchange failed, so rolling back mail Exchange[FF5A7440396926C-0000000000000022] to un UNREAD
2024-05-20 18:02:31,091 ERROR [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: FF5A7440396926C-0000000000000023 on ExchangeId: FF5A7440396926C-0000000000000023). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail-stream://0?markAsRead=true&scopes          155
	...
                                         route1/process1                Processor@0x379b4e86                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:124)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.processBatch(GoogleMailStreamConsumer.java:135)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:101)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 500
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 23 common frames omitted
2024-05-20 18:02:31,091 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [GoogleMailStreamConsumer.java:171] Exchange failed, so rolling back mail Exchange[FF5A7440396926C-0000000000000023] to un UNREAD
2024-05-20 18:02:32,451 ERROR [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: FF5A7440396926C-0000000000000024 on ExchangeId: FF5A7440396926C-0000000000000024). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail-stream://0?markAsRead=true&scopes          165
	...
                                         route1/process1                Processor@0x379b4e86                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:124)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.processBatch(GoogleMailStreamConsumer.java:135)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:101)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 500
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 23 common frames omitted
2024-05-20 18:02:32,451 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [GoogleMailStreamConsumer.java:171] Exchange failed, so rolling back mail Exchange[FF5A7440396926C-0000000000000024] to un UNREAD
2024-05-20 18:02:33,618 ERROR [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: FF5A7440396926C-0000000000000025 on ExchangeId: FF5A7440396926C-0000000000000025). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail-stream://0?markAsRead=true&scopes          203
	...
                                         route1/process1                Processor@0x379b4e86                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:124)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.processBatch(GoogleMailStreamConsumer.java:135)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:101)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 500
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 23 common frames omitted
2024-05-20 18:02:33,619 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [GoogleMailStreamConsumer.java:171] Exchange failed, so rolling back mail Exchange[FF5A7440396926C-0000000000000025] to un UNREAD
2024-05-20 18:02:34,798 ERROR [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: FF5A7440396926C-0000000000000026 on ExchangeId: FF5A7440396926C-0000000000000026). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail-stream://0?markAsRead=true&scopes          188
	...
                                         route1/process1                Processor@0x379b4e86                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:124)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.processBatch(GoogleMailStreamConsumer.java:135)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:101)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 500
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 23 common frames omitted
2024-05-20 18:02:34,799 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [GoogleMailStreamConsumer.java:171] Exchange failed, so rolling back mail Exchange[FF5A7440396926C-0000000000000026] to un UNREAD
2024-05-20 18:02:36,049 ERROR [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: FF5A7440396926C-0000000000000027 on ExchangeId: FF5A7440396926C-0000000000000027). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail-stream://0?markAsRead=true&scopes          329
	...
                                         route1/process1                Processor@0x379b4e86                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:124)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.processBatch(GoogleMailStreamConsumer.java:135)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:101)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 500
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 23 common frames omitted
2024-05-20 18:02:36,050 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [GoogleMailStreamConsumer.java:171] Exchange failed, so rolling back mail Exchange[FF5A7440396926C-0000000000000027] to un UNREAD
2024-05-20 18:02:37,322 ERROR [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: FF5A7440396926C-0000000000000028 on ExchangeId: FF5A7440396926C-0000000000000028). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail-stream://0?markAsRead=true&scopes          324
	...
                                         route1/process1                Processor@0x379b4e86                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:124)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.processBatch(GoogleMailStreamConsumer.java:135)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:101)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 500
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 23 common frames omitted
2024-05-20 18:02:37,322 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [GoogleMailStreamConsumer.java:171] Exchange failed, so rolling back mail Exchange[FF5A7440396926C-0000000000000028] to un UNREAD
2024-05-20 18:02:38,521 ERROR [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: FF5A7440396926C-0000000000000029 on ExchangeId: FF5A7440396926C-0000000000000029). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail-stream://0?markAsRead=true&scopes          247
	...
                                         route1/process1                Processor@0x379b4e86                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:124)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.processBatch(GoogleMailStreamConsumer.java:135)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:101)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 500
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 23 common frames omitted
2024-05-20 18:02:38,521 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [GoogleMailStreamConsumer.java:171] Exchange failed, so rolling back mail Exchange[FF5A7440396926C-0000000000000029] to un UNREAD
2024-05-20 18:02:40,267 ERROR [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: FF5A7440396926C-000000000000002A on ExchangeId: FF5A7440396926C-000000000000002A). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail-stream://0?markAsRead=true&scopes          267
	...
                                         route1/process1                Processor@0x379b4e86                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:124)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.processBatch(GoogleMailStreamConsumer.java:135)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:101)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.camel.http.base.HttpOperationFailedException: HTTP operation failed invoking http://localhost:8080/API/messages/ with statusCode: 500
	at org.apache.camel.component.http.HttpProducer.populateHttpOperationFailedException(HttpProducer.java:422)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:294)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 23 common frames omitted
2024-05-20 18:02:40,268 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [GoogleMailStreamConsumer.java:171] Exchange failed, so rolling back mail Exchange[FF5A7440396926C-000000000000002A] to un UNREAD
2024-05-20 18:02:41,672 ERROR [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: FF5A7440396926C-000000000000002B on ExchangeId: FF5A7440396926C-000000000000002B). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail-stream://0?markAsRead=true&scopes          152
	...
                                         route1/process1                Processor@0x379b4e86                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:124)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.processBatch(GoogleMailStreamConsumer.java:135)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:101)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 23 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 44 common frames omitted
2024-05-20 18:02:41,672 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [GoogleMailStreamConsumer.java:171] Exchange failed, so rolling back mail Exchange[FF5A7440396926C-000000000000002B] to un UNREAD
2024-05-20 18:02:42,875 ERROR [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: FF5A7440396926C-000000000000002C on ExchangeId: FF5A7440396926C-000000000000002C). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail-stream://0?markAsRead=true&scopes          270
	...
                                         route1/process1                Processor@0x379b4e86                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:124)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.processBatch(GoogleMailStreamConsumer.java:135)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:101)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 23 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 44 common frames omitted
2024-05-20 18:02:42,876 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [GoogleMailStreamConsumer.java:171] Exchange failed, so rolling back mail Exchange[FF5A7440396926C-000000000000002C] to un UNREAD
2024-05-20 18:02:43,995 ERROR [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: FF5A7440396926C-000000000000002D on ExchangeId: FF5A7440396926C-000000000000002D). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail-stream://0?markAsRead=true&scopes          156
	...
                                         route1/process1                Processor@0x379b4e86                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:124)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.processBatch(GoogleMailStreamConsumer.java:135)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:101)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 23 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 44 common frames omitted
2024-05-20 18:02:43,996 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [GoogleMailStreamConsumer.java:171] Exchange failed, so rolling back mail Exchange[FF5A7440396926C-000000000000002D] to un UNREAD
2024-05-20 18:02:45,123 ERROR [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: FF5A7440396926C-000000000000002E on ExchangeId: FF5A7440396926C-000000000000002E). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail-stream://0?markAsRead=true&scopes          163
	...
                                         route1/process1                Processor@0x379b4e86                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:124)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.processBatch(GoogleMailStreamConsumer.java:135)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:101)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 23 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 44 common frames omitted
2024-05-20 18:02:45,124 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [GoogleMailStreamConsumer.java:171] Exchange failed, so rolling back mail Exchange[FF5A7440396926C-000000000000002E] to un UNREAD
2024-05-20 18:02:46,187 ERROR [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: FF5A7440396926C-000000000000002F on ExchangeId: FF5A7440396926C-000000000000002F). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail-stream://0?markAsRead=true&scopes          134
	...
                                         route1/process1                Processor@0x379b4e86                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:124)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.processBatch(GoogleMailStreamConsumer.java:135)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:101)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 23 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 44 common frames omitted
2024-05-20 18:02:46,187 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [GoogleMailStreamConsumer.java:171] Exchange failed, so rolling back mail Exchange[FF5A7440396926C-000000000000002F] to un UNREAD
2024-05-20 18:02:47,520 ERROR [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: FF5A7440396926C-0000000000000030 on ExchangeId: FF5A7440396926C-0000000000000030). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail-stream://0?markAsRead=true&scopes          361
	...
                                         route1/process1                Processor@0x379b4e86                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:124)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.processBatch(GoogleMailStreamConsumer.java:135)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:101)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 23 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 44 common frames omitted
2024-05-20 18:02:47,520 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [GoogleMailStreamConsumer.java:171] Exchange failed, so rolling back mail Exchange[FF5A7440396926C-0000000000000030] to un UNREAD
2024-05-20 18:02:48,655 ERROR [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: FF5A7440396926C-0000000000000031 on ExchangeId: FF5A7440396926C-0000000000000031). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail-stream://0?markAsRead=true&scopes          149
	...
                                         route1/process1                Processor@0x379b4e86                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:124)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.processBatch(GoogleMailStreamConsumer.java:135)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:101)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 23 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 44 common frames omitted
2024-05-20 18:02:48,655 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [GoogleMailStreamConsumer.java:171] Exchange failed, so rolling back mail Exchange[FF5A7440396926C-0000000000000031] to un UNREAD
2024-05-20 18:02:49,810 ERROR [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.p.e.DefaultErrorHandler [CamelLogger.java:205] Failed delivery for (MessageId: FF5A7440396926C-0000000000000032 on ExchangeId: FF5A7440396926C-0000000000000032). Exhausted after delivery attempt: 1 caught: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]

Message History (source location and message history is disabled)
---------------------------------------------------------------------------------------------------------------------------------------
Source                                   ID                             Processor                                          Elapsed (ms)
                                         route1/route1                  from[google-mail-stream://0?markAsRead=true&scopes          143
	...
                                         route1/process1                Processor@0x379b4e86                                          0

Stacktrace
---------------------------------------------------------------------------------------------------------------------------------------
org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:221)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:213)
	at it.polito.communicationmanager.services.EMailRoute.configure$lambda$4(CommunicationServiceImpl.kt:124)
	at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleFirst(RedeliveryErrorHandler.java:462)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:438)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:163)
	at org.apache.camel.impl.engine.CamelInternalProcessor.processNonTransacted(CamelInternalProcessor.java:355)
	at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:331)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.processBatch(GoogleMailStreamConsumer.java:135)
	at org.apache.camel.component.google.mail.stream.GoogleMailStreamConsumer.poll(GoogleMailStreamConsumer.java:101)
	at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:204)
	at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:118)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:572)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:358)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)
	at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)
	at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)
	at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)
	at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)
	at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)
	at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:72)
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)
	at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:445)
	at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:273)
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:199)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:173)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:109)
	at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:106)
	at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:219)
	... 23 common frames omitted
Caused by: java.net.ConnectException: Connection refused: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:751)
	at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)
	at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)
	... 44 common frames omitted
2024-05-20 18:02:49,810 WARN [Camel (camel-1) thread #1 - google-mail-stream://0] o.a.c.c.g.m.s.GoogleMailStreamConsumer [GoogleMailStreamConsumer.java:171] Exchange failed, so rolling back mail Exchange[FF5A7440396926C-0000000000000032] to un UNREAD
2024-05-20 18:02:50,480 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-20 18:02:50,484 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-20 18:02:50,484 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail-stream://0)
2024-05-20 18:02:50,486 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 5ms (uptime:1m18s)
2024-05-20 18:02:54,031 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 23100 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-20 18:02:54,034 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-20 18:02:54,793 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-20 18:02:54,800 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-20 18:02:54,801 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-20 18:02:54,842 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-20 18:02:54,843 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 772 ms
2024-05-20 18:02:55,729 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-20 18:02:58,843 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-20 18:02:58,856 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-20 18:02:58,856 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail-stream://0)
2024-05-20 18:02:58,856 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 11ms (build:0ms init:0ms start:11ms)
2024-05-20 18:02:58,858 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 5.071 seconds (process running for 5.535)
2024-05-20 18:05:25,051 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-20 18:05:25,055 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-20 18:05:25,056 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail-stream://0)
2024-05-20 18:05:25,058 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 6ms (uptime:2m26s)
2024-05-20 18:05:28,244 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 25352 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-20 18:05:28,247 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-20 18:05:29,008 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-20 18:05:29,016 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-20 18:05:29,016 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-20 18:05:29,067 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-20 18:05:29,067 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 787 ms
2024-05-20 18:05:29,995 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-20 18:05:36,699 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-20 18:05:36,710 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-20 18:05:36,710 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail-stream://0)
2024-05-20 18:05:36,710 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 10ms (build:0ms init:0ms start:10ms)
2024-05-20 18:05:36,713 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 8.685 seconds (process running for 9.161)
2024-05-20 18:05:39,702 INFO [Camel (camel-1) thread #1 - google-mail-stream://0] i.p.c.c.CommunicationController [CommunicationServiceImpl.kt:119] Sending message: CreateMessageDTO(channel=email, priority=medium, date=Mon May 20 17:13:09 CEST 2024, subject=fvsev, body=RGVsaXZlcmVkLVRvOiBhdzJnNTIwMjRAZ21haWwuY29tDQpSZWNlaXZlZDogYnkgMjAwMjphMDU6NjAyMDoxMmVjOmIwOjJkNzpjZDQ4OmIwMjAgd2l0aCBTTVRQIGlkIHAxMmNzcDYwODA4NTR3ZGU7DQogICAgICAgIE1vbiwgMjAgTWF5IDIwMjQgMDg6MTM6MjAgLTA3MDAgKFBEVCkNClgtUmVjZWl2ZWQ6IGJ5IDIwMDI6YTJlOmE1NTU6MDpiMDoyZTE6YThkYjoyYmNhIHdpdGggU01UUCBpZCAzODMwOGU3ZmZmNGNhLTJlNTIwNWUyOTcybXIyMjk3MjY2NDFmYS40OC4xNzE2MjE4MDAwNDgxOw0KICAgICAgICBNb24sIDIwIE1heSAyMDI0IDA4OjEzOjIwIC0wNzAwIChQRFQpDQpBUkMtU2VhbDogaT0xOyBhPXJzYS1zaGEyNTY7IHQ9MTcxNjIxODAwMDsgY3Y9bm9uZTsNCiAgICAgICAgZD1nb29nbGUuY29tOyBzPWFyYy0yMDE2MDgxNjsNCiAgICAgICAgYj1OeXlVaTBSY3F2VTQ3Q1c3Rk9qZi93dStITExJZDh0N3pEMlhrYVZsZTJMMURjT0JrQ0RKUVB1azM5S1VWQUxQcGQNCiAgICAgICAgIHBvZHBvKzZpbC8rRGYwb2NrcFFWc1VuK0VIck0yaWdXd0lWVmhQSUx4QUJsMXZlbFE5eksyWnhHQ1gwbXhtRUNHa0tlDQogICAgICAgICBiTFJ4QkVaUjBXaFZJSGpjekFiU2lwL082OU1BVElQczJ0NFlsVjZRM3d1Zk1MMTNjcXVGdGJsTnhoNkxCWm9rZDZXSQ0KICAgICAgICAgcUZRNEl2dWJIc1NBdmhqeTd4cVJCWTA4cmtIK0xIVVo2MkRlT0haamJ3enJzZlR2SjdER0ZtTnhyclovdHAvNlUyUmYNCiAgICAgICAgIHpnelZaTjRQUkVPSmttNFR6OGZIZk1OVlhZZ1BVcExtUFhtVnd2MHdFRXJkcjJ0K0VYTUdncjBud05INjZwQm5SZ1VLDQogICAgICAgICBMY1RnPT0NCkFSQy1NZXNzYWdlLVNpZ25hdHVyZTogaT0xOyBhPXJzYS1zaGEyNTY7IGM9cmVsYXhlZC9yZWxheGVkOyBkPWdvb2dsZS5jb207IHM9YXJjLTIwMTYwODE2Ow0KICAgICAgICBoPXRvOnN1YmplY3Q6bWVzc2FnZS1pZDpkYXRlOmZyb206bWltZS12ZXJzaW9uOmRraW0tc2lnbmF0dXJlOw0KICAgICAgICBiaD02NUZPdWUvRW4zKzNuQnJZRjc5Mm9ITjd0eWNJVWNYZHBnVkR0bGZ6S1N3PTsNCiAgICAgICAgZmg9QWtjTTVpSFFnOXczOTJYYllsMXV2bk1CQWxqQlFUZW5ucFhscW10Y3o5VT07DQogICAgICAgIGI9Y2RnalROU3hTekhxdlVJVHFRbTA4eDNSekdXTDJvU1cydHRQM3JGZW1la0NhVGloMDlhbUU3cTR4K1RicDM1R1M0DQogICAgICAgICBPVnV2UHRubXhuQXJTRlNVcTZCZ0pzSkFEVGlHYVJSankrOE41M1dVV3hka2QvSkk2U3RSSTFtVXplalFQc014YUpZeg0KICAgICAgICAgclI1UU5uZk05SUVmbjI4MmpETEVXc1BrRVNxQnhDRHZaS3VibGREYkFsNWlQUlZRRkJmUlJTMjVuUFpNd2t4N00xcHINCiAgICAgICAgIFIwWnFYVDBIbURHeVUzMkl3NEgzVncrZnVBemNxUHpObTZ4NTQwSnM0ckxHRWRhdGxVaXR1bVJ1QlBtS3N3bFVQVnh5DQogICAgICAgICBRQTkvV0tuYWcvL3cxd0JFb3o1Yys3MmlQR3ZFbTdEc3hzWDZaMUZ3eEV5WjJWSEpXaTRSdkRHMWE3NEFKeHU2VVpsMQ0KICAgICAgICAgQnpHdz09Ow0KICAgICAgICBkYXJhPWdvb2dsZS5jb20NCkFSQy1BdXRoZW50aWNhdGlvbi1SZXN1bHRzOiBpPTE7IG14Lmdvb2dsZS5jb207DQogICAgICAgZGtpbT1wYXNzIGhlYWRlci5pPUBnbWFpbC5jb20gaGVhZGVyLnM9MjAyMzA2MDEgaGVhZGVyLmI9WTVmUU1UQkY7DQogICAgICAgc3BmPXBhc3MgKGdvb2dsZS5jb206IGRvbWFpbiBvZiBnYWV0YW5vLnJvYmVydG8yMDAxQGdtYWlsLmNvbSBkZXNpZ25hdGVzIDIwOS44NS4yMjAuNDEgYXMgcGVybWl0dGVkIHNlbmRlcikgc210cC5tYWlsZnJvbT1nYWV0YW5vLnJvYmVydG8yMDAxQGdtYWlsLmNvbTsNCiAgICAgICBkbWFyYz1wYXNzIChwPU5PTkUgc3A9UVVBUkFOVElORSBkaXM9Tk9ORSkgaGVhZGVyLmZyb209Z21haWwuY29tDQpSZXR1cm4tUGF0aDogPGdhZXRhbm8ucm9iZXJ0bzIwMDFAZ21haWwuY29tPg0KUmVjZWl2ZWQ6IGZyb20gbWFpbC1zb3ItZjQxLmdvb2dsZS5jb20gKG1haWwtc29yLWY0MS5nb29nbGUuY29tLiBbMjA5Ljg1LjIyMC40MV0pDQogICAgICAgIGJ5IG14Lmdvb2dsZS5jb20gd2l0aCBTTVRQUyBpZCAzODMwOGU3ZmZmNGNhLTJlNzJiYjI0ODFjc29yNDI4MDcwMWZhLjEuMjAyNC4wNS4yMC4wOC4xMy4yMA0KICAgICAgICBmb3IgPGF3Mkc1MjAyNEBnbWFpbC5jb20-DQogICAgICAgIChHb29nbGUgVHJhbnNwb3J0IFNlY3VyaXR5KTsNCiAgICAgICAgTW9uLCAyMCBNYXkgMjAyNCAwODoxMzoyMCAtMDcwMCAoUERUKQ0KUmVjZWl2ZWQtU1BGOiBwYXNzIChnb29nbGUuY29tOiBkb21haW4gb2YgZ2FldGFuby5yb2JlcnRvMjAwMUBnbWFpbC5jb20gZGVzaWduYXRlcyAyMDkuODUuMjIwLjQxIGFzIHBlcm1pdHRlZCBzZW5kZXIpIGNsaWVudC1pcD0yMDkuODUuMjIwLjQxOw0KQXV0aGVudGljYXRpb24tUmVzdWx0czogbXguZ29vZ2xlLmNvbTsNCiAgICAgICBka2ltPXBhc3MgaGVhZGVyLmk9QGdtYWlsLmNvbSBoZWFkZXIucz0yMDIzMDYwMSBoZWFkZXIuYj1ZNWZRTVRCRjsNCiAgICAgICBzcGY9cGFzcyAoZ29vZ2xlLmNvbTogZG9tYWluIG9mIGdhZXRhbm8ucm9iZXJ0bzIwMDFAZ21haWwuY29tIGRlc2lnbmF0ZXMgMjA5Ljg1LjIyMC40MSBhcyBwZXJtaXR0ZWQgc2VuZGVyKSBzbXRwLm1haWxmcm9tPWdhZXRhbm8ucm9iZXJ0bzIwMDFAZ21haWwuY29tOw0KICAgICAgIGRtYXJjPXBhc3MgKHA9Tk9ORSBzcD1RVUFSQU5USU5FIGRpcz1OT05FKSBoZWFkZXIuZnJvbT1nbWFpbC5jb20NCkRLSU0tU2lnbmF0dXJlOiB2PTE7IGE9cnNhLXNoYTI1NjsgYz1yZWxheGVkL3JlbGF4ZWQ7DQogICAgICAgIGQ9Z21haWwuY29tOyBzPTIwMjMwNjAxOyB0PTE3MTYyMTgwMDA7IHg9MTcxNjgyMjgwMDsgZGFyYT1nb29nbGUuY29tOw0KICAgICAgICBoPXRvOnN1YmplY3Q6bWVzc2FnZS1pZDpkYXRlOmZyb206bWltZS12ZXJzaW9uOmZyb206dG86Y2M6c3ViamVjdA0KICAgICAgICAgOmRhdGU6bWVzc2FnZS1pZDpyZXBseS10bzsNCiAgICAgICAgYmg9NjVGT3VlL0VuMyszbkJyWUY3OTJvSE43dHljSVVjWGRwZ1ZEdGxmektTdz07DQogICAgICAgIGI9WTVmUU1UQkY2NkIwb1hCMkVSWmpLRlN3a252R2xxZVFrWnorSWJLb1F6ZSsvcmczQnVKQnYvdTZmRjFuRTRGc1BFDQogICAgICAgICBrODlVVTh0ZWRDS1NUeW4xa0JPaVVUemZrL1JKYVY1ZWhremlYZWNtdUhtVnBxTzJTQkducnRmZkV2cXdLTFpDTUxJNg0KICAgICAgICAga1k1eVYrTWZYSjJON0M1N2NTZkthS1ZuTmtyTW1yaWQ1MkxxaTdIRGlrRmZ3OGNPYlY4aVZsMGduWEI0WDZ6OTBRVnQNCiAgICAgICAgIERtNGJHTHVHczNaSGJaU1JENnNmem8wcEJEWWtPQjIwTmJXWXI0NFlOaVoyaVdLVXQ5RXAzQTJ2SThHb3RsLzYwbjBjDQogICAgICAgICAxdkY0c1A4Mlh2TFdyMngxVzNZeFF4Tm5LOFBiWEhFdHZPcVpzZm5DT2k0cmR0eTZKdHVJc2tPSUlsN1hOK3Y1SWw0Wg0KICAgICAgICAgWmpFZz09DQpYLUdvb2dsZS1ES0lNLVNpZ25hdHVyZTogdj0xOyBhPXJzYS1zaGEyNTY7IGM9cmVsYXhlZC9yZWxheGVkOw0KICAgICAgICBkPTFlMTAwLm5ldDsgcz0yMDIzMDYwMTsgdD0xNzE2MjE4MDAwOyB4PTE3MTY4MjI4MDA7DQogICAgICAgIGg9dG86c3ViamVjdDptZXNzYWdlLWlkOmRhdGU6ZnJvbTptaW1lLXZlcnNpb246eC1nbS1tZXNzYWdlLXN0YXRlDQogICAgICAgICA6ZnJvbTp0bzpjYzpzdWJqZWN0OmRhdGU6bWVzc2FnZS1pZDpyZXBseS10bzsNCiAgICAgICAgYmg9NjVGT3VlL0VuMyszbkJyWUY3OTJvSE43dHljSVVjWGRwZ1ZEdGxmektTdz07DQogICAgICAgIGI9QVB0UVFIMnBGYVlKRE1BY3NUN0xPRStERTdieGw3R0gwNHBhMWZwUFpzSnN6NlRHU2NQS3h5aDdHYTJVZVNCakVRDQogICAgICAgICB3OFF4MStIa0xndWVUV2NRZjVPYWFJeEV0S1ZkWTl2SklZSVBSNlFSZERuV2Q0dEp0aEZrRXpWdDBMdUY0b1BRU3ozOQ0KICAgICAgICAgcHo3WUlOQ0FUNG05YmUyTXovclBibUsvUnZuWDVLOW41dTI4WGU0V0xjclJ3YjgzeG9GRE9BVWRlSWVRNkFmWSs1NHQNCiAgICAgICAgIFJUY0Npa0Jicml4OTY3ZzNvYjJMcnBmdWpMTVVObVFuZDhocG81U2NqMGhOdGRNU2NhTjFSM1p0c3M4MGNFWlRGNG9RDQogICAgICAgICB1djRqOEtmYVpTV1Q4T0VGQUlSSlh2Qjc3T2M2NXRJbXJWSEZ2TVoxcG1UUU5vdEhaYTVEb3d2bUpsdW5LNGlWLy91YQ0KICAgICAgICAgdGlZQT09DQpYLUdtLU1lc3NhZ2UtU3RhdGU6IEFPSnUwWXdFdlROdllwbzlDSzNWcXBCQVFSN005dXViak5Jem1xb21sSllyeEtZSkJyY2hQaVdDDQoJcHRzeWVjU1o2M05IQVBsUFh6R2kyVTV4aUorWWEwdzRtTDRPM0VLNHU0Q0o3UUFLYTlYempLWWY2NGNBYlRlMkEyUDV6NUFpWVliDQoJWjRJNTRrQS9JVEVtUTVDUWM3c2pRejdkVTZObC9YZE41DQpYLUdvb2dsZS1TbXRwLVNvdXJjZTogQUdIVCtJRkh0SWZvRDNzcys5N2ZoYkMzcHRZbFpqT0tpRHRkaE5MMVR5amsyTktlQVcxdEtEYnpJbHJrcWp0eFJTb2FmQ00ycm1rbWVjMS8zRXpGYWZZTHBYOD0NClgtUmVjZWl2ZWQ6IGJ5IDIwMDI6YTJlOmQwYTowOmIwOjJlNToyYzdlOjI1NyB3aXRoIFNNVFAgaWQgMzgzMDhlN2ZmZjRjYS0yZTUyYzdlMDNhZW1yMTk2NDgzOTExZmEuMzAuMTcxNjIxNzk5OTc0MjsNCiBNb24sIDIwIE1heSAyMDI0IDA4OjEzOjE5IC0wNzAwIChQRFQpDQpNSU1FLVZlcnNpb246IDEuMA0KRnJvbTogR2FldGFubyBSb2JlcnRvIDxnYWV0YW5vLnJvYmVydG8yMDAxQGdtYWlsLmNvbT4NCkRhdGU6IE1vbiwgMjAgTWF5IDIwMjQgMTc6MTM6MDkgKzAyMDANCk1lc3NhZ2UtSUQ6IDxDQUsreXFremNmcGlKSmt2X1MyZ3BrNTJlek5nOHpLQ3hZNGFmcjRrTis9cFZEZTl4cXdAbWFpbC5nbWFpbC5jb20-DQpTdWJqZWN0OiBmdnNldg0KVG86IGF3Mkc1MjAyNEBnbWFpbC5jb20NCkNvbnRlbnQtVHlwZTogbXVsdGlwYXJ0L2FsdGVybmF0aXZlOyBib3VuZGFyeT0iMDAwMDAwMDAwMDAwM2I2MjU5MDYxOGU0MjRmOSINCg0KLS0wMDAwMDAwMDAwMDAzYjYyNTkwNjE4ZTQyNGY5DQpDb250ZW50LVR5cGU6IHRleHQvcGxhaW47IGNoYXJzZXQ9IlVURi04Ig0KDQp2c3Zlc3ZlZA0KDQotLTAwMDAwMDAwMDAwMDNiNjI1OTA2MThlNDI0ZjkNCkNvbnRlbnQtVHlwZTogdGV4dC9odG1sOyBjaGFyc2V0PSJVVEYtOCINCg0KPGRpdiBkaXI9Imx0ciI-dnN2ZXN2ZWQ8L2Rpdj4NCg0KLS0wMDAwMDAwMDAwMDAzYjYyNTkwNjE4ZTQyNGY5LS0NCg==, email=gaetano.roberto2001@gmail.com, telephone=null, address=null)
2024-05-20 18:12:33,751 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-20 18:12:33,767 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-20 18:12:33,767 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail-stream://0)
2024-05-20 18:12:33,767 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 16ms (uptime:6m57s)
2024-05-20 18:39:57,490 INFO [Test worker] o.s.t.c.s.AnnotationConfigContextLoaderUtils [AnnotationConfigContextLoaderUtils.java:83] Could not detect default configuration classes for test class [it.polito.customerrelationshipmanagement.IntegrationTest]: IntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-05-20 18:39:57,662 INFO [Test worker] o.s.b.t.c.SpringBootTestContextBootstrapper [SpringBootTestContextBootstrapper.java:234] Found @SpringBootConfiguration it.polito.communicationmanager.CommunicationManagerApplication for test class it.polito.communicationmanager.CommunicationManagerApplicationTests
2024-05-20 18:39:58,714 INFO [Test worker] i.p.c.CommunicationManagerApplicationTests [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationTests using Java 21.0.2 with PID 13140 (started by gaeta in C:\Users\gaeta\OneDrive\Desktop\lab4-g05\CommunicationManager)
2024-05-20 18:39:58,716 INFO [Test worker] i.p.c.CommunicationManagerApplicationTests [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-20 18:40:00,844 INFO [Test worker] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 0 (http)
2024-05-20 18:40:00,867 INFO [Test worker] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-20 18:40:00,869 INFO [Test worker] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-20 18:40:01,011 INFO [Test worker] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-20 18:40:01,013 INFO [Test worker] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 2274 ms
2024-05-20 18:40:03,150 INFO [Test worker] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring TestDispatcherServlet ''
2024-05-20 18:40:03,152 INFO [Test worker] o.s.t.w.s.TestDispatcherServlet [FrameworkServlet.java:532] Initializing Servlet ''
2024-05-20 18:40:03,154 INFO [Test worker] o.s.t.w.s.TestDispatcherServlet [FrameworkServlet.java:554] Completed initialization in 2 ms
2024-05-20 18:40:03,343 INFO [Test worker] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 50738 (http) with context path ''
2024-05-20 18:40:06,000 INFO [Test worker] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-20 18:40:06,026 INFO [Test worker] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-20 18:40:06,027 INFO [Test worker] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail-stream://0)
2024-05-20 18:40:06,028 INFO [Test worker] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 24ms (build:0ms init:0ms start:24ms)
2024-05-20 18:40:06,033 INFO [Test worker] i.p.c.CommunicationManagerApplicationTests [StartupInfoLogger.java:56] Started CommunicationManagerApplicationTests in 7.702 seconds (process running for 10.242)
2024-05-20 18:40:08,563 INFO [Test worker] i.p.c.c.CommunicationController [CommunicationServiceImpl.kt:47] Email sended.
2024-05-20 18:40:08,632 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-20 18:40:08,639 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-20 18:40:08,640 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail-stream://0)
2024-05-20 18:40:08,643 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 10ms (uptime:2s)
2024-05-20 19:54:20,779 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 21524 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-20 19:54:20,786 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-20 19:54:21,749 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-20 19:54:21,759 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-20 19:54:21,759 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-20 19:54:21,808 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-20 19:54:21,808 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 992 ms
2024-05-20 19:54:22,888 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-20 19:54:24,647 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-20 19:54:24,662 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-20 19:54:24,662 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail-stream://0)
2024-05-20 19:54:24,662 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 13ms (build:0ms init:0ms start:13ms)
2024-05-20 19:54:24,662 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 4.172 seconds (process running for 4.726)
2024-05-20 19:54:24,679 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-20 19:54:24,679 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-20 19:54:24,679 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail-stream://0)
2024-05-20 19:54:24,679 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 4ms (uptime:0s)
2024-05-20 19:54:35,270 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 7152 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-20 19:54:35,272 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-20 19:54:36,014 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-20 19:54:36,030 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-20 19:54:36,031 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-20 19:54:36,075 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-20 19:54:36,076 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 769 ms
2024-05-20 19:54:36,965 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-20 19:54:39,009 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-20 19:54:39,021 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-20 19:54:39,021 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail-stream://0)
2024-05-20 19:54:39,021 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 10ms (build:0ms init:0ms start:10ms)
2024-05-20 19:54:39,023 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 3.966 seconds (process running for 4.424)
2024-05-20 19:54:41,848 INFO [http-nio-8081-exec-1] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-05-20 19:54:41,849 INFO [http-nio-8081-exec-1] o.s.w.s.DispatcherServlet [FrameworkServlet.java:532] Initializing Servlet 'dispatcherServlet'
2024-05-20 19:54:41,850 INFO [http-nio-8081-exec-1] o.s.w.s.DispatcherServlet [FrameworkServlet.java:554] Completed initialization in 1 ms
2024-05-20 19:54:42,601 INFO [http-nio-8081-exec-1] i.p.c.c.CommunicationController [CommunicationServiceImpl.kt:47] Email sended.
2024-05-20 19:54:49,987 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-20 19:54:49,990 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-20 19:54:49,990 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail-stream://0)
2024-05-20 19:54:49,991 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 4ms (uptime:10s)
2024-05-20 19:54:53,434 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 7516 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-20 19:54:53,437 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-20 19:54:54,211 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-20 19:54:54,220 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-20 19:54:54,220 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-20 19:54:54,264 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-20 19:54:54,264 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 793 ms
2024-05-20 19:54:55,182 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-20 19:54:57,108 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-20 19:54:57,121 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-20 19:54:57,121 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail-stream://0)
2024-05-20 19:54:57,121 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 11ms (build:0ms init:0ms start:11ms)
2024-05-20 19:54:57,123 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 3.907 seconds (process running for 4.348)
2024-05-20 19:54:59,548 INFO [http-nio-8081-exec-1] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-05-20 19:54:59,548 INFO [http-nio-8081-exec-1] o.s.w.s.DispatcherServlet [FrameworkServlet.java:532] Initializing Servlet 'dispatcherServlet'
2024-05-20 19:54:59,550 INFO [http-nio-8081-exec-1] o.s.w.s.DispatcherServlet [FrameworkServlet.java:554] Completed initialization in 1 ms
2024-05-20 19:55:00,222 INFO [http-nio-8081-exec-1] i.p.c.c.CommunicationController [CommunicationServiceImpl.kt:47] Email sended.
2024-05-20 19:55:30,363 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-20 19:55:30,365 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-20 19:55:30,365 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail-stream://0)
2024-05-20 19:55:30,367 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 4ms (uptime:33s)
2024-05-26 15:29:27,701 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:50] Starting CommunicationManagerApplicationKt using Java 21.0.2 with PID 29604 (C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager\build\classes\kotlin\main started by Domenico in C:\Users\Domenico\IdeaProjects\lab4-g05\CommunicationManager)
2024-05-26 15:29:27,704 INFO [main] i.p.c.CommunicationManagerApplicationKt [SpringApplication.java:654] No active profile set, falling back to 1 default profile: "default"
2024-05-26 15:29:28,908 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:109] Tomcat initialized with port 8081 (http)
2024-05-26 15:29:28,919 INFO [main] o.a.c.c.StandardService [DirectJDKLog.java:173] Starting service [Tomcat]
2024-05-26 15:29:28,919 INFO [main] o.a.c.c.StandardEngine [DirectJDKLog.java:173] Starting Servlet engine: [Apache Tomcat/10.1.20]
2024-05-26 15:29:28,972 INFO [main] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring embedded WebApplicationContext
2024-05-26 15:29:28,973 INFO [main] o.s.b.w.s.c.ServletWebServerApplicationContext [ServletWebServerApplicationContext.java:296] Root WebApplicationContext: initialization completed in 1219 ms
2024-05-26 15:29:30,202 INFO [main] o.s.b.w.e.t.TomcatWebServer [TomcatWebServer.java:241] Tomcat started on port 8081 (http) with context path ''
2024-05-26 15:29:32,522 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2458] Apache Camel 4.5.0 (camel-1) is starting
2024-05-26 15:29:32,535 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2661] Routes startup (total:1)
2024-05-26 15:29:32,535 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2665]     Started route1 (google-mail-stream://0)
2024-05-26 15:29:32,535 INFO [main] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2683] Apache Camel 4.5.0 (camel-1) started in 12ms (build:0ms init:0ms start:12ms)
2024-05-26 15:29:32,538 INFO [main] i.p.c.CommunicationManagerApplicationKt [StartupInfoLogger.java:56] Started CommunicationManagerApplicationKt in 5.193 seconds (process running for 14.174)
2024-05-26 15:30:24,993 INFO [http-nio-8081-exec-1] o.a.c.c.C.[.[.[/] [DirectJDKLog.java:173] Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-05-26 15:30:24,993 INFO [http-nio-8081-exec-1] o.s.w.s.DispatcherServlet [FrameworkServlet.java:532] Initializing Servlet 'dispatcherServlet'
2024-05-26 15:30:24,994 INFO [http-nio-8081-exec-1] o.s.w.s.DispatcherServlet [FrameworkServlet.java:554] Completed initialization in 1 ms
2024-05-26 15:30:25,718 INFO [http-nio-8081-exec-1] i.p.c.c.CommunicationController [CommunicationServiceImpl.kt:47] Email sended.
2024-05-26 15:34:17,988 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:2895] Apache Camel 4.5.0 (camel-1) is shutting down (timeout:45s)
2024-05-26 15:34:17,993 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166] Routes stopped (total:1)
2024-05-26 15:34:17,993 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [CamelLogger.java:166]     Stopped route1 (google-mail-stream://0)
2024-05-26 15:34:17,997 INFO [SpringApplicationShutdownHook] o.a.c.i.e.AbstractCamelContext [AbstractCamelContext.java:3026] Apache Camel 4.5.0 (camel-1) shutdown in 8ms (uptime:4m45s)
